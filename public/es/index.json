[{"content":"Aprende las diferencias clave entre las control y data policies en Cisco SD-WAN, cu√°ndo usar cada una y c√≥mo impactan en el enrutamiento y el reenv√≠o del tr√°fico.\nIntroducci√≥n Cisco SD-WAN proporciona herramientas poderosas para definir tanto el comportamiento de enrutamiento como el flujo del tr√°fico a trav√©s del overlay. En el n√∫cleo de esta flexibilidad existen dos tipos clave de pol√≠ticas: pol√≠ticas de control y Data Policies. Entender la diferencia entre ambas es crucial para dise√±ar implementaciones SD-WAN escalables y optimizadas.\nEn esta publicaci√≥n, exploraremos qu√© hace cada tipo de pol√≠tica, en qu√© se diferencian y cu√°ndo usar una sobre la otra.\nPol√≠ticas Centralizadas y Locales Las pol√≠ticas se categorizan seg√∫n el lugar donde se configuran y aplican: pueden ser Centralizadas o Locales. El Manager utiliza netconf/yang para enviar la configuraci√≥n de pol√≠ticas.\nPol√≠ticas Centralizadas\nSe configuran en el Controller (vSmart) y se env√≠an a un grupo seleccionado de routers SD-WAN a trav√©s del protocolo Overlay Management Protocol (OMP). Incluyen:\npol√≠ticas de control Data policies Pol√≠ticas de App-Aware Routing Pol√≠ticas Locales\nSe configuran directamente en los routers SD-WAN y solo afectan a ese dispositivo espec√≠fico. Incluyen:\nACLs locales Pol√≠ticas de enrutamiento (Route policies) Configuraci√≥n de QoS ¬øQu√© son las Pol√≠ticas de Control? Las pol√≠ticas de control en Cisco SD-WAN se aplican en el plano de control ‚Äì espec√≠ficamente, definen c√≥mo se intercambia la informaci√≥n de ruteo entre los Controllers y los routers SD-WAN.\nCaracter√≠sticas clave:\nSe aplican en los Controllers Influyen en la publicaci√≥n de rutas y propagaci√≥n de TLOCs Definen qu√© rutas se aceptan, modifican o rechazan Casos de uso t√≠picos:\nCrear topolog√≠as (hub/spoke, partial-mesh, etc.) Controlar route-leaking entre VPNs Filtrado o etiquetado de rutas OMP Las pol√≠ticas de control definen la topolog√≠a SD-WAN, decidiendo qu√© rutas existen y hacia d√≥nde pueden ir.\n¬øQu√© son las Pol√≠ticas de Datos? Las pol√≠ticas de datos, por otro lado, operan en el plano de datos. Definen c√≥mo se maneja el tr√°fico real.\nCaracter√≠sticas clave:\nTambi√©n se configuran en los Controllers pero se aplican en los routers SD-WAN Operan a nivel de plano de datos, no afectan la publicaci√≥n de rutas Pueden hacer match a varios campos: IP de origen/destino, puertos, aplicaciones, etc. Casos de uso t√≠picos:\nRedirecci√≥n de tr√°fico seg√∫n aplicaci√≥n Aplicaci√≥n de clases de QoS Bloqueo de ciertos tipos de tr√°fico (por ejemplo, mediante reglas tipo ACL) Usando una analog√≠a: las pol√≠ticas de control son los urbanistas que deciden d√≥nde se construyen las calles; las pol√≠ticas de datos son las reglas de tr√°nsito que dictan c√≥mo se mueve el tr√°fico por ellas.\nDiferencias clave a simple vista Caracter√≠stica Control Policy pol√≠ticas de datos Plano Plano de control Plano de datos Se aplica en Controller WAN Edge Afecta Publicaci√≥n de rutas Reenv√≠o del tr√°fico real Casos comunes Filtrado de rutas, TLOCs Redirecci√≥n de tr√°fico, QoS, ACLs Direccionalidad Entre controllers Del controller a los routers Orden de ejecuci√≥n de pol√≠ticas Los siguientes pasos ocurren cuando un paquete pasa por un router de SD-WAN:\nPrimero se aplican las pol√≠ticas locales de entrada, como las ACLs a nivel de interfaz y configuraciones de QoS. Estas pueden filtrar paquetes y aplicar marcados o remarcar para QoS.\nDespu√©s se eval√∫a la pol√≠tica de Application-Aware Routing centralizada. Este toma decisiones de reenv√≠o solo entre rutas de costo igual que ya est√©n en la tabla de enrutamiento.\nLuego se eval√∫a la pol√≠tica de datos centralizada, que tiene la capacidad de sobrescribir cualquier decisi√≥n de reenv√≠o tomada por AAR.\nUna vez aplicadas las pol√≠ticas, el sistema realiza una b√∫squeda de enrutamiento y env√≠o para identificar la interfaz de salida apropiada.\nSe aplican los mecanismos de queueing y scheduling para moldear el tr√°fico seg√∫n la configuraci√≥n de QoS.\nFinalmente, se aplica la pol√≠tica local de salida antes de colocar el paquete en el medio.\nEntender este orden es clave para evitar errores de configuraci√≥n y asegurar que tus pol√≠ticas funcionen como esperas. Un error com√∫n es sobrescribir sin querer una decisi√≥n de AAR aplicando una pol√≠ticas de datos centralizada que coincide con el mismo tr√°fico y lo redirige a otro lugar.\n¬øCu√°ndo usar cu√°l? Elegir entre control y data policies depende de qu√© problema est√°s tratando de resolver:\n¬øQuieres limitar qu√© rutas se comparten entre sitios? ‚Üí Usa una pol√≠ticas de control. ¬øNecesitas redirigir ciertas aplicaciones por MPLS o DIA? ‚Üí Eso es trabajo de una pol√≠ticas de datos. ¬øIntentas evitar loops de publicidad de rutas o controlar fugas entre VPNs? ‚Üí pol√≠ticas de control. ¬øQuieres priorizar tr√°fico VoIP o bloquear tr√°fico P2P? ‚Üí pol√≠ticas de datos. En muchos dise√±os, ambas se usan en conjunto. Por ejemplo, una control policy puede garantizar que solo ciertos prefijos sean alcanzables entre sitios, mientras que una pol√≠ticas de datos se encarga de c√≥mo se prioriza y reenv√≠a ese tr√°fico coincidente.\nConclusi√≥n Las pol√≠ticas de datos y control tienen prop√≥sitos distintos pero complementarios en Cisco SD-WAN. Una gobierna la topolog√≠a y decisiones de enrutamiento, la otra define c√≥mo se mueve el tr√°fico dentro de esa topolog√≠a.\nEntender estas diferencias te permite construir entornos SD-WAN m√°s inteligentes y eficientes. ¬øQuieres profundizar m√°s? Consulta la documentaci√≥n oficial de Cisco sobre pol√≠ticas de control y Data Policies.\nTambi√©n te recomiendo leer mi an√°lisis detallado sobre Application-Aware Routing, y descubrir c√≥mo SD-WAN puede mover autom√°ticamente el tr√°fico hacia los caminos de mejor rendimiento y garantizar una buena experiencia para el usuario.\n","permalink":"https://netwithalex.blog/policies-intro-es/","summary":"Aprende las diferencias clave entre las control y data policies en Cisco SD-WAN, cu√°ndo usar cada una y c√≥mo impactan en el enrutamiento y el reenv√≠o del tr√°fico.","title":"Pol√≠ticas de Control vs Pol√≠tica de Datos en Cisco SD-WAN: Diferencias Clave"},{"content":"Introducci√≥n En esta publicaci√≥n, exploraremos c√≥mo dar los primeros pasos con la automatizaci√≥n en SD-WAN. Ya sea que est√©s comenzando con los scripts o apenas empieces a descubrir lo que es posible hacer con la API de SD-WAN, esta gu√≠a te ayudar√° a empezar. Cubriremos conceptos clave, ejemplos pr√°cticos y las herramientas que necesitas para automatizar tareas y simplificar tus operaciones de red.\n¬øPor qu√© deber√≠as automatizar? Hay muchos casos donde la automatizaci√≥n puede aportar beneficios significativos. Ya sea para aplicar cambios m√°s r√°pido, minimizar riesgos, ahorrar tiempo, construir herramientas personalizadas o integrar con sistemas de terceros ‚Äî la automatizaci√≥n abre la puerta a una gesti√≥n de red m√°s simple y eficiente.\nAqu√≠ algunos casos de uso comunes:\nDespliegue de dispositivos ‚Äì Automatiza el proceso de despliegue de VMs y su configuraci√≥n inicial usando plantillas predefinidas. Gesti√≥n de configuraciones ‚Äì Aplica configuraciones mediante la API en segundos, en lugar de iniciar sesi√≥n manualmente en cada dispositivo. Monitoreo y alertas ‚Äì Recibe alertas cuando ocurran eventos espec√≠ficos en la red y crea scripts para monitorear exactamente lo que necesitas. Integraci√≥n con otros sistemas ‚Äì Enriquece plataformas de Cisco o externas con informaci√≥n compartida directamente desde el SD-WAN Manager. Verificaciones de salud ‚Äì Verifica de forma continua que tu red est√© funcionando correctamente y bajo el estado deseado. Ampliaci√≥n de capacidades ‚Äì Experimenta con nuevas tecnolog√≠as y explora c√≥mo integrarlas a tus tareas diarias. APIs REST de SD-WAN Manager En el centro de la automatizaci√≥n est√°n las APIs REST (Interfaz de Programaci√≥n de Aplicaciones basada en Transferencia de Estado Representacional), que permiten que los sistemas se comuniquen entre s√≠ a trav√©s de HTTP ‚Äî el mismo protocolo que usa tu navegador para cargar p√°ginas web.\nLa API REST del SD-WAN Manager te permite interactuar program√°ticamente con tu controlador SD-WAN. En lugar de hacer clic en la interfaz gr√°fica, puedes enviar solicitudes HTTP para:\nGET obtener informaci√≥n (por ejemplo, listar dispositivos, obtener estad√≠sticas de salud) POST crear nuevas configuraciones PUT actualizar objetos existentes DELETE eliminar configuraciones que ya no necesitas Cada solicitud se dirige a una URL espec√≠fica e incluye encabezados, autenticaci√≥n y datos.\nPuedes encontrar la documentaci√≥n de los endpoints de Cisco aqu√≠.\nTambi√©n puedes acceder a la documentaci√≥n de la API dentro del producto en:\nhttps://vmanage-ip:port/apidocs\nC√≥digos de estado HTTP Los c√≥digos de estado HTTP te indican el resultado de tu solicitud a la API. Aqu√≠ est√°n los m√°s comunes:\n200 OK ‚Äì La solicitud fue exitosa. 301 Moved Permanently ‚Äì El recurso tiene una nueva URL. 400 Bad Request ‚Äì La solicitud est√° mal formada. 401 Unauthorized ‚Äì Necesitas iniciar sesi√≥n. 403 Forbidden ‚Äì No tienes permiso para acceder a este recurso. 404 Not Found ‚Äì El recurso solicitado no existe. 500 Internal Server Error ‚Äì Algo fall√≥ en el servidor. 503 Service Unavailable ‚Äì El servidor est√° sobrecargado o fuera de servicio temporalmente. Esperamos recibir un 200 OK al realizar llamadas a la API.\nAutenticaci√≥n Generar una ID de sesi√≥n (cookie) Antes de interactuar con la API del SD-WAN Manager, necesitas autenticarte ‚Äî tal como lo har√≠as al iniciar sesi√≥n en la interfaz gr√°fica. Para ello, se debe usar el siguiente endpoint:\nPOST https://{vmanage-ip-address}/j_security_check Content-Type: application/x-www-form-urlencoded HTTP Body: \u0026#34;j_username={admin}\u0026amp;j_password={credential}\u0026#34; Se trata de una operaci√≥n POST, que requiere el encabezado Content-Type: application/x-www-form-urlencoded y espera un cuerpo con el siguiente formato:\nj_username={admin}\u0026amp;j_password={credential}.\nVamos a probarlo con curl. Ten en cuenta que cuando usamos la opci√≥n \u0026ndash;data, curl entiende que debe usar el m√©todo POST.\nalex ~ % curl -v -k --location \u0026#39;https://10.1.1.1:443/j_security_check\u0026#39; \\ --header \u0026#39;Content-Type: application/x-www-form-urlencoded\u0026#39; \\ --data-urlencode \u0026#39;j_username=netwithalex\u0026#39; \\ --data-urlencode \u0026#39;j_password=netwithalex\u0026#39; * Trying 10.1.1.1:443... * Connected to 10.1.1.1 (10.1.1.1) port 443 ... * using HTTP/1.x \u0026gt; POST /j_security_check HTTP/1.1 \u0026gt; Host: 10.1.1.1 \u0026gt; User-Agent: curl/8.7.1 \u0026gt; Accept: */* \u0026gt; Content-Type: application/x-www-form-urlencoded ... * upload completely sent off: 45 bytes \u0026lt; HTTP/1.1 200 OK \u0026lt; set-cookie: JSESSIONID=dEzBwsDlx-eMKye1xbXBgT7NZVfXRe1tJQZvkMLH.b387d75e92857dc1e41025f809f43b054a0d0aa8ebf50be8d2fc1aa2f87c90da; path=/; secure; HttpOnly ... \u0026lt; * Connection #0 to host 10.1.1.1 left intact Debemos guardar el valor de set-cookie\nJSESSIONID=dEzBwsDlx-eMKye1xbXBgT7NZVfXRe1tJQZvkMLH\ny utilizarlo a continuaci√≥n para generar un token.\nObtener un token Un token XSRF (tambi√©n llamado CSRF o Cross-Site Request Forgery token) es una medida de seguridad que ayuda a proteger una aplicaci√≥n web contra acciones no autorizadas realizadas por atacantes.\nSe utiliza el siguiente endpoint para obtener un token:\nGET https://{vmanage-ip-address}/dataservice/client/token Content-Type: application/json HTTP Header: \u0026#34;Cookie: JESSIONID={session hash id}\u0026#34; Este token es requerido principalmente para operaciones POST, si est√°s realizando operaciones GET probablemente no lo necesitar√°s. Ten esto en cuenta al construir scripts que requieran acciones POST.\nalex ~ % curl -v -k --location \u0026#39;https://10.1.1.1:443/dataservice/client/token\u0026#39; \\ --header \u0026#39;Content-Type: application/json\u0026#39; \\ --header \u0026#39;Cookie: JSESSIONID=dEzBwsDlx-eMKye1xbXBgT7NZVfXRe1tJQZvkMLH.b387d75e92857dc1e41025f809f43b054a0d0aa8ebf50be8d2fc1aa2f87c90da\u0026#39; * Trying 10.1.1.1:443... * Connected to 10.1.1.1 (10.1.1.1) port 443 ... * using HTTP/1.x \u0026gt; GET /dataservice/client/token HTTP/1.1 \u0026gt; Host: 10.1.1.1 \u0026gt; Accept: */* \u0026gt; Content-Type: application/json \u0026gt; Cookie: JSESSIONID=dEzBwsDlx-eMKye1xbXBgT7NZVfXRe1tJQZvkMLH.b387d75e92857dc1e41025f809f43b054a0d0aa8ebf50be8d2fc1aa2f87c90da \u0026lt; HTTP/1.1 200 OK ... \u0026lt; vary: Accept-Encoding \u0026lt; content-type: application/json; charset=UTF-8 \u0026gt; * Connection #0 to host 10.1.1.1 left intact F1FE79CE079240E12A393B73F0EB5445F31BC456322F634EDEF8A9A7D5856A6FC7763D2C80D2253118917910502F20A9A1CA% El token se muestra al final:\nF1FE79CE079240E12A393B73F0EB5445F31BC456322F634EDEF8A9A7D5856A6FC7763D2C80D2253118917910502F20A9A1CA\nCon esto, est√°s listo para interactuar con el SD-WAN Manager\nEjemplos GET - Obtener la configuraci√≥n de un dispositivo Vamos a obtener la configuraci√≥n de un dispositivo con la siguiente llamada\nGET https://{{vmanage-ip}}:{{port}}/dataservice/template/config/running/{deviceId} Content-Type: application/json En este caso,e el deviceId es el chassis number, se puede encontrar en la UI:\nalex ~ % curl -k -v --location \u0026#39;https://10.1.1.1:8443/dataservice/template/config/running/C8K-C0302D69-35A9-4E85-8909-2031A2165FE8\u0026#39; \\ --header \u0026#39;Content-Type: application/json\u0026#39; \\ --header \u0026#39;Cookie: JSESSIONID=dEzBwsDlx-eMKye1xbXBgT7NZVfXRe1tJQZvkMLH.b387d75e92857dc1e41025f809f43b054a0d0aa8ebf50be8d2fc1aa2f87c90da\u0026#39; * Trying 10.1.1.1:8443... * Connected to 10.1.1.1 (10.1.1.1) port 8443 ... * using HTTP/1.x \u0026gt; GET /dataservice/template/config/running/C8K-C0302D69-35A9-4E85-8909-2031A2165FE8 HTTP/1.1 \u0026gt; Host: 10.1.1.1:8443 \u0026gt; User-Agent: curl/8.7.1 \u0026gt; Accept: */* \u0026gt; Content-Type: application/json \u0026gt; Cookie: JSESSIONID=dEzBwsDlx-eMKye1xbXBgT7NZVfXRe1tJQZvkMLH.b387d75e92857dc1e41025f809f43b054a0d0aa8ebf50be8d2fc1aa2f87c90da \u0026gt; ... \u0026lt; vary: Accept-Encoding \u0026lt; content-type: application/json; charset=UTF-8 \u0026lt; server: svcproxy \u0026lt; transfer-encoding: chunked \u0026lt; {\u0026#34;config\u0026#34;:\u0026#34; system\\n system-ip 1.1.200.1\\n overlay-id 1\\n site-id 200\\n no transport-gateway enable\\n port-offset 0\\n control-session-pps 300\\n admin-tech-on-failure\\n sp-organization-name MYSDWAN-LAB123\\n organization-name MYSDWAN-LAB123\\n port-hop\\n track-transport\\n track-default-gateway\\n upgrade-confirm...} La configuraci√≥n se regresa dentro de las {}\nPOST - Crear un nuevo usuario Vamos a hacer una operaci√≥n POST sencilla para ver c√≥mo debemos pasar el token.\nUsaremos el siguiente endpoint\nPOST https://{{vmanage-ip}}:{{port}}/dataservice/admin/user Headers: \u0026#34;Content-Type: application/json\u0026#34;, \u0026#34;accept: */*\u0026#34; Payload = { \u0026#34;group\u0026#34;:[ \u0026#34;operator\u0026#34; ], \u0026#34;description\u0026#34;:\u0026#34;Demo User\u0026#34;, \u0026#34;userName\u0026#34;:\u0026#34;apiUser\u0026#34;, \u0026#34;password\u0026#34;:\u0026#34;apiuser\u0026#34;, } Necesitamos especificar el grupo, la descripci√≥n, el nombre de usuario y la contrase√±a.\nHag√°moslo con curl\nalex ~ % curl -v -k --location \u0026#39;https://10.1.1.1:8443/dataservice/admin/user\u0026#39; \\ --header \u0026#39;Content-Type: application/json\u0026#39; \\ --header \u0026#39;X-XSRF-TOKEN: F1FE79CE079240E12A393B73F0EB5445F31BC456322F634EDEF8A9A7D5856A6FC7763D2C80D2253118917910502F20A9A1CA\u0026#39; \\ --header \u0026#39;Cookie: JSESSIONID=dEzBwsDlx-eMKye1xbXBgT7NZVfXRe1tJQZvkMLH.b387d75e92857dc1e41025f809f43b054a0d0aa8ebf50be8d2fc1aa2f87c90da\u0026#39; \\ --data \u0026#39;{ \u0026#34;group\u0026#34;:[ \u0026#34;operator\u0026#34; ], \u0026#34;description\u0026#34;:\u0026#34;API User\u0026#34;, \u0026#34;userName\u0026#34;:\u0026#34;apiuser\u0026#34;, \u0026#34;password\u0026#34;:\u0026#34;apiuser\u0026#34; }\u0026#39; * Trying 10.1.1.1:8443... * Connected to 10.1.1.1 (10.1.1.1) port 8443 ... \u0026gt; POST /dataservice/admin/user HTTP/1.1 \u0026gt; Host: 10.1.1.1:8443 \u0026gt; User-Agent: curl/8.7.1 \u0026gt; Accept: */* \u0026gt; Content-Type: application/json \u0026gt; X-XSRF-TOKEN: F1FE79CE079240E12A393B73F0EB5445F31BC456322F634EDEF8A9A7D5856A6FC7763D2C80D2253118917910502F20A9A1CA \u0026gt; Cookie: JSESSIONID=dEzBwsDlx-eMKye1xbXBgT7NZVfXRe1tJQZvkMLH.b387d75e92857dc1e41025f809f43b054a0d0aa8ebf50be8d2fc1aa2f87c90da \u0026gt; Content-Length: 117 \u0026gt; ... * upload completely sent off: 117 bytes \u0026lt; HTTP/1.1 200 OK ... \u0026lt; vary: Accept-Encoding \u0026lt; vmanagerequestid: 45dc1c76-8a00-48e4-80f0-fe9b2f2a894b \u0026lt; x-content-type-options: nosniff \u0026lt; strict-transport-security: max-age=31536000; includeSubDomains \u0026lt; permissions-policy: geolocation=(self), microphone=(), camera=(), fullscreen=(self) \u0026lt; content-type: application/octet-stream; charset=UTF-8 \u0026lt; server: svcproxy \u0026lt; transfer-encoding: chunked \u0026lt; * Connection #0 to host 10.1.1.1 left intact {}% Recibimos un HTTP 200 y una respuesta vac√≠a {}, lo que indica que el usuario fue creado correctamente. Vamos a verificar en la interfaz gr√°fica (UI).\nEl usuario apiuser se cre√≥ correctamente!\nConclusi√≥n En este post, cubrimos los conceptos b√°sicos que necesitas para comenzar a trabajar con las REST APIs del SD-WAN Manager ‚Äî desde entender los c√≥digos de estado HTTP hasta recuperar configuraciones y crear usuarios. Los ejemplos usaron curl intencionalmente para que puedas ver la estructura de las solicitudes, entender los encabezados y aprender c√≥mo trabajar con cookies y el token XSRF.\nEn la siguiente parte, traduciremos estos conceptos a Python y comenzaremos a automatizar tareas del mundo real paso a paso.\n","permalink":"https://netwithalex.blog/automation-intro-es/","summary":"Aprende los fundamentos de la automatizaci√≥n en SD-WAN y c√≥mo comenzar a usar scripts y APIs para optimizar tus operaciones de red.","title":"Primeros pasos con la automatizaci√≥n en SD-WAN"},{"content":"Introducci√≥n En mi post anterior habl√© sobre FEC, una t√©cnica para combatir la p√©rdida de paquetes enviando un paquete de paridad que permite reconstruir los datos perdidos. En esta publicaci√≥n, exploraremos otra potente funcionalidad de SD-WAN dise√±ada para enfrentar transportes con p√©rdida: Packet Duplication. Aunque ambas funciones buscan mejorar la confiabilidad, lo hacen de formas muy diferentes.\nVamos a verlo:\n¬øQu√© es Packet Duplication? Como su nombre indica, Packet Duplication consiste en enviar paquetes id√©nticos a trav√©s de m√∫ltiples rutas de transporte para aumentar la probabilidad de entrega exitosa. Si una ruta experimenta p√©rdida transitoria o es inherentemente inestable, el paquete duplicado enviado por un segundo transporte m√°s confiable puede compensarlo, manteniendo la experiencia del usuario sin interrupciones.\nVisualmente:\nEl emisor utiliza ambos transportes, bronze y gold, para enviar la informaci√≥n duplicada. La ruta bronze sufre p√©rdida de paquetes, mientras que la ruta gold entrega todos los paquetes con √©xito. El receptor descarta los duplicados y reenv√≠a solo la copia que llega primero al destino, eliminando efectivamente la p√©rdida desde la perspectiva del usuario, sin importar qu√© ruta tom√≥ el paquete.\nAntes de duplicar un paquete, el WAN Edge compara su tama√±o con el Path Maximum Transmission Unit (PMUT), si la longitud del paquete es menor que el PMUT, este se duplica.\nNota: A partir de la versi√≥n 17.15.1a, los paquetes pueden duplicarse incluso si su tama√±o es mayor al PMUT, utilizando VRF and Underlay Fragmentation.\nDesde la versi√≥n 16.12.1b esta funcionalidad aplica para:\nTr√°fico IPv4 sobre t√∫neles IPv4. Y a partir de la 17.15.1a se ampl√≠a el soporte a:\nTr√°fico IPv4 sobre t√∫neles IPv6 Tr√°fico IPv6 sobre t√∫neles IPv4 Tr√°fico IPv6 sobre t√∫neles IPv6 Consideraciones Aqu√≠ algunos puntos clave a tener en cuenta al habilitar Packet Duplication:\nPara que funcione, debe haber al menos dos transportes disponibles; no es una soluci√≥n viable para sitios con un solo transporte. La cantidad de tr√°fico se duplica, tenlo en cuenta seg√∫n la capacidad de tus transportes. El receptor necesita almacenar en b√∫fer y descartar paquetes, lo que a√±ade carga de procesamiento. Debe habilitarse solo para tr√°fico cr√≠tico, considerando los puntos anteriores. Configuraci√≥n Utilizando Policy Groups, podemos configurar Packet Duplication mediante una data policy que haga match con el tr√°fico deseado y aplique la acci√≥n Loss Correction seleccionando Packet Duplication.\nEsta configuraci√≥n debe aplicarse en ambas direcciones, por lo que la pol√≠tica completa se ve as√≠:\ndata-policy data_service_Packet-Duplication vpn-list vpn_Corporate_Users sequence 1 match source-ip 172.16.100.0/24 destination-ip 172.16.10.0/24 ! action accept loss-protect pkt-dup loss-protection packet-duplication ! ! sequence 11 match source-ip 172.16.10.0/24 destination-ip 172.16.100.0/24 ! action accept loss-protect pkt-dup loss-protection packet-duplication ! ! default-action accept ! ! ! apply-policy site-list site_10_100 data-policy data_service_Packet-Duplication from-service ! ! Nota: Packet Duplication no es compatible con las siguientes acciones dentro de una data policy:\nlocal tloc remote_tloc Puedes consultar la gu√≠a de configuraci√≥n para m√°s informaci√≥n sobre restricciones y casos de uso.\nVerificaci√≥n Para asegurar que Packet Duplication est√° funcionando, hay algunas validaciones que podemos hacer.\nDesde el dispositivo se puede ejecutar:\nLisbon_10-1#show sdwan tunnel statistics pkt-dup Generating output, this might take time, please wait ... tunnel stats gre 21.11.0.2 21.101.0.2 0 0 pktdup-rx 4844 pktdup-rx-other 1 pktdup-rx-this 4844 pktdup-tx 8710 pktdup-tx-other 4693 pktdup-capable true tunnel stats gre 31.11.0.2 31.101.0.2 0 0 pktdup-rx 1 pktdup-rx-other 4844 pktdup-rx-this 1 pktdup-tx 4693 pktdup-tx-other 8710 pktdup-capable true pktdup-rx: paquetes originales recibidos por el t√∫nel primario pktdup-rx-other: paquetes duplicados recibidos por el segundo t√∫nel pktdup-tx: paquetes duplicados enviados por el t√∫nel primario pktdup-tx-other: paquetes duplicados enviados por el t√∫nel secundario pktdup-capable: indica si se realiz√≥ intercambio de capacidades con el otro dispositivo Esta misma informaci√≥n est√° disponible en la secci√≥n de Real Time del Manager:\nAdem√°s, se puede a√±adir un contador a la pol√≠tica para confirmar que la secuencia est√° siendo aplicada.\nProbando Packet Duplication En mi laboratorio tengo dos t√∫neles activos entre los dispositivos SD-WAN: uno sobre MPLS y otro sobre Biz-Internet.\nPara probar Packet Duplication, introducir√© p√©rdida de paquetes en el transporte MPLS y ejecutar√© una prueba b√°sica de iperf entre dos clientes para observar c√≥mo se comporta.\nEl comando de prueba utilizado fue:\niperf3 -c 172.16.100.11 -u -b 1M -t 20 \u0026ndash;dscp ef\nEste comando inicia una prueba UDP de 20 segundos, con un ancho de banda de 1 Mbps y marcado DSCP EF.\nNota: No me enfoco en el porcentaje exacto de p√©rdida en MPLS. La idea no es medir cu√°nto puede recuperar Packet Duplication, sino observar c√≥mo act√∫a la funcionalidad. En teor√≠a, incluso con una p√©rdida del 100% en un transporte, el tr√°fico deber√≠a llegar por el otro, siempre y cuando Packet Duplication est√© correctamente configurado.\nEl emisor utiliza biz-internet como transporte primario:\nLisbon_10-1#show sdwan policy service-path vpn 10 interface gigabitEthernet 2 source-ip 172.16.10.11 dest-ip 172.16.100.11 protocol 17 dscp 46 all Number of possible next hops: 1 Next Hop: GRE Source: 31.11.0.2 Destination: 31.101.0.2 Local Color: biz-internet Remote Color: biz-internet Remote System IP: 1.1.100.1 MPLS tiene un 80% de p√©rdida y los resultados de iperf fueron los siguientes:\n[ ID] Interval Transfer Bitrate Jitter Lost/Total Datagrams [ 5] 0.00-20.00 sec 2.38 MBytes 1.00 Mbits/sec 0.000 ms 0/4188 (0%) emisor [ 5] 0.00-20.04 sec 2.38 MBytes 998 Kbits/sec 0.255 ms 0/4188 (0.0%) receiver Vamos a revisar las estad√≠sticas de Packet Duplication tanto en el emisor como en el receptor:\nEmisor\nLisbon_10-1#show sdwan tunnel statistics pkt-dup Generating output, this might take time, please wait ... tunnel stats gre 21.11.0.2 21.101.0.2 0 0 pktdup-rx 14 pktdup-rx-other 0 pktdup-rx-this 14 pktdup-tx 0 pktdup-tx-other 4206 pktdup-capable true tunnel stats gre 31.11.0.2 31.101.0.2 0 0 pktdup-rx 0 pktdup-rx-other 14 pktdup-rx-this 0 pktdup-tx 4206 pktdup-tx-other 0 pktdup-capable true Observa lo siguiente:\nRol Paquetes enviados primario Paquetes duplicados secundario Emisor 4206 4206 Se transmiti√≥ exactamente la misma cantidad de paquetes por los transportes MPLS y Biz-Internet.\nReceptor\nMunich_DC100-1#show sdwan tunnel statistics pkt-dup Generating output, this might take time, please wait ... tunnel stats gre 21.101.0.2 21.11.0.2 0 0 pktdup-rx 0 pktdup-rx-other 758 pktdup-rx-this 0 pktdup-tx 14 pktdup-tx-other 0 pktdup-capable true tunnel stats gre 31.101.0.2 31.11.0.2 0 0 pktdup-rx 4206 pktdup-rx-other 0 pktdup-rx-this 758 pktdup-tx 0 pktdup-tx-other 14 pktdup-capable true Rol Paquetes recibidos primario Paquetes recibidos secundario Receptor 4206 758 Como el transporte secundario experimentaba una p√©rdida severa, solo el 18% de los paquetes fueron recibidos por √©l. Sin embargo, esto no represent√≥ un problema ya que el transporte primario entreg√≥ el 100% de los paquetes.\nSi el escenario se invirtiera, es decir, si la ruta primaria sufriera p√©rdida y la secundaria permaneciera estable, los roles simplemente se intercambiar√≠an. El primario entregar√≠a el 18% y el secundario el 100%, y nuevamente, el usuario final no experimentar√≠a ninguna p√©rdida de paquetes.\nConclusi√≥n Packet Duplication es una funcionalidad simple pero poderosa en Cisco SD-WAN que mejora significativamente la confiabilidad del tr√°fico. Al enviar paquetes id√©nticos por m√∫ltiples rutas de transporte, garantiza que, incluso si una ruta falla, el rendimiento de la aplicaci√≥n no se vea afectado.\nAunque conlleva un mayor uso de ancho de banda y procesamiento adicional, puede marcar una gran diferencia para tr√°fico cr√≠tico como voz, video o sesiones remotas, especialmente en entornos con circuitos poco confiables.\nComo con cualquier funcionalidad de SD-WAN, la clave es usarla de manera estrat√©gica: activarla para el tr√°fico correcto, monitorear los resultados y ajustar las pol√≠ticas seg√∫n el comportamiento de tu red. ¬øHas utilizado Packet Duplication en producci√≥n? Cu√©ntame tu experiencia en los comentarios o con√©ctate conmigo en LinkedIn para conversar sobre temas avanzados de SD-WAN.\n","permalink":"https://netwithalex.blog/appqoe-pkt-dup-es/","summary":"Descubre c√≥mo packet duplication utiliza m√∫ltiples transportes para minimizar el riesgo de p√©rdida de paquetes sobre transportes inestables, manteniendo la calidad de las aplicaciones m√°s importantes para cumplir con los objetivos del negocio.","title":"Serie AppQoe: Packet Duplication"},{"content":"Introducci√≥n Ofrecer un rendimiento de aplicaci√≥n consistente sobre enlaces congestionados o poco confiables es un desaf√≠o constante para la mayor√≠a de las redes. Incluso con funciones avanzadas como Enhanced Application-Aware Routing u Optimizaci√≥n TCP, hay condiciones en los enlaces que van m√°s all√° de lo que el failover, el balanceo de carga o la optimizaci√≥n pueden resolver.\nAl agregar un mecanismo de recuperaci√≥n a nivel de paquete, FEC permite que Cisco SD-WAN enmascare la p√©rdida de paquetes y mantenga el rendimiento de las aplicaciones sin depender de retransmisiones.\nEn este post, exploraremos qu√© tan efectivo puede ser FEC en un entorno SD-WAN, simulando condiciones con p√©rdida de paquetes y midiendo las tasas de recuperaci√≥n.\nSi est√°s evaluando FEC para tu despliegue o simplemente tienes curiosidad sobre c√≥mo funciona, este art√≠culo te llevar√° por la teor√≠a y la pr√°ctica.\nVamos all√°!\nQu√© es Forward Error Correction (FEC)? Forward Error Correction (FEC) es una t√©cnica que mejora la confiabilidad de la transmisi√≥n de datos a√±adiendo informaci√≥n redundante a los paquetes antes de enviarlos por la red. En lugar de esperar retransmisiones cuando se pierden paquetes, el receptor utiliza esa redundancia para reconstruir los datos faltantes en tiempo real.\nEn la implementaci√≥n de Cisco SD-WAN, FEC agrupa 4 paquetes de datos y agrega 1 paquete de paridad. Si uno de esos 4 paquetes se pierde en el camino, el receptor puede reconstruirlo utilizando el paquete de paridad mediante una operaci√≥n XOR.\nVe√°moslo en un diagrama:\nEl remitente transmite la informaci√≥n al receptor, pero el paquete 3 se pierde en tr√°nsito. El receptor puede usar el paquete de paridad para reconstruir el paquete 3 y as√≠ evitar retransmisiones y retrasos que afectar√≠an la experiencia de las aplicaciones.\nEs importante notar que si se pierden m√°s de 1 paquete, incluyendo el de paridad, no es posible reconstruir la informaci√≥n. El tama√±o del bloque es siempre de 4 paquetes de datos + 1 de paridad y no puede modificarse. Un bloque puede contener paquetes de diferentes flujos.\nNota El hecho de que FEC agregue 1 paquete de paridad por cada bloque de 4 incrementa el consumo de ancho de banda.\nHay dos modos de operaci√≥n:\nAlways: Se aplica FEC a todo el tr√°fico que haga match a la pol√≠tica, sin importar la cantidad de p√©rdida de paquetes en el transporte. Adaptive: Permite definir un threshold de p√©rdida de paquetes antes de empezar a aplicar FEC. Por ejemplo, si hay 2% o m√°s p√©rdida de paquetes, se debe aplicar FEC al tr√°fico. El porcentaje de p√©rdida de paquetes se saca con los paquetes BFD. FEC es especialmente √∫til en aplicaciones en tiempo real como voz, video o sesiones interactivas, donde esperar retransmisiones provocar√≠a retrasos severos.\nUn punto importante es que FEC opera entre los dispositivos edge de SD-WAN, lo que lo hace completamente transparente para las aplicaciones: no es necesario modificar el comportamiento de clientes o servidores. Sin embargo, solo funciona cuando se utiliza encapsulaci√≥n IPSec; no est√° soportado sobre t√∫neles GRE.\nUn detalle cr√≠tico de implementaci√≥n es el tama√±o de los paquetes: si los paquetes son demasiado grandes y terminan siendo fragmentados, la capacidad de FEC para reconstruirlos se reduce considerablemente. Para aprovechar al m√°ximo FEC, aseg√∫rate de que el payload se mantenga por debajo del MTU del path MTU para evitar la fragmentaci√≥n.\nConfiguraci√≥n Utilizando Policy Groups, podemos configurar FEC a trav√©s de pol√≠tica de datos que hagan match al tr√°fico y apliquen la acci√≥n Loss Correction\nEn mi caso, hice match a a todo el tr√°fico entre 172.16.10.0/24 y 172.16.100.0/24. Nota que se tienen los dos modos de operaci√≥n: Always y Adaptive\nSi se selecciona FEC Adaptive, el threshold tiene que estar entre 1% y 5% p√©rdida de paquetes.\nEst√° es la configuraci√≥n completa de mi pol√≠tica:\nvsmart_1# show running-config policy policy data-policy data_all_FEC vpn-list vpn_Corporate_Users sequence 1 match source-ip 172.16.100.0/24 destination-ip 172.16.10.0/24 ! action accept loss-protect fec-always loss-protection forward-error-correction always ! ! sequence 11 match source-ip 172.16.10.0/24 destination-ip 172.16.100.0/24 ! action accept loss-protect fec-always loss-protection forward-error-correction always ! ! default-action accept ! ! lists vpn-list vpn_Corporate_Users vpn 10 ! site-list site_10_100 site-id 10 site-id 100 ! ! apply-policy site-list site_10_100 data-policy data_all_FEC from-service ! ! ! Verificaci√≥n de FEC No hay muchos comandos relacionados a FEC, pero podemos confirmar que FEC est√° operando con el siguiente comando:\nMunich_DC100-1#show sdwan tunnel statistics fec tunnel stats ipsec 21.101.0.2 21.11.0.2 12346 12346 fec-rx-data-pkts 16243 fec-rx-parity-pkts 4075 fec-tx-data-pkts 7 fec-tx-parity-pkts 1 fec-reconstruct-pkts 935 fec-capable true fec-dynamic false El fec-reconstruct-pkts indica que se recuperaron 935 paquetes\nNota tambi√©n que podemos f√°cilmente ver la cantidad de paquetes de paridad que se enviaron y recibieron siendo aproximadamente 1/4 del total de paquetes de datos enviados/recibidos.\nLa misma informaci√≥n est√° tambi√©n disponible a trav√©s de la interfaz gr√°fica del Manager, en la opci√≥n de real time\nProbando FEC Vamos a realizar algunas pruebas para ver FEC en acci√≥n y analizar la cantidad de p√©rdida de paquetes que puede recuperar. Mostrar√© distintos resultados para entender en qu√© condiciones FEC ofrece mejores beneficios.\nNota existe cierta p√©rdida de paquetes fuera de los routers SD-WAN que no puedo controlar. Por eso, para obtener resultados m√°s precisos, primero tuve que encontrar una tasa de transmisi√≥n con la que obtuviera 0% de p√©rdida la mayor parte del tiempo en mis resultados con iperf3, y a partir de ah√≠ comenc√© a introducir p√©rdida de manera controlada.\niperf -c 172.16.100.11 -u -b 450k -t 30 -l 361 \u0026ndash;dscp ef\nUn ancho de banda de 450 kbps equivale aproximadamente a 5 llamadas VoIP, utilizando un payload de 361 bytes.\nEn este caso, estoy realizando pruebas unidireccionales, pero ten en cuenta que FEC funciona en ambos sentidos.\n% P√©rdida Total Paquetes enviados Total Paquetes recibidos Paquetes recuperados % efectivo de p√©rdida 1 4693 4639 54 0 2 4694 4588 96 0,24 3 4693 4558 111 0,58 4 4694 4524 147 0,51 5 4693 4448 195 0,68 6 4693 4401 231 1,3 7 4693 4374 238 1,8 8 4693 4331 283 1,8 9 4693 4292 297 2,2 10 4693 4215 304 3,8 12 4693 4122 348 3,8 15 4695 3941 382 8 18 4696 3815 356 11 20 4696 3731 368 13 Veamos unas gr√°ficas interesantes:\nA medida que aumenta la p√©rdida de paquetes, tambi√©n crece el n√∫mero de paquetes recuperados, hasta cierto punto. Esto es esperable: FEC agrega redundancia, y cuanto m√°s se pierde, m√°s se necesita recuperar. Sin embargo, esta capacidad tiene un l√≠mite natural: si se pierden dos o m√°s paquetes dentro del mismo bloque FEC ‚Äîincluyendo el paquete de paridad‚Äî la recuperaci√≥n ya no es posible y la p√©rdida efectiva comienza a aumentar.\nTambi√©n es importante destacar que FEC es una funci√≥n utiliza muchos recursos, por lo que se recomienda activarla solo para tr√°fico cr√≠tico y, preferentemente, en combinaci√≥n con un threshold de p√©rdida de paquetes, en lugar de mantenerla activa permanentemente.\nAunque este laboratorio no replica a la perfecci√≥n un entorno de producci√≥n, los resultados son bastante reveladores. FEC logr√≥ recuperar pr√°cticamente todos los paquetes perdidos con hasta un 5% de p√©rdida introducida, y continu√≥ recuperando cerca del 70% de los paquetes a aproximadamente 9% de p√©rdida. A partir de ah√≠, la eficiencia de recuperaci√≥n empieza a disminuir. Dicho esto, no es com√∫n ver p√©rdidas constantes superiores al 10% en enlaces WAN de producci√≥n, y menos a√∫n en ambas direcciones.\nPor √∫ltimo, aunque las pruebas fueron unidireccionales, vale la pena mencionar que FEC puede aplicarse de forma independiente en cada direcci√≥n. Esto significa que, con una implementaci√≥n bien ajustada, se podr√≠a tolerar cerca de un 5% de p√©rdida de paquetes por direcci√≥n sin afectar significativamente el rendimiento.\nConclusion Forward Error Correction (FEC) es una t√©cnica proactiva que agrega redundancia antes de la transmisi√≥n de paquetes, permitiendo que el receptor recupere ciertas p√©rdidas sin necesidad de retransmisiones. Esto la hace especialmente valiosa para aplicaciones en tiempo real como voz o video, donde esperar retransmisiones generar√≠a retrasos perjudiciales.\nRecuerda que habilitar FEC viene con un costo: introduce carga adicional. El edge de SD-WAN que recibe los paquetes necesita usar capacidad de procesamiento adicional para reconstruir los que se perdieron. Por eso, es recomendable activarlo solo para tr√°fico cr√≠tico y, en lo posible, hacerlo condicionado a un threshold de p√©rdida de paquetes.\nFEC no reemplaza la necesidad de corregir enlaces de red defectuosos. M√°s bien, act√∫a como una capa de mitigaci√≥n inteligente que ayuda a suavizar p√©rdidas moderadas o transitorias, manteniendo una experiencia de usuario consistente incluso cuando la red no es perfecta.\nEn resumen, cuando se implementa correctamente, FEC puede ser una herramienta muy poderosa en tu arquitectura SD-WAN, ayudando a garantizar un rendimiento de aplicaciones constante sobre redes imperfectas.\nüí≠ ¬øQu√© opinas sobre el uso de Forward Error Correction en SD-WAN? ¬øLo has utilizado antes? ¬øTienes dudas sobre c√≥mo funciona o cu√°ndo activarlo?\nD√©jame tus comentarios, preguntas o experiencias. Me encantar√≠a saber c√≥mo est√°n abordando esta funci√≥n en sus despliegues reales. ¬°Aprendamos entre todos!\n","permalink":"https://netwithalex.blog/appqoe-fec-es/","summary":"Aprende c√≥mo funciona Forward Error Correction (FEC) en Cisco SD-WAN para mejorar el rendimiento de las aplicaciones en enlaces con p√©rdida de paquetes. Explora casos de uso, configuraci√≥n y resultados de pruebas.","title":"Serie AppQoe: Forward Error Correction (FEC)"},{"content":"Introducci√≥n Cuando implementas un nuevo sitio remoto, quieres que el proceso sea lo m√°s sencillo posible. No quieres enviar el dispositivo a una ubicaci√≥n intermedia solo para precargarle una configuraci√≥n, y luego volver a enviarlo a su destino final. Tampoco quieres tener que viajar al sitio, conectar un cable de consola y configurar manualmente cada dispositivo. Ahora imagina multiplicar ese esfuerzo por docenas o cientos de sitios ü§Ø.\nPara resolver este desaf√≠o, Cisco cre√≥ un proceso de incorporaci√≥n automatizado llamado Plug and Play (PnP) o Zero Touch Provisioning (ZTP). La idea es simple: un router se enciende, obtiene una direcci√≥n IP, localiza su overlay de SD-WAN, se conecta a los controladores y descarga su configuraci√≥n‚Äîtodo esto sin intervenci√≥n humana m√°s all√° de conectarlo a la corriente y la red.\nUn paso clave en este proceso es ayudar al router a descubrir el overlay de SD-WAN. Esto se puede lograr a trav√©s de la nube de Cisco o, en entornos aislados (air-gapped), alojando tu propio servidor ZTP On-Prem. Hoy vamos a explorar esta segunda opci√≥n.\nFuncionalidad PnP/ZTP El proceso en la imagen describe lo que hace un router SD-WAN al iniciar sin configuraci√≥n:\nNota este proceso est√° disponible √∫nicamente en plataformas f√≠sicas.\nEl dominio ZTP est√° definido en el servidor DHCP, por ejemplo, si el nombre de dominio es cisco.com, el router intentar√° resolver ztp.cisco.com. Para m√°s informaci√≥n puedes consultar la siguiente documentaci√≥n de Cisco\nConfiguraci√≥n Necesitamos completar las siguientes tareas para utilizar ZTP on prem\nAgregar y configurar el servidor ZTP Cargar la lista de equipo al servidor ZTP Preparar la configuraci√≥n del equipo en el Manager Configurar un servidor DHCP y DNS Lanzar el proceso de PnP Agregar y configurar el servidor ZTP El servidor ZTP utiliza la misma imagen que un Validator regular. Sigue el proceso habitual para levantar una nueva m√°quina virtual con conectividad hacia el Manager.\nLa siguiente es la configuraci√≥n m√≠nima necesaria:\nvbond# show run system system host-name ztp-server system-ip 10.10.10.194 site-id 5 sp-organization-name SDWAN-LAB123 organization-name SDWAN-LAB123 vbond 192.168.200.2 local ztp-server vpn 0 interface eth0 ip dhcp-client ipv6 dhcp-client no shutdown ! interface ge0/0 ip address 192.168.200.3/24 no shutdown ! ip route 0.0.0.0/0 192.168.200.253 ! Nota el sufijo ztp-server, esto indicar√° al dispositivo que actuar√° como servidor ZTP.\nDesde el Manager, agrega el servidor ZTP a la lista de Controladores:\nDependiendo del m√©todo de autenticaci√≥n del Controlador, genera y firma el CSR.\nSi est√°s utilizando certificados Enterprise, necesitar√°s instalar el certificado ra√≠z y el certificado firmado.\nPor ejemplo:\nztp-server# request root-cert-chain install home/admin/root-ca.crt ztp-server# request certificate install home/admin/ztp.crt Nota: El servidor ZTP no tiene ninguna conexi√≥n de control con el Manager ni con ning√∫n otro controlador.\nCargar la lista de equipo al servidor ZTP Ahora que el servidor ZTP est√° instalado, es necesario cargar la lista de equipo que se conectar√°n a √©l.\nLa manera m√°s sencilla es obtener el archivo serialFile.viptela desde el portal PnP y copiarlo localmente en el equipo.\nztp-server:~$ ls -l | grep serial -rw-r--r-- 1 admin admin 2364 Apr 24 21:41 serialFile.viptela Luego es necesario ejecutar el siguiente comando\nztp-server# request device-upload chassis-file home/admin/serialFile.viptela Uploading chassis numbers via VPN 0 Copying ... /home/admin/serialFile.viptela via VPN 0 file: /tmp/tmp.CbUWf8GnSN/viptela_serial_file PnP Verifying public key received from PnP against production root cert is_public_key_ok against production root ca: OK Signature verified for viptela_serial_file final file: /tmp/tmp.CbUWf8GnSN/viptela_serial_file Signature verification Suceeded. Success: Serial file is /tmp/tmp.CbUWf8GnSN/viptela_serial_file INFO: Input File specified was \u0026#39;/usr/share/viptela/chassis_numbers.tmp\u0026#39; INFO: # of complete chassis entries written: 12 Json to CSV conversion succeeded! Successfully loaded the chassis numbers file to the database. Para verificar que la lista se carg√≥ correctamente\nztp-server# show ztp entries ROOT VBOND ORGANIZATION CERT INDEX CHASSIS NUMBER SERIAL NUMBER VALIDITY VBOND IP PORT NAME PATH ----------------------------------------------------------------------------------------------------------------------------------------------------------- ... 23 ASR1001-HX-XXXXXXXXXXX XXXXXXXX valid 192.168.200.1 12346 SDWAN-LAB123 default Preparar la configuraci√≥n del equipo en el Manager Para logar esto, utilizar√© un Configuration Group, pero se puede logar con Templates igualmente\nCreo la configuraci√≥n y la env√≠o al equipo. Como est√° offline, la tarea queda como \u0026ldquo;Scheduled\u0026rdquo;\nConfigurar un servidor DHCP y DNS Para hacerlo sencillo, configuro un switch intermedio como servidor DHCP y DNS con la siguiente configuraci√≥n:\nip dhcp pool ASR vrf MPLS network 192.168.11.4 255.255.255.252 default-router 192.168.11.6 dns-server 192.168.11.6 domain-name cisco.com ip host vrf MPLS ztp.cisco.com 192.168.200.3 ip host vrf MPLS devicehelper.cisco.com 192.168.200.3 Ok, estamos listos para lanzar el proceso PnP\nLanzar el proceso de PnP Para activar el proceso de PnP, el dispositivo debe tener una configuraci√≥n en blanco. Voy a usar el siguiente comando para restablecer la configuraci√≥n y activar el proceso.\nRouter#request platform software sdwan config reset %WARNING: Bootstrap file doesn\u0026#39;t exist and absence of it can cause loss of connectivity to the controller. For saving bootstrap config, use: request platform software sdwan bootstrap-config save Proceed to reset anyway? [confirm] Backup of running config is saved under /bootflash/sdwan/backup.cfg Config reset requested from a console session. Waiting for up to 60 seconds for IOS to initiate reload or report failure. IOS return status: \u0026#34;cfgreset_proceed\u0026#34; Config reset is raised successfully, device will reload shortly. Para ver los siguientes logs es necesario acceso por consola:\nEl equipo arranca y comienza el proceso de PnP\n*May 4 04:18:42.659: %PNP-6-PNP_DISCOVERY_STARTED: PnP Discovery started El equipo obtiene una direcci√≥n ip, router por defecto y un nombre de dominio\nAutoinstall trying DHCPv4 on GigabitEthernet0/0/0,GigabitEthernet0/0/1,GigabitEthernet0/0/2,GigabitEthernet0 ... *May 4 04:19:44.999: %PKI-2-NON_AUTHORITATIVE_CLOCK: PKI functions can not be initialized until an authoritative time source, like NTP, can be obtained. Acquired IPv4 address 192.168.11.5 on Interface GigabitEthernet0/0/1 Received following DHCPv4 options: domain-name : cisco.com dns-server-ip : 192.168.11.6 El equipo intenta resolver los dominos y es redirigido a ztp.cisco.com\n*May 4 04:20:08.694: %PNP-3-PNP_CCO_SERVER_IP_UNRESOLVED: CCO server (devicehelper.cisco.com.) can\u0026#39;t be resolved (1/5) by (pid=619, pname=PnP Agent Discovery, time=04:20:08 UTC Sun May 4 2025) ... *May 4 04:20:20.696: %IOSXE_SDWAN_CONFIG-5-PNP_REDIRECT: PnP Redirect Msg: Org name \u0026#34;\u0026#34; Host \u0026#34;ztp.cisco.com.\u0026#34; port 0 intf GigabitEthernet0/0/1 *May 4 04:20:42.010: %PNP-6-PNP_REDIRECTION_DONE: PnP Redirection done (1) by (pid=619, pname=PnP Agent Discovery) *May 4 04:20:42.010: %PNP-6-PNP_SDWAN_STARTED: PnP SDWAN started (1) via (pnp-sdwan-vbond-ztp-discovery) by (pid=619, pname=PnP Agent Discovery) *May 4 04:20:42.811: %PNP-6-PNP_DISCOVERY_DONE: PnP Discovery done successfully (PnP-VBOND-ONPREM-ZTP-IPV4) profile (pnp-zero-touch) Podemos confirmar que la resoluci√≥n DNA para ztp.cisco.com ocurri√≥ de manera correctamente\nASR1K-2#show pnp trace | i ztp [05/04/25 04:20:10.695 UTC B7 619] 1: VBOND_ONPRIME_ZTP hostname ztp.cisco.com. resolved to 192.168.11.6 on interface GigabitEthernet0/0/1 [05/04/25 04:20:10.695 UTC B8 619] host_name is ztp.cisco.com. vbond_ipv4_address is 192.168.11.6, interface is GigabitEthernet0/0/1 Enseguida, el eouter se conecta al servidor ZTP y es redirigido al Validator\n*May 4 04:21:17.991: %Cisco-SDWAN-Router-vdaemon-6-INFO-1400002: Notification: 5/4/2025 4:21:17 control-connection-state-change severity-level:major host-name:\u0026#34;Router\u0026#34; system-ip::: personality:vedge peer-type:vbond peer-system-ip::: peer-vmanage-system-ip:0.0.0.0 public-ip:192.168.200.3 public-port:12346 src-color:default remote-color:default uptime:\u0026#34;0:00:00:00\u0026#34; new-state:up ... *May 4 04:21:19.242: %Cisco-SDWAN-Router-vdaemon-6-INFO-1400002: Notification: 5/4/2025 4:21:19 org-name-change severity-level:minor host-name:\u0026#34;Router\u0026#34; system-ip::: old-organization-name:\u0026#34;\u0026#34; new-organization-name:\u0026#34;SDWAN-LAB123\u0026#34; *May 4 04:21:21.597: %Cisco-SDWAN-Router-vdaemon-6-INFO-1400002: Notification: 5/4/2025 4:21:21 control-connection-state-change severity-level:major host-name:\u0026#34;Router\u0026#34; system-ip::: personality:vedge peer-type:vbond peer-system-ip::: peer-vmanage-system-ip:0.0.0.0 public-ip:192.168.200.1 public-port:12346 src-color:default remote-color:default uptime:\u0026#34;0:00:00:00\u0026#34; new-state:up Eventualmente, el equipo se conecta al MAnager y al Controller y obtiene su configuraci√≥n\n*May 4 04:21:23.924: %Cisco-SDWAN-Router-vdaemon-6-INFO-1400002: Notification: 5/4/2025 4:21:23 control-connection-state-change severity-level:major host-name:\u0026#34;Router\u0026#34; system-ip::: personality:vedge peer-type:vmanage peer-system-ip:10.10.10.2 peer-vmanage-system-ip:0.0.0.0 public-ip:192.168.100.1 public-port:12746 src-color:default remote-color:biz-internet uptime:\u0026#34;0:00:00:00\u0026#34; new-state:up *May 4 04:21:24.299: %Cisco-SDWAN-CSS-SDWAN-POD1-ASR1K-2-OMPD-5-NTCE-400003: Operational state changed to UP *May 4 04:21:43.981: %DMI-5-AUTH_PASSED: R0/0: dmiauthd: User \u0026#39;vmanage-admin\u0026#39; authenticated successfully from 10.10.10.2:42962 for netconf over ssh. ASR1K-2#show sdwan control connections | i up vsmart dtls 10.10.10.3 5 1 192.168.100.2 12346 192.168.100.2 12346 SDWAN-LAB123 mpls No up 0:02:02:51 0 vbond dtls 0.0.0.0 0 0 192.168.200.1 12346 192.168.200.1 12346 SDWAN-LAB123 mpls - up 0:02:02:54 0 vmanage dtls 10.10.10.2 5 0 192.168.100.1 12946 192.168.100.1 12946 SDWAN-LAB123 mpls No up 0:02:02:49 0 Conclusion El servidor ZTP On-Prem ampl√≠a la capacidad de incorporar dispositivos f√≠sicos en aquellas redes donde el acceso a internet est√° restringido.\nAutomatizar la incorporaci√≥n de routers con ZTP On-Prem es una excelente alternativa para las organizaciones que necesitan tener control total sobre su proceso de aprovisionamiento o que operan en entornos aislados (air-gapped). Al replicar localmente el proceso de Plug and Play, eliminas la necesidad de configuraciones manuales en sitios remotos mientras mantienes aislados los entornos sensibles.\nCon la configuraci√≥n adecuada, incorporar nuevos sitios se convierte en un proceso sencillo y repetible que ahorra tiempo valioso, reduce errores humanos y escala las implementaciones de SD-WAN.\nüëâ ¬øTe interesa configurar ZTP On-Prem para tu red? D√©jame un comentario o cont√°ctame; ¬°me encantar√≠a ayudarte o responder tus preguntas!\n","permalink":"https://netwithalex.blog/ztp-on-prem-es/","summary":"Plug and Play (PnP) te permite agregar dispositivos SD-WAN autom√°ticamente a trav√©s de la nube de Cisco. Esta publicaci√≥n explica c√≥mo lograr Zero-Touch Provisioning (ZTP) en un entorno aislado y local (on-premises).","title":"Cisco SD-WAN ZTP On-Prem: Automatizando el onboarding de los routers"},{"content":"Introduction ¬øAlguna vez has usado una aplicaci√≥n que se siente demasiado lenta? Tal vez las videollamadas se congelan o un portal web tarda una eternidad en cargar. Estos (y otros) son signos de que tu red WAN podr√≠a estar teniendo problemas.\n¬øLa buena noticia? Cisco SD-WAN incluye un conjunto de tecnolog√≠as dise√±adas para mejorar el rendimiento en enlaces poco confiables o con alta latencia. En esta serie, desglosaremos tres funciones clave que pueden mejorar significativamente la experiencia de las aplicaciones en tu red: _Optimizaci√≥n TCP, Forward Error Correction (FEC) y Duplicaci√≥n de Paquetes_.\nEn este primer post, exploraremos la Optimizaci√≥n TCP: c√≥mo funciona, cu√°ndo utilizarla y por qu√© puede marcar una gran diferencia para tus usuarios, especialmente en conexiones con alta latencia.\nQu√© es la optimizaci√≥n TCP? El objetivo de la Optimizaci√≥n TCP es ajustar finamente las conexiones TCP para mejorar su rendimiento. Esto es especialmente √∫til cuando hay enlaces con alta latencia involucrados.\nLos routers SD-WAN actuar√°n como proxies, lo que significa que interceptar√°n las conexiones TCP y las ajustar√°n para obtener un mejor desempe√±o. Veamos un ejemplo visual.\nSin la optimizaci√≥n TCP, el cliente y el servidor establecer√°n una sesi√≥n TCP directamente entre ellos.\nCuando se utiliza la Optimizaci√≥n TCP, el Router 1 interceptar√° y terminar√° la conexi√≥n TCP proveniente del cliente y establecer√° una sesi√≥n TCP optimizada con el Router 2. De igual manera, el Router 2 crear√° una sesi√≥n TCP con el servidor.\nNota Todo este proceso es transparente para el cliente y el servidor, y los datos ser√°n almacenados en cach√© en los routers para mantener activas las sesiones.\nLos equipos IOS-XE SD-WAN usan el algoritmo BBR el cual utiliza informaci√≥n sobre RTT (Round Trip Time) and ancho de banda disponible para optimizar la conexi√≥n. Si te gustar√≠a profundizar en el tema te recomiendo ver este v√≠deo de Neal Cardwell.\nLa implementaci√≥n actual de Optimization TCP tiene definidos dos roles:\nController Node: Equipo que intercepta y distribuye el trafico al Service Node. Service Node: Motores de optimizaci√≥n para la aceleraci√≥n del tr√°fico. En un escenario de la vida real, la recomendaci√≥n es tener servicios de optimizaci√≥n en las sedes y en los Data Centers. Hay requerimientos diferentes basados en el volumen de tr√°fico que los equipos van a procesar. Te sugiero leer la Documentaci√≥n de Cisco para informarte sobre los requerimientos de hardware y m√°s.\nEn las sedes peque√±as, es com√∫n utilizar un Integrated Service Node, es decir, un solo equipo puede interceptar, distribuir y optimizar el tr√°fico. Por otro lado, en el Data Cetner, un cluster de External Service Nodes es necesario para para lograr un mayor rendimiento y distribuir vol√∫menes m√°s altos de tr√°fico entre los miembros del cluster.\nEn general, la Optimizaci√≥n TCP es un proceso intensivo para los dispositivos, por lo que es crucial confirmar los requisitos de la plataforma. Por ejemplo, mi entorno de demostraci√≥n cuenta con dos Catalyst 8000V con 8 CPUs y 16 GB de RAM, requisitos adecuados para una implementaci√≥n peque√±a.\nVeamos en la pr√°ctica qu√© efecto tiene la optimizaci√≥n TCP en el tr√°fico. Para demostrarlo, voy a tomar una captura de paquetes en el lado WAN con y sin optimizaci√≥n.\nWindow Scaling Sin Optimizaci√≥n Veamos como se comporta el window scalind sin optimizaci√≥n\nNota como el window size se mantuvo estable alrededor de 1,000,000 Bytes despu√©s de aproximadamente 5 segundos\nWindow Scaling Con Optimizaci√≥n Veamos la misma informaci√≥n pero con la optimizaci√≥n activa.\nNota como el window size estuvo en constante cambio a lo largo de la sesi√≥n, recuper√°ndose r√°pida y agresivamente despu√©s de caer.\nPor qu√© es tan importante este par√°metro? Le ped√≠ a ChatGPT que lo explicar√° de una manera simple y concisa.\nLa ampliaci√≥n de ventana (window scaling) es crucial en redes con alta latencia o gran ancho de banda, ya que permite que TCP utilice una ventana de recepci√≥n m√°s grande, lo cual impacta directamente en la cantidad de bytes in flight (datos no confirmados) que el emisor puede enviar. Sin esta opci√≥n, el tama√±o m√°ximo de la ventana es de 65,535 bytes ‚Äîdemasiado peque√±o para enlaces de alta velocidad‚Äî lo que lleva a una infrautilizaci√≥n del enlace. Con window scaling, la ventana puede crecer hasta varios gigabytes, permitiendo al emisor mantener m√°s datos \u0026ldquo;en vuelo\u0026rdquo; y sostener un alto rendimiento incluso con demoras.\nEn resumen, la sesi√≥n TCP se divide en tres segmentos, donde los routers que optimizan anuncian una mayor ampliaci√≥n de ventana (window scaling) y gestionan las conexiones con el cliente y el servidor. El tr√°fico ahora se rige por el algoritmo BBR para maximizar el rendimiento.\nConfiguraci√≥n Para configurar esta funcionalidad, se pueden utilizar Feature Templates o Configuration Groups (con la versi√≥n 20.15 o superior). En mi caso utilizar√© Configuration Groups y voy a tener Internal Service Nodes en ambos lados\nPara empezar, a√±ado la funcionalidad \u0026ldquo;App QoE\u0026rdquo; en el Service Profile con la siguiente configuraci√≥n:\nService Node para hacer aceleraci√≥n Forwarder para actuar como Controller Node Esta es la configuraci√≥n que se enviar√° al equipo:\ninterface VirtualPortGroup2 no shutdown ip address 192.168.2.1 255.255.255.0 service-insertion appqoe ! service-insertion appnav-controller-group appqoe ACG-APPQOE appnav-controller 192.168.2.1 ! service-insertion service-node-group appqoe SNG-APPQOE service-node 192.168.2.2 ! service-insertion service-context appqoe/1 appnav-controller-group ACG-APPQOE service-node-group SNG-APPQOE cluster-type integrated-service-node enable vrf global ! El estatus debe ser \u0026ldquo;Running\u0026rdquo;\nLisbon_10-1#show sdwan appqoe tcpopt status ========================================================== TCP-OPT Status ========================================================== Status ------ TCP OPT Operational State : RUNNING TCP Proxy Operational State : RUNNING A continuaci√≥n, creo una pol√≠tica de datos muy sencilla para hacer match del tr√°fico entre el cliente y el servidor y selecciono la acci√≥n de AppQoE Optimization y selecciono la casilla de TCP Optimization.\nvsmart_1# show running-config policy policy data-policy _VPN_10_AppQoE vpn-list VPN_10 sequence 1 match source-data-prefix-list BR10_172_16_10_0 destination-data-prefix-list DC_100_172_16_100_0 ! action accept tcp-optimization service-node-group SNG-APPQOE ! ! sequence 11 match source-data-prefix-list DC_100_172_16_100_0 destination-data-prefix-list BR10_172_16_10_0 ! action accept tcp-optimization service-node-group SNG-APPQOE ! ! default-action accept ! ! Nota la direcci√≥n en la cual se debe aplicar la pol√≠tica es ALL\nvsmart_1# show running-config apply-policy apply-policy site-list BR_10 data-policy _VPN_10_AppQoE all ! site-list DC_100 data-policy _VPN_10_AppQoE all ! ! Verificando la Optimizaci√≥n TCP Para verificar que el tr√°fico est√° siendo optimizado, podemos habilitar On-Demand Troubleshooting y seleccionar un periodo de tiempo.\nTambi√©n, con la informaci√≥n en tiempo real podemos sacar la lista de flows que est√°n siendo optimizados\nLa columna de Services indica que la Optimizaci√≥n TCP se est√° aplicando a esos flujos\nProbando el rendimiento de la Optimization TCP Para evaluar el impacto de la Optimizaci√≥n TCP, ejecut√© pruebas con iperf utilizando diferentes valores de latencia para observar en qu√© condiciones la funci√≥n ofrece mayores beneficios. Aunque no se trata de un entorno de laboratorio profesional, proporciona informaci√≥n valiosa sobre c√≥mo se comporta la optimizaci√≥n en la pr√°ctica.\nNota Mi tr√°fico de iperf no est√° encriptado. No es posible optimizar tr√°fico encriptado sin antes desencriptarlo a trav√©s de TLS/SSL Decryption\nAlgunos detalles adicionales:\nEl ancho de banda est√° topado a 250 Mbps en los routers. Utilizo 4 flujos en paralelo, cada uno simulando una descarga de 100 MB: iperf -c 172.16.100.11 -n 100MB -P 4 -i 15 -R\nPara mantener consistencia, corro cada prueba 5 veces, descarto el resultado m√°s alto y m√°s bajo y al final saco un promedio de los tres restantes.\nLa siguiente tabla muestra los resultados obtenidos:\nDelay TCP Opt BW (Mbps) Time (s) 0 Disabled 248 ~ 13 0 Enabled 121,6 ~ 27 50 Disabled 99,7 ~ 33 50 Enabled 124 ~ 26 100 Disabled 71 ~ 46 100 Enabled 131 ~ 25 150 Disabled 66 ~ 49 150 Enabled 125 ~ 26 200 Disabled 59 ~ 56 200 Enabled 131 ~ 25 250 Disabled 63 ~ 52 250 Enabled 126 ~ 26 Aqu√≠ hay una representaci√≥n visual de la misma informaci√≥n\nLo que puedo concluir de los resultados:\nCon un delay de 0 ms, la optimizaci√≥n reduce el rendimiento (121 Mbps frente a 248 Mbps), debido al procesamiento que introduce esta funcionalidad.\nA medida que aumenta el delay, la optimizaci√≥n mejora el rendimiento y reduce el tiempo de transferencia, lo cual ya es evidente a partir de un delay de 50 ms.\nEl rendimiento disminuye significativamente sin optimizaci√≥n TCP. El ancho de banda baja de 248 Mbps a 0 ms a ~59‚Äì63 Mbps con retrasos de 200‚Äì250 ms. El tiempo tambi√©n aumenta proporcionalmente.\nEl rendimiento se mantiene estable a trav√©s de diferentes valores de delay con optimizaci√≥n TCP. El rendimiento se mantiene alrededor de 125‚Äì131 Mbps incluso con retrasos altos. El tiempo de transferencia tambi√©n es consistente, alrededor de ~26s.\nConclusi√≥n La optimizaci√≥n TCP es altamente efectiva para mitigar el impacto de la latencia en el rendimiento de TCP. Si bien introduce algo de sobrecarga en condiciones de baja latencia, sus beneficios se vuelven m√°s evidentes a medida que aumenta el retraso. En escenarios con retrasos de 100 ms o m√°s, la optimizaci√≥n puede ayudar a duplicar el rendimiento y reducir el tiempo de transferencia. Si est√°s pensando en habilitarla, ten en cuenta que, dependiendo del modelo de router, obtendr√°s rendimientos diferentes.\nAdem√°s, esta funci√≥n no debe habilitarse para todo el tr√°fico, sino que debe activarse para una aplicaci√≥n espec√≠fica o un conjunto de aplicaciones que necesiten aceleraci√≥n. Finalmente, esta funci√≥n ofrece mayores beneficios en l√≠neas intercontinentales, transportes satelitales o enlaces de alta latencia similares.\n¬°Espero que esta publicaci√≥n haya sido √∫til y nos vemos en la pr√≥xima!\n","permalink":"https://netwithalex.blog/appqoe-opt-tcp/","summary":"Descubre c√≥mo SD-WAN mejora el rendimiento de TCP. Conoce las principales t√©cnicas de optimizaci√≥n que aumentan el rendimiento de las aplicaciones y mejoran la experiencia del usuario.","title":"Serie AppQoE: Optimizaci√≥n TCP"},{"content":"Introducci√≥n La seguridad siempre ha sido una prioridad para las organizaciones, pero proteger cada √°ngulo de la red sigue siendo un desaf√≠o. Al mismo tiempo, garantizar una experiencia √≥ptima para aplicaciones y usuarios es igualmente importante. Las organizaciones a menudo han tenido que elegir entre soluciones centradas en la seguridad o en el rendimiento, lo que aumenta la complejidad de gesti√≥n y operaci√≥n.\nCisco Secure Access es una soluci√≥n robusta que aborda estos desaf√≠os. Ofrece una seguridad de primer nivel al integrar tecnolog√≠as avanzadas y controles de acceso. Esto significa que los usuarios pueden obtener una conectividad segura y directa desde los sitios SD-WAN hacia internet y aplicaciones SaaS.\nVeamos c√≥mo funciona.\nSD-WAN se encuentra con Secure Access A partir de la versi√≥n 20.13/17.13 de SD-WAN, la integraci√≥n con Secure Access est√° disponible de forma nativa.\nCon esta integraci√≥n, se pueden establecer t√∫neles IPSec autom√°ticos hacia los Data Centers primarios y secundarios de Secure Access que est√©n mas cercanos a la ubicaci√≥n de tu router, garantizando un rendimiento √≥ptimo. Estos t√∫neles enrutan el tr√°fico mientras aplican las pol√≠ticas de seguridad de tu organizaci√≥n, proporcionando una forma sencilla y potente de mejorar tanto la seguridad como la conectividad a internet.\nEn el centro de Secure Access est√°n los Network Tunnel Groups (NTGs), que gestionan las conexiones IPSec. Cada NTG incluye un Data Center de Secure Access primario y uno secundario. Aunque no es obligatorio configurar t√∫neles hacia ambos, es altamente recomendable para garantizar alta disponibilidad en caso de que uno tenga alg√∫n problema\nEs posible configurar hasta 16 t√∫neles, 8 activos y 8 backups, lo que permite hacer load balance entre los t√∫neles activos para aumentar el ancho de banda disponible.\nPara establecer los t√∫neles autom√°ticamente, el Manager y el router necesitan conectividad a Internet y DNS habilitado. Esto permite que el router determine su propia direcci√≥n IP p√∫blica, se la comunique al Manager y se le asignen los Data Centers SSE primario y secundario m√°s cercanos.\nUna vez que se establecen los t√∫neles, el tr√°fico que los atraviesa est√° asegurado por las funcionalidades de seguridad principales de SSE FWAAS, CASB, ZTNA y SWG y m√°s.\nPasos de configuraci√≥n Crear clave API Para comenzar, en SSE crea una clave API para que el Manager se conecte de forma segura. Aseg√∫rate de que se otorguen los siguientes privilegios:\nDeployment / Network Tunnel Group - Read/Write Deployment / Tunnels - Read/Write Deployment / Regions - Read Obtendr√°s el API Key y Key Secret\nIngrese credenciales en el Manager A continuaci√≥n, ingresa la informaci√≥n en el Manager en Administration \u0026gt; Settings \u0026gt; Cloud Credentials \u0026gt; SSE\nCrear pol√≠tica SSE en el Manager Crea una nueva pol√≠tica de SSE. Aqu√≠ es donde ingresas la informaci√≥n sobre los t√∫neles IPSec.\nDesde Configuration \u0026gt; Policy Groups \u0026gt; Secure Service Edge\nLo siguiente es lo m√≠nimo que necesitas:\nTracker IP - Se utiliza para confirmar que el t√∫nel est√° arriba. Tunnel - Al menos 1 t√∫nel. Ingresa el nombre tunnel name, source interface y selecciona primary/secondary DC Interface Pair - Especifica los t√∫neles Active y Backup. Selecciona none como backup si solo hay 1 t√∫nel. Nota Puedes seleccionar la regi√≥n SSE de tu preferencia o usar auto para seleccionarla autom√°ticamente.\nLuego, crea un Policy Group, asocia un dispositivo y agrega la pol√≠tica de SSE\nRedirigir el tr√°fico del lado del servicio Ahora, necesitamos redirigir el tr√°fico de los usuarios al t√∫nel. Hay dos opciones:\nRuta de servicio de tipo SSE En la funcionalidad service vpn, agrega una ruta service con el proveedor de SSE Cisco-Secure Access\nEsto se agregar√° de la siguiente manera:\nip sdwan route vrf 10 0.0.0.0/0 service sse Cisco-Secure-Access Puede seleccionar qu√© tr√°fico se reenv√≠a a SSE modificando la ruta, sin embargo, este enfoque no es tan flexible comparado con la segunda opci√≥n.\nData Policy Las Data Policies proporcionan m√°s flexibilidad para redirigir el tr√°fico. No solo podemos hacer match al destino, sino tambi√©n a otros elementos √∫tiles, como source, aplicaciones y m√°s.\nEste ejemplo hace match a todo el tr√°fico que proviene de mis usuarios en la VPN 10 y establece una acci√≥n de |Secure Service Edge. Observa que podemos habilitar la opci√≥n de Fallback to Routing en caso de que los t√∫neles no est√©n disponibles.\nValidaciones en el Manager Verifica el estado del t√∫nel desde Monitor \u0026gt; Tunnels \u0026gt; SIG/SSE Tunnels\nLos logs est√°n disponibles y son √∫tiles para determinar si hay alg√∫n problema al establecer los t√∫neles\nValidaciones del usuario Para verificar que los usuarios est√°n utilizando SSE, tenemos un par de opciones\nLa primera es visitar policy.test.sse.com, si el tr√°fico se redirige correctamente, ver√°s algo como esto:\nEn el lado de SSE, hay una pol√≠tica que niega el tr√°fico a las aplicaciones de redes sociales, veamos el resultado de tratar de acceder a x.com\nPor √∫ltimo, acceder a welcome.umbrella.com nos har√° saber si el usuario est√° protegido\nConsideraciones adicionales ECMP est√° disponible cuando m√∫ltiples t√∫neles est√°n activos. Unequal Load Balance se puede lograr mediante la asignaci√≥n de peso a los t√∫neles IPSEC. El fallback to routing se activa cuando los t√∫neles no est√°n disponibles Los trackers son personalizables - Se puede definir una URL y thresholds personalizados para cumplir con los SLA deseados Mecanismo de dampening incorporado en t√∫neles para evitar flapping entre t√∫neles. La redirecci√≥n de la pol√≠tica de datos proporciona una mayor flexibilidad que las rutas est√°ticas Usa interfaces Loopback para crear m√∫ltiples t√∫neles hacia SSE ¬°Espero que hayas aprendido algo √∫til! Nos vemos en el siguiente üëã\n","permalink":"https://netwithalex.blog/sdwan-sse-integracion/","summary":"Descubre c√≥mo Cisco SD-WAN y Cisco Secure Access trabajan juntos para mejorar el rendimiento y la seguridad de los usuarios en internet.","title":"Asegurando el borde con Cisco SD-WAN y Secure Access"},{"content":"Introducci√≥n En mi anterior serie de publicaciones, explor√© Application Aware Routing (AAR) en profundidad, una tecnolog√≠a clave en SD-WAN que dirige el tr√°fico sobre los transportes con mejor rendimiento. Si bien AAR ha sido una capacidad fundamental durante a√±os, la evoluci√≥n de las redes trajo nuevas ideas para mejorar su efectividad. Esto condujo a la introducci√≥n de Enhanced Application Aware Routing (EAAR).\nLimitaciones de AAR Antes de sumergirnos en EAAR, entendamos por qu√© fue creado. ü§ì\nLa implementaci√≥n actual de AAR mide la calidad del transporte utilizando BFD, enviando probes a un intervalo definido (1s por defecto). La p√©rdida, la latencia y jitter se derivan de esos paquetes y estos valores se colocan en cubetas que van rotando para calcular una m√©trica promedio que representa la salud del t√∫nel. Este proceso generalmente toma entre 10 y 60 minutos y con algunos ajustes de configuraci√≥n es posible lograr tiempos de 2 a 10 minutos.\nPara aquellas redes que requieren una detecci√≥n m√°s r√°pida, surgen algunos desaf√≠os:\nBajar el intervalo de hello a menos de 1 segundo afecta la escala de t√∫neles del dispositivo Bajar el multiplicador de BFD y el poll interval podr√≠an conducir a falsos positivos, moviendo el tr√°fico incluso con condiciones de red transitorias. Cambio constante del tr√°fico de un lado a otro, no hay un mecanismo para determinar si un transporte es estable nuevamente despu√©s de un evento de degradaci√≥n de la red. Enhanced AAR Entonces, ¬øqu√© es EAAR y c√≥mo mejora a su predecesor? ü§î\nEn pocas palabras, estas son las ventajas:\nUtiliza inline data en lugar de BFD. En otras palabras, los paquetes de plano de datos se utilizan para medir la p√©rdida, la latencia y el jitter. Capacidad de mover el tr√°fico en segundos en lugar de minutos Amortiguaci√≥n (Dampening) implementada para prop√≥sitos de estabilidad, asegurando que los transportes sean estables antes de reenviar el tr√°fico a trav√©s de ellos. Medici√≥n m√°s precisa de p√©rdida, latencia y jitter Vamos por partes Cuando EAAR est√° habilitado, los paquetes de datos se utilizar√°n para medir la p√©rdida, la latencia y la jitter. Entendamos las diferencias clave:\nMedici√≥n de p√©rdida Los routeres SD-WAN utilizar√°n inline data junto con los n√∫meros de secuencia IPSEC para medir la p√©rdida.\nHay un mecanismo incorporado que permite a los routers determinar si la p√©rdida es local para el router\nP√©rdida local - Por lo general, debido a ca√≠das de QoS O externo al router\nP√©rdida de WAN - Cualquier p√©rdida de paquetes fuera del router Para calcular la p√©rdida local, el router determinar√° la cantidad de paquetes que gener√≥ en comparaci√≥n con la cantidad de paquetes que realmente fueron enviados. Para obtener la p√©rdida en el WAN, los routers SD-WAN vecinos informar√°n la cantidad de paquetes recibidos y utilizar√°n BFD (TLVs de Monitoreo de Ruta) para enviar esta informaci√≥n de vuelta al router original.\nHasta este punto, existe una mejora importante en c√≥mo se realiza la medici√≥n de p√©rdidas, sin embargo, esto podr√≠a mejorarse a√∫n m√°s al aprovechar mediciones per queue de QoS. Para lograr esto, necesitamos asociar una clase de SLA con una App Probe Class. Veamos un ejemplo.\nCon esta App Probe Class, el router utilizar√° (y generar√° paquetes de BFD) con DSCP 18, imitando el tr√°fico menos importante que estar√° sujeto a diferentes reglas y rutas en los routers locales y externos. Esto proporcionar√° una medici√≥n m√°s precisa de la p√©rdida de paquetes para cada tipo de tr√°fico en los transportes especificados. Si no hay inline data, BFD se usa para obtener mediciones.\nNota Si usas GRE, la medici√≥n per queue no est√° disponible.\nAqu√≠ hay un visual para comprender mejor c√≥mo se medir√°n la p√©rdida dependiendo de m√∫ltiples factores.\nEncapsulaci√≥n App Probe Class Tipo de medici√≥n T√∫neles p√∫blicos T√∫neles privados IPsec S√≠ Por SLA total p√©rdida WAN + p√©rdida local por queue p√©rdida WAN per queue + p√©rdida local por queue IPsec No Todos los SLAs total p√©rdida WAN + total p√©rdida local total p√©rdida WAN + total p√©rdida local GRE - Todos los SLAs total p√©rdida WAN + total p√©rdida local total p√©rdida WAN + total p√©rdida local Latencia Para medir la latencia, el router simplemente calcular√° el tiempo necesario para enviar y recibir paquetes entre los dispositivos de origen y de destino. Se utiliza inline data y puede llegar a la granularidad de App Probe Class.\nJitter Vale la pena mencionar que el jitter se calcula por direcci√≥n (recibir o transmitir). El jitter se calcula en el receptor e informa al remitente usando TLV BFD. Se utiliza inline data y, en caso de no haber tr√°fico de datos, se usa BFD.\nSLA Dampening Uno de los beneficios de EAAR es dirigir el tr√°fico en segundos en lugar de minutos, pero ¬øqu√© pasar√≠a si hay condiciones de red transitorias que hacen que los transportes no cumplan con el SLA cada pocos minutos? El tr√°fico cambiar√≠a constantemente entre los transportes, lo que no es un escenario deseable y la raz√≥n por la cual se introdujo el dampening.\nLa idea general es que cuando un enlace de transporte deja de cumplir con el SLA, el tr√°fico se redirige a una ruta alternativa. Una vez que el transporte vuelve a estar en cumplimiento, el dispositivo no mueve el tr√°fico de inmediato. En su lugar, inicia un temporizador para asegurarse de que el enlace permanezca estable durante un per√≠odo determinado antes de reutilizarlo.\nAl final, el dampening ayuda a evitar cambios innecesarios en el tr√°fico, lo que podr√≠a afectar negativamente el rendimiento debido a la inestabilidad del transporte.\nConfiguraci√≥n de EAAR Para habilitar EAAR tenemos tres opciones predefinidas:\nMode Poll Interval Poll Multiplier Dampening Multiplier Aggressive 10s 6 (10s-60s) 120 (20 mins) Moderate 60s 5 (60s-300s) 40 (40 mins) Conservative 300s 6 (300s-1800s) 12 (60 mins) Nota Para usar tiempos personalizados, la configuraci√≥n debe hacerse a trav√©s de plantillas CLI.\nEAAR sigue el mismo principio fundamental que AAR, utilizando buckets que van rotando para calcular la p√©rdida promedio, la latencia y la jitter. Con el modo aggressive, el tr√°fico tomar√≠a entre 10 y 60 segundos en cambiar, dependiendo de qu√© tan severo sea el deterioro.\nEl Dampening Multiplier (poll interval x Dampening Multiplier) es de 1200 segundos, lo que significa que antes de cambiar el tr√°fico a un transporte, debe ser estable durante 20 minutos.\nEn mi laboratorio, estoy usando Configuration Groups, sin embargo, esto est√° disponible a trav√©s de Templates tambi√©n.\nPuedes usar una variable, en lugar de un valor global, para que sea aplicable tambi√©n a los dispositivos que no correr√°n EAAR. En este caso, los dispositivos habilitados para EAAR har√°n fallback a AAR.\nLa siguiente configuraci√≥n se agrega a los dispositivos:\nbfd enhanced-app-route enable bfd enhanced-app-route pfr-poll-interval 10000 bfd enhanced-app-route pfr-multiplier 6 bfd sla-dampening enable bfd sla-dampening multiplier 120 Veamos c√≥mo funciona\nDemo En mi laboratorio, uso el Manager con versi√≥n 20.16.1 y mis dispositivos con 17.15.1a\nNota La versi√≥n m√≠nima requerida es 20.12/17.12\nComencemos con algunas verificaciones despu√©s de aplicar la configuraci√≥n.\nPara verificar los temporizadores y multiplicadores configurados\nBR10#show sdwan app-route params Enhanced Application-Aware routing Config: :Enabled Poll interval: :10000 Poll multiplier: :6 App route Poll interval: :120000 Poll multiplier: :5 SLA dampening Config: :Enabled Multiplier: :120 Para verificar qu√© sesiones de BFD est√°n utilizando EAAR, busca la columna Flags\nBR10#show sdwan bfd sessions alt SOURCE TLOC REMOTE TLOC DST PUBLIC DST PUBLIC SYSTEM IP SITE ID STATE COLOR COLOR SOURCE IP IP PORT ENCAP BFD-LD FLAGS UPTIME ------------------------------------------------------------------------------------------------------------------------------------------------- 1.1.1.20 200 up biz-internet biz-internet 30.1.10.2 30.1.20.2 12406 ipsec 20006 EAAR 0:00:20:31 1.1.1.20 200 up mpls mpls 30.2.10.2 30.2.20.2 12366 ipsec 20002 EAAR 0:00:20:38 1.1.1.20 200 up private1 private1 30.3.10.2 30.3.20.2 12366 ipsec 20003 EAAR 0:00:20:37 Para obtener m√°s detalles sobre un t√∫nel espec√≠fico.\nBR10#show sdwan app-route stats summary Generating output, this might take time, please wait ... app-route statistics 30.1.10.2 30.1.20.2 ipsec 12386 12406 remote-system-ip 1.1.1.20 local-color biz-internet remote-color biz-internet sla-class-index 0,1,2 fallback-sla-class-index None enhanced-app-route Enabled sla-dampening-index None app-probe-class-list None mean-loss 0.000 mean-latency 0 mean-jitter 0 TOTAL AVERAGE AVERAGE TX DATA RX DATA IPV6 TX IPV6 RX INDEX PACKETS LOSS LATENCY JITTER PKTS PKTS DATA PKTS DATA PKTS ------------------------------------------------------------------------------------------------------------- 0 0 0 0 0 0 0 0 0 1 64 0 0 0 0 0 0 0 2 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0 4 0 0 0 0 0 0 0 0 5 64 0 0 0 0 0 0 0 Nota que no hay tr√°fico entre mis dispositivos, por lo que el recuento total de paquetes en cada bucket es bajo.\nLa misma informaci√≥n est√° disponible a trav√©s de la interfaz gr√°fica, utilizando la opci√≥n de Real Time \u0026gt; App Route Statistics\nEscenario 1 - Deterioro ligero Esta es la topolog√≠a de mi laboratorio\nPara esta primera prueba, usar√© los siguientes par√°metros de SLA:\nSLA_Real-Time Loss: 3% Latency: 150ms Jitter: 100ms La pol√≠tica AAR indica que:\nUse MPLS como transporte principal Si ning√∫n color cumple con el SLA y Private1 est√° disponible, usarlo. Si Private1 no est√° disponible, se hace load balance entre todos los colores restantes. Estoy haciendo match del tr√°fico entre 172.16.10.0/24 y 172.16.20.0/24.\nBR10#show sdwan policy from-vsmart from-vsmart app-route-policy app_route_AAR vpn-list vpn_Corporate_Users sequence 1 match source-data-prefix-list BR10 destination-data-prefix-list BR20 action backup-sla-preferred-color private1 sla-class SLA_Real-Time no sla-class strict sla-class preferred-color mpls sequence 11 match source-data-prefix-list BR20 destination-data-prefix-list BR10 action backup-sla-preferred-color private1 sla-class SLA_Real-Time no sla-class strict sla-class preferred-color mpls Estado inicial sin deterioro en la red\nBR10#show sdwan app-route stats summary | i color|damp|mean local-color biz-internet remote-color biz-internet sla-dampening-index None mean-loss 0.000 mean-latency 1 mean-jitter 0 local-color mpls remote-color mpls sla-dampening-index None mean-loss 1.212 mean-latency 1 mean-jitter 0 mean-loss 1.212 mean-latency 1 mean-jitter 0 local-color private1 remote-color private1 sla-dampening-index None mean-loss 0.000 mean-latency 0 mean-jitter 0 mean-loss 0.000 mean-latency 0 mean-jitter 0 Observa que el n√∫mero de paquetes por bucket aument√≥ dram√°ticamente\nBR10#show sdwan app-route stats remote-color mpls summary Generating output, this might take time, please wait ... app-route statistics 30.2.10.2 30.2.20.2 ipsec 12366 12366 remote-system-ip 1.1.1.20 local-color mpls remote-color mpls sla-class-index 0,1 fallback-sla-class-index None enhanced-app-route Enabled sla-dampening-index None app-probe-class-list None mean-loss 1.176 mean-latency 0 mean-jitter 0 TOTAL AVERAGE AVERAGE TX DATA RX DATA IPV6 TX IPV6 RX INDEX PACKETS LOSS LATENCY JITTER PKTS PKTS DATA PKTS DATA PKTS ------------------------------------------------------------------------------------------------------------- 0 131136 1501 0 0 100084 20846 0 0 1 131072 1438 0 0 95287 19605 0 0 2 131072 1400 0 0 100985 20937 0 0 3 131072 1781 0 0 85553 18271 0 0 4 64 0 0 0 72618 15942 0 0 5 131072 1589 0 0 65198 14226 0 0 El tr√°fico est√° utilizando MPLS como transporte primario\nBR10# show sdwan policy service-path vpn 10 interface gigabitEthernet 4 source-ip 172.16.10.10 dest-ip 172.16.20.10 protocol 6 all Number of possible next hops: 1 Next Hop: IPsec Source: 30.2.10.2 12366 Destination: 30.2.20.2 12366 Local Color: mpls Remote Color: mpls Remote System IP: 1.1.1.20 Introduzco el 3% de p√©rdida de paquetes en el transporte MPLS y ver√© cu√°nto tiempo lleva cambiar el tr√°fico. Dado que ya hay alrededor del 1% de p√©rdida, el 3% deber√≠a ser suficiente para activar un cambio.\nEl transporte MPLS tiene m√°s del 3% de p√©rdida\nBR10#show sdwan app-route stats remote-color mpls summary Generating output, this might take time, please wait ... app-route statistics 30.2.10.2 30.2.20.2 ipsec 12366 12366 remote-system-ip 1.1.1.20 local-color mpls remote-color mpls sla-class-index 0 fallback-sla-class-index 1 enhanced-app-route Enabled sla-dampening-index None app-probe-class-list None mean-loss 3.125 \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; mean-latency 0 mean-jitter 0 Despu√©s de 56 segundos, el tr√°fico cambi√≥ y cualquiera de los transportes que cumplen el SLA podr√≠a usarse\nBR10# show sdwan policy service-path vpn 10 interface gigabitEthernet 4 source-ip 172.16.10.10 dest-ip 172.16.20.10 protocol 6 all Number of possible next hops: 2 Next Hop: IPsec Source: 30.3.10.2 12366 Destination: 30.3.20.2 12366 Local Color: private1 Remote Color: private1 Remote System IP: 1.1.1.20 Next Hop: IPsec Source: 30.1.10.2 12386 Destination: 30.1.20.2 12366 Local Color: biz-internet Remote Color: biz-internet Remote System IP: 1.1.1.20 Si quito la p√©rdida, podemos ver que el mecanismo de dampening se activa. Entonces, si el transporte es estable durante 20 minutos, se volver√° a utilizar como ruta preferida.\nBR10#show sdwan app-route stats remote-color mpls summary Generating output, this might take time, please wait ... app-route statistics 30.2.10.2 30.2.20.2 ipsec 12366 12366 remote-system-ip 1.1.1.20 local-color mpls remote-color mpls sla-class-index 0 fallback-sla-class-index 1 enhanced-app-route Enabled sla-dampening-index 1 \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; app-probe-class-list None mean-loss 0.000 mean-latency 0 mean-jitter 0 Escenario 2 - Mayor deterioro En este caso, introducir√© una p√©rdida de paquetes del 10% para el transporte de biz-internet, lo que hace que private1 sea el √∫nico transporte cumpliendo el SLA.\nDespu√©s de alrededor de 45 segundos, la p√©rdida de Biz-Internet fue de 12%\nBR10#show sdwan app-route stats local-color biz-internet summary Generating output, this might take time, please wait ... app-route statistics 30.1.10.2 30.1.20.2 ipsec 12386 12366 remote-system-ip 1.1.1.20 local-color biz-internet remote-color biz-internet sla-class-index 0 fallback-sla-class-index 1 enhanced-app-route Enabled sla-dampening-index None app-probe-class-list None mean-loss 12.500 mean-latency 0 mean-jitter 0 El tr√°fico cambi√≥ a private1 exclusivamente\nBR10#show sdwan policy service-path vpn 10 interface gigabitEthernet 4 source-ip 172.16.10.10 dest-ip 172.16.20.10 protocol 6 all Number of possible next hops: 1 Next Hop: IPsec Source: 30.3.10.2 12366 Destination: 30.3.20.2 12366 Local Color: private1 Remote Color: private1 Remote System IP: 1.1.1.20 Despu√©s de eliminar la p√©rdida de paquetes, Biz-Internet tiene el mecanismo de dampening activado\nBR10#show sdwan app-route stats local-color biz-internet summary Generating output, this might take time, please wait ... app-route statistics 30.1.10.2 30.1.20.2 ipsec 12386 12366 remote-system-ip 1.1.1.20 local-color biz-internet remote-color biz-internet sla-class-index 0 fallback-sla-class-index 1 enhanced-app-route Enabled sla-dampening-index 1 \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; app-probe-class-list None mean-loss 1.562 mean-latency 0 mean-jitter 0 En este caso, el tiempo para cambiar el tr√°fico se redujo como consecuencia de un deterioro mayor.\nEscenario 3 - M√∫ltiples App Probe Class Para este escenario final, veamos c√≥mo obtener el mayor beneficio de EAAR.\nLa configuraci√≥n es m√°s compleja ya que involucra QoS, App Probe Class y pol√≠tica AAR.\nSe requiere QoS para clasificar y enviar tr√°fico en diferentes colas. App Probe Class para medir la p√©rdida, la latencia y el jitter en cada una de esas colas, de forma independiente. Mi configuraci√≥n de QoS tiene 3 colas y la cola 2 manejar√° el tr√°fico menos importante.\ncola 0 para el tr√°fico de control cola 1 para tr√°fico en tiempo real (marcado DSCP 46) cola 2 para tr√°fico transaccional (marcado DSCP 18) Utilizo una pol√≠tica de datos para hacer match del tr√°fico en el lado del servicio, marcarlo con el DSCP correcto y ponerla en la clase de QoS correcta. Tambi√©n cre√© un shaper en mi interfaz MPLS.\nPara demostrar las cosas, tendr√© dos transferencias de datos:\nHTTP GET (puerto 8000) Copia SCP (puerto 22) Mis SLA tienen las siguientes configuraciones:\nSLA Class Name Loss Latency Jitter SLA_Real-Time 3 % 150 ms 100 ms SLA_Transactional 5 % 45 ms 150 ms Lo primero que hay que notar es que mis dos clases de sondeo de aplicaciones se miden de manera independiente. Observa c√≥mo la p√©rdida media para Transactional-Probe_Class es 1, mientras que para Real_Time_Probe_Class es 0.\nBR10#show sdwan app-route stats local-color mpls summary Generating output, this might take time, please wait ... app-route statistics 30.2.10.2 30.2.20.2 ipsec 12366 12366 remote-system-ip 1.1.1.20 local-color mpls remote-color mpls sla-class-index 0,1,2 fallback-sla-class-index None enhanced-app-route Enabled sla-dampening-index None app-probe-class-list None mean-loss 0.000 mean-latency 1 mean-jitter 0 TOTAL AVERAGE AVERAGE TX DATA RX DATA IPV6 TX IPV6 RX INDEX PACKETS LOSS LATENCY JITTER PKTS PKTS DATA PKTS DATA PKTS ------------------------------------------------------------------------------------------------------------- 0 16384 0 0 0 35827 111807 0 0 1 49152 0 1 0 37788 118236 0 0 2 49216 0 1 0 36859 115551 0 0 3 16384 0 1 0 23894 77280 0 0 4 32768 0 1 1 33179 103759 0 0 5 32768 0 1 0 21485 71702 0 0 app-probe-class-list Real_Time_Probe_Class mean-loss 0.000 mean-latency 0 mean-jitter 0 TOTAL AVERAGE AVERAGE TX DATA RX DATA IPV6 TX IPV6 RX INDEX PACKETS LOSS LATENCY JITTER PKTS PKTS DATA PKTS DATA PKTS ------------------------------------------------------------------------------------------------------------- 0 0 0 0 0 - - - - 1 32768 0 1 0 - - - - 2 32768 0 0 0 - - - - 3 0 0 0 0 - - - - 4 32768 0 1 2 - - - - 5 0 0 0 0 - - - - app-probe-class-list Transactional-Probe_Class mean-loss 0.000 mean-latency 1 mean-jitter 0 TOTAL AVERAGE AVERAGE TX DATA RX DATA IPV6 TX IPV6 RX INDEX PACKETS LOSS LATENCY JITTER PKTS PKTS DATA PKTS DATA PKTS ------------------------------------------------------------------------------------------------------------- 0 16384 0 0 0 - - - - 1 49152 0 1 0 - - - - 2 49216 0 1 0 - - - - 3 16384 0 1 0 - - - - 4 32768 0 1 1 - - - - 5 32768 0 1 0 - - - - Ahora, he bajado mi shaper. EAAR fue r√°pido en detectar un cambio en la latencia para el SLA Transactional, ahora son 53 ms.\nBR10# show sdwan app-route stats local mpls summary Generating output, this might take time, please wait ... app-route statistics 30.2.10.2 30.2.20.2 ipsec 12386 12366 remote-system-ip 1.1.1.20 local-color mpls remote-color mpls sla-class-index 0,1,2 fallback-sla-class-index None enhanced-app-route Enabled sla-dampening-index None app-probe-class-list None mean-loss 0.000 mean-latency 53 mean-jitter 0 TOTAL AVERAGE AVERAGE TX DATA RX DATA IPV6 TX IPV6 RX INDEX PACKETS LOSS LATENCY JITTER PKTS PKTS DATA PKTS DATA PKTS ------------------------------------------------------------------------------------------------------------- 0 2048 0 54 0 4396 8513 0 0 1 1024 0 55 0 4461 8534 0 0 2 8256 0 49 0 4429 8549 0 0 3 16384 0 54 0 4411 8549 0 0 4 0 0 53 0 4440 8549 0 0 5 0 0 54 0 4443 8549 0 0 app-probe-class-list Real_Time_Probe_Class mean-loss 0.000 mean-latency 0 mean-jitter 0 TOTAL AVERAGE AVERAGE TX DATA RX DATA IPV6 TX IPV6 RX INDEX PACKETS LOSS LATENCY JITTER PKTS PKTS DATA PKTS DATA PKTS ------------------------------------------------------------------------------------------------------------- 0 0 0 0 0 - - - - 1 0 0 0 0 - - - - 2 8192 0 0 0 - - - - 3 16384 0 0 0 - - - - 4 0 0 0 0 - - - - 5 0 0 0 0 - - - - app-probe-class-list Transactional-Probe_Class mean-loss 0.000 mean-latency 53 \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; mean-jitter 0 TOTAL AVERAGE AVERAGE TX DATA RX DATA IPV6 TX IPV6 RX INDEX PACKETS LOSS LATENCY JITTER PKTS PKTS DATA PKTS DATA PKTS ------------------------------------------------------------------------------------------------------------- 0 2048 0 54 0 - - - - 1 1024 0 55 0 - - - - 2 8256 0 49 0 - - - - 3 16384 0 54 0 - - - - 4 0 0 53 0 - - - - 5 0 0 54 0 - - - - Ahora que no se cumple mi SLA Transactional con una latencia m√°xima de 45 ms, usar√© NWPI para comprender c√≥mo se env√≠a el tr√°fico. Examinemos el tr√°fico HTTP con el puerto 80000\nObserva que, en la direcci√≥n upstream, el color local y remote es private1, lo que indica que el tr√°fico se ha alejado de MPLS y su latencia de 53 ms. Justo lo que esper√°bamos ‚úÖ\nAhora, veamos c√≥mo est√° fluyendo el tr√°fico en el puerto 22\nUna vez m√°s, observa el local y Remote Color en la direcci√≥n upstream, observa c√≥mo MPLS todav√≠a est√° en uso para este tr√°fico, ya que no hay problemas en los transportes para este tipo de tr√°fico.\nEn resumen, el tr√°fico con DSCP 46 funciona perfectamente bien en el transporte MPLS, sin embargo, el tr√°fico con DSCP 18 estaba teniendo m√°s latencia que el SLA configurado, por lo que se traslad√≥ a Private1 ya que cumple con el SLA.\nPodemos confirmar que estamos midiendo y tomando decisiones de ruteo per queue, esta es una gran diferencia ü§Ø!\nLecciones aprendidas Utilizando inline data, el n√∫mero de muestras aumenta dram√°ticamente en comparaci√≥n con el tama√±o de muestra de BFD. üìà EAAR puede redirigir el tr√°fico en segundos, en lugar de minutos. ‚è© EAAR ofrece los mayores beneficios en los transportes con QoS, como MPLS. üöÄ Incluso en los transportes sin QoS, las mediciones de inline data aumentan el tama√±o y la precisi√≥n de las muestras. ‚è≥ El temporizador de dampening es √∫til para garantizar que los transportes sean estables antes de marcarlos como v√°lidos. ‚úÖ La interoperabilidad entre dispositivos que ejecutan EAAR y dispositivos que ejecutan AAR es posible üîÑ ¬°Espero que hayas aprendido algo √∫til! Nos vemos en el siguiente üëã\n","permalink":"https://netwithalex.blog/aar-mejorado/","summary":"Aprende los beneficios de EAAR y c√≥mo implementarlo en tu red","title":"Enhanced App Aware Routing"},{"content":"Introducci√≥n En mi √öltima publicaci√≥n, cre√© un asistente de IA de Cisco SD-WAN para ayudarme a ejecutar trazas NWPI y solucionar problemas en la red. La interacci√≥n con el asistente requer√≠a que el usuario respondiera preguntas hasta obtener informaci√≥n sobre un flujo particular y posibles problemas. En esta publicaci√≥n, mi objetivo es usar m√∫ltiples agentes y ver si puedo llegar a la misma conclusi√≥n con menos interacci√≥n humana. Se puede encontrar el repositorio aqu√≠\nPrimeros Pasos Para lograr esto, usar√© LangGraph oficialmente definido como:\nUna biblioteca para construir aplicaciones de actores m√∫ltiples estatales con LLMS, utilizada para crear flujos de trabajo de agentes y m√∫ltiples agentes\nHay diferentes enfoques, pero decid√≠ construir una estructura donde hay un supervisor que orquesta el flujo de trabajo y decide qui√©n debe actuar a continuaci√≥n. La idea es construir un gr√°fico que represente a los agentes y c√≥mo est√°n conectados. El gr√°fico ilustra el orden en el que los agentes pueden ejecutarse.\nEn mi caso tengo 3 agentes:\nSupervisor - Este agente est√° a cargo de recibir input del usuario y decidir qui√©n debe actuar a continuaci√≥n. Adem√°s, una vez que otros agentes terminen sus tareas, le informar√°n y se tomar√° una nueva decisi√≥n de enrutamiento. El supervisor es el √∫nico agente que puede decidir cu√°ndo volver al usuario con una respuesta. Reviewer - Este agente revisar√° la informaci√≥n que se enviar√° al usuario, realiza algunas preguntas o res√∫menes y resuelve preguntas o situaciones que el tracer pueda plantear. Tracer - Este es el agente que ejecutar√° las trazas y recuperar√° la informaci√≥n que el usuario est√° buscando. Se informar√° al supervisor cuando se haga o si se debe responder alguna pregunta. Tuve que modificar un poco el prompt del tracer, para poder obtener un comportamiento que sea mejor para este enfoque. Adem√°s, cada agente puede tener sus propias herramientas. Actualmente, el Tracer tiene m√°s herramientas que el resto de los agentes.\nVisualizado, el gr√°fico se ve as√≠:\nLa flecha punteada indica un borde condicional, lo que significa que el supervisor puede decidir cu√°l debe ser el pr√≥ximo agente o si terminar es apropiado.\nLa flecha continua indica el siguiente paso que debe seguirse Por ejemplo, despu√©s de \u0026ldquo;START\u0026rdquo;, el siguiente agente debe ser el supervisor. Tracer y Reviewer deben ir al Supervisor.\nAunque este es un gr√°fico simple, este enfoque es muy poderoso.\n¬øC√≥mo decide el supervisor? El supervisor juega un papel fundamental, ya que determina qui√©n debe actuar a continuaci√≥n. Esto se define en la siguiente funci√≥n:\noptions = [\u0026#34;FINISH\u0026#34;] + members function_def = { \u0026#34;name\u0026#34;: \u0026#34;route\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Select the next role.\u0026#34;, \u0026#34;parameters\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;routeSchema\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;object\u0026#34;, \u0026#34;properties\u0026#34;: { \u0026#34;next\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;Next\u0026#34;, \u0026#34;anyOf\u0026#34;: [ {\u0026#34;enum\u0026#34;: options}, ], } }, \u0026#34;required\u0026#34;: [\u0026#34;next\u0026#34;], }, } Con esto, cada vez que el supervisor reciba cualquier input, obtendr√° un valor de \u0026ldquo;next\u0026rdquo; de las opciones disponibles y esto representar√° el siguiente nodo en el gr√°fico.\nDemo Usaremos la siguiente topolog√≠a para probar\nLe doy informaci√≥n al asistente sobre el problema e informo que ya hay tr√°fico en la red (se requiere tr√°fico para que NWPI genere los insights que estamos buscando).\nEsto es con lo que regres√≥ el asistente\nLa respuesta presenta informaci√≥n de manera condensada, que indica el flujo y el camino que el tr√°fico est√° tomando y algunos eventos detectados para esta comunicaci√≥n. Los detalles de uno de los flujos tambi√©n est√°n presentes, sin embargo, tiene menos informaci√≥n que antes. Esto se debe a que he pedido al agente reviewer que mantenga lo que considera m√°s relevante y lo env√≠e al usuario. Al final, podemos ver que se menciona el Drop Report y hay una sugerencia para revisar las ACL üéâ\nPodemos jugar con el reviewer para mostrar m√°s informaci√≥n sobre los detalles del flujo.\nDetr√°s de c√°maras Ok, el asistente regres√≥ con una buena respuesta, pero veamos con m√°s detalle lo que sucedi√≥. Usando LangSmith podemos obtener detalles e insights sobre el workflow. Aqu√≠ est√° el proceso completo.\nPrimero, el supervisor recibe la consulta del usuario y la pasa al Tracer.\nA continuaci√≥n, el Tracer utiliza las herramientas disponibles para iniciar la traza, espera capturar algunos flujos y recupera informaci√≥n. Informa al Supervisor. Ten en cuenta que el orden en que se ejecutan las herramientas depende del agente.\nLuego, el supervisor recibe la informaci√≥n y decide que el reviewer deber√≠a actuar a continuaci√≥n.\nA continuaci√≥n, el reviewer recibe la informaci√≥n y reescribe lo que se recibi√≥ del tracer. Informa al supervisor.\nFinalmenete, el supervisor decide que la informaci√≥n est√° lista para enviarse al usuario. Esto es cuando recibimos el mensaje en Webex.\nLecciones aprendidas Dado que los agentes pueden tomar decisiones, no siempre es f√°cil entender lo que est√°n haciendo o por qu√© devuelven lo que devuelven, usando LangSmith definitivamente ayud√≥ con esto. No solo podemos ver el request y las herramientas utilizadas, sino que tambi√©n hay algunos metadatos que proporcionan informaci√≥n valiosa adicional. Llegu√© a algunas situaciones en las que el supervisor llamaba al tracer varias veces debido a alg√∫n error al recuperar la informaci√≥n. Al final, esto fue causado por un error en el c√≥digo y, afortunadamente, mi asistente no es costoso. Sin embargo, si tu caso de uso consume muchos tokens, debes considerar agregar alg√∫n tipo de protecci√≥n para evitar un loop que aumente el consumo de APIs. Hablando de costos, los modelos de lenguaje peque√±o (SLM) son una buena alternativa. Despu√©s de quedarme sin cuota, record√© que el modelo GPT-4o-mini est√° disponible y decid√≠ intentarlo. Despu√©s de algunas pruebas, vi que funcion√≥ muy bien y era mucho m√°s barato, as√≠ que continu√© con ese. Conclusi√≥n Usando la estrategia de m√∫ltiples agentes, podemos lograr tareas m√°s complejas y tener m√°s flexibilidad. Si es necesario, la interacci√≥n del usuario se puede agregar en ciertas decisiones que son importantes. Adem√°s, existe cierta complejidad adicional, ya que prompts deben refinarse para lograr los resultados que esperamos. En mi caso, tuve que hacer m√∫ltiples iteraciones y refinamientos a los prompts de todos los agentes antes de obtener un resultado que consideraba lo suficientemente bueno.\nMe interesa probar otros enfoques para las implementaciones de m√∫ltiples agentes y agregar informaci√≥n adicional para que los agentes proporcionen informaci√≥n m√°s precisa a trav√©s de RAG.\n","permalink":"https://netwithalex.blog/mejorando-mi-asistente-sd-wan-multiples-agentes/","summary":"Aprende c√≥mo utilizar un enfoque \u0026ldquo;agentic\u0026rdquo; para hacer troubleshooting de tu red SD-WAN con LLMs","title":"Mejora de mi asistente de SD-WAN - M√∫ltiples agentes"},{"content":"Introducci√≥n Hace tiempo que quer√≠a subirme al tren de los LLM y aprender a usar uno de los frameworks m√°s populares. Hace unos meses, vi una excelente presentaci√≥n en Cisco Live de mi buen amigo Jes√∫s, y eso me dio la determinaci√≥n que necesitaba para finalmente profundizar en el tema.\nDesde entonces, he estado investigando y pensando en un buen caso de uso que pudiera servir como objetivo para mi proceso de aprendizaje. Despu√©s de considerar diferentes opciones, decid√≠ construir un asistente de IA para SD-WAN que pudiera ayudarme a solucionar problemas relacionados con esta tecnolog√≠a. Aprovechando las herramientas disponibles, decid√≠ que mi asistente ser√≠a un experto en la funcionalidad de Network Wide Rath Insights.\nEn esta publicaci√≥n, quiero compartir un poco de mi experiencia para construirlo y, por supuesto, mostrar algunos de los resultados. Para entenderlo mejor, sugiero tener el repositorio de Github abierto y consultarlo a medida que avanzas por la publicaci√≥n.\nSobre la configuraci√≥n Mi laboratorio SD-WAN est√° corriendo la versi√≥n 20.12.3 y WAN edges est√°n utilizando 17.9.4a. Tengo una topolog√≠a muy simple:\nEl lenguaje de programaci√≥n utilizado es Python y el framework que eleg√≠ para interactuar con el LLM es Langchain. Utilic√© OpenAI Model GPT-4o y un bot de webex para la interacci√≥n. El repositorio se puede encontrar aqu√≠.\nMi objetivo Para dar contexto, la soluci√≥n de problemas dentro de una infraestructura SD-WAN no es sencilla debido a que el tr√°fico est√° cifrado, las pol√≠ticas dictan c√≥mo fluir√° el tr√°fico, pueden existir m√∫ltiples caminos hacia un destino, los siguientes saltos pueden cambiar seg√∫n las pol√≠ticas, hay m√∫ltiples saltos involucrados, entre otros factores. Determinar toda esta informaci√≥n lleva tiempo y no es un proceso directo.\nNWPI Trace es una herramienta que mejora significativamente el proceso de troubleshooting, ya que proporciona informaci√≥n y visibilidad salto a salto. Se puede iniciar f√°cilmente desde la interfaz del Manager, detecta flujos seg√∫n filtros especificados y permite explorar la red para obtener toda la visibilidad necesaria. Es una herramienta muy completa y avanzada.\nComo mencion√© antes, quer√≠a utilizar este proyecto como un campo de prueba para aprender, y dado que no ten√≠a experiencia previa con LLMs o LangChain, establec√≠ un objetivo sencillo:\nConstruir un asistente que pueda iniciar una traza NWPI y darme detalles de los flujos\nPlanificaci√≥n y construcci√≥n Ok, tengo mi objetivo, pero ¬øc√≥mo comienzo?\nTom√© un enfoque pr√°ctico que significaba que no aprend√≠ Langchain desde cero y en su lugar tom√© el repositorio de la sesi√≥n de Cisco Live como base y constru√≠ sobre eso. Las razones para elegir este repositorio fueron simples:\nSe explic√≥ en las sesiones, as√≠ que tuve una idea general de las tecnolog√≠as y su prop√≥sito. Pens√© que ser√≠a f√°cil ajustar a mi caso de uso (por ejemplo, tambi√©n uso webex, interactuar√© con dispositivos de red, vi c√≥mo las herramientas podr√≠an reemplazarse con la m√≠as) Tuve que limpiar un poco antes de comenzar, esto me requiri√≥ que entendiera lo que era esencial para hostear el LLM e interactuar con √©l. Afortunadamente, el repositorio tiene una estructura organizada que facilita la comprensi√≥n.\nDe la sesi√≥n, aprend√≠ sobre [Langchain Tools] (https://python.langchain.com/v0.1/docs/modules/tools/), as√≠ que sab√≠a que podr√≠a crear funciones que mi agente podr√≠a usar para realizar diferentes acciones. En este caso, las acciones ser√≠an algo as√≠ como comenzar trazas y leer la informaci√≥n obtenida.\nDesaf√≠o 1 Necesitaba familiarizarme con la APIs de NWPI. En este punto, sab√≠a que en alg√∫n lugar de la documentaci√≥n de la API hab√≠a visto que algunas operaciones estaban disponibles, pero nunca me hab√≠a tomado el tiempo de analizarlas en detalle. Para mi sorpresa, las acciones espec√≠ficas de iniciar un trace y obtener sus detalles no estaban incluidas‚Ä¶ En su lugar, encontr√© informaci√≥n sobre c√≥mo iniciar una \u0026ldquo;tarea\u0026rdquo; o \u0026ldquo;Auto-on Task\u0026rdquo;, que no es lo mismo que el \u0026ldquo;Trace\u0026rdquo; que ten√≠a en mente.\nEn este punto, ten√≠a que decidir si seguir el camino \u0026ldquo;oficial\u0026rdquo; (quiz√°s m√°s f√°cil) o explorar una alternativa para lograr exactamente lo que quer√≠a.\nSabiendo que casi todo en SD-WAN es impulsado por APIs, us√© la pesta√±a de inspecci√≥n de mi navegador y comenc√© a explorar las APIs que se activaban cuando iniciaba un trace desde la UI. Despu√©s de una primera revisi√≥n r√°pida, determin√© que era factible y comenc√© a recopilar la informaci√≥n que necesitaba.\nDesaf√≠o 2 Ya sab√≠a que tendr√≠a que hacer algo de an√°lisis para convertir mi idea en realidad, pero subestim√© cu√°nto tendr√≠a que hacer. De hecho, la dificultad de esta tarea me alej√≥ del proyecto por un tiempo, ya que se volvi√≥ cada vez m√°s compleja.\nEn mi mente solo hab√≠a 3 tareas \u0026ldquo;simples\u0026rdquo;:\nEncontrar la API para iniciar el trace Encontrar la API para confirmar que el trace est√° en ejecuci√≥n Encontrar la API que me d√© detalles de los flujos API para iniciar la traza Iniciar la traza desde la interfaz de usuario es muy sencillo, solo necesitas un Site ID y un VPN ID. Sin embargo, hay verificaciones subyacentes que damos por sentadas.\nEl Site ID realmente es necesario para identificar los dispositivos en los que iniciar la traza Hay una serie de opciones (informes de QoS, visibilidad ART, visibilidad de aplicaciones, DIA, etc.) que dependen de la versi√≥n La VPN debe existir Para realizar esto, cre√© la funci√≥n get_device_details_from_site para poder encontrar la informaci√≥n relacionada con los dispositivos en los que iniciar el trace. Necesitaba:\nversiones n√∫meros de serie nombres estado de conectividad Luego, cre√© la funci√≥n start_trace que recibir√≠a la informaci√≥n obtenida previamente y otros filtros. Mantuve los filtros lo m√°s simples posible, dejando solo la opci√≥n de especificar una subred de origen y destino. Hay muchas opciones para la traza para las cuales no realic√© ninguna verificaci√≥n de versi√≥n antes de ejecutarla, solo lo hice para los informes de QoS, que requieren la versi√≥n 17.9 o posterior. Esta funci√≥n devuelve informaci√≥n necesaria m√°s adelante para verificar el estado.\nAPI para confirmar que la traza se est√° ejecutando Esta fue probablemente la tarea m√°s f√°cil. Cre√© la funci√≥n verify_trace_state y con la ayuda del LLM se puede ejecutar unos segundos despu√©s de comenzar la traza. Devuelve el estado, que tambi√©n es necesario para obtener informaci√≥n m√°s adelante.\nAPI para darme detalles de los flujos Esta fue la tarea m√°s compleja y tardada. En mi mente, verificar el resultado de una traza es muy simple, sin embargo, cuando recibimos la informaci√≥n en pedazos, a trav√©s de diferentes llamadas comienza a ser complicado.\nIntent√© replicar el proceso que sigo en la interfaz de usuario:\nVer las estad√≠sticas del trace y comprobar los flujos que fueron capturados (si es que hay alguno). Para la lista de flujos, buscar el que tiene el bot√≥n \u0026ldquo;readout\u0026rdquo; en rojo (problema detectado) y hacer clic para obtener m√°s detalles. Expandir la vista del flujo para acceder a las funcionalidades avanzadas y as√≠ determinar las caracter√≠sticas por las que el paquete pasa en cada uno de los saltos. Para obtener los flujos capturados en el trace, cre√© la funci√≥n get_flow_summary. Esta funci√≥n devolver√° la lista de los flujos capturados. Ver√°s detalles como origen/destino, aplicaci√≥n y protocolo. Esto es √∫til para identificar el flujo cuyo id te interesa para obtener m√°s detalles.\nCre√© la funci√≥n trace_readout para obtener un resumen de los eventos que el trace captur√≥ junto con el camino afectado. Por ejemplo, podr√≠as ver que un flujo SSH no est√° funcionando entre el Dispositivo X y el Dispositivo Y.\nUna vez que hayas identificado el flujo y los eventos que te interesan, puedes obtener informaci√≥n detallada del flujo con la funci√≥n get_flow_detai. Esto te proporcionar√° informaci√≥n como:\nHops Eventos Colores locales/remotos Interfaces de entrada/salida Funcionalidades de entrada/salida aplicadas a los paquetes Funcionalidad que determina decisi√≥n de ruteo Con esta informaci√≥n es posible ver todo tipo de cosas, como ACLs, tipo de pol√≠ticas aplicadas, por qu√© un paquete fue enviado a trav√©s de un color espec√≠fico, ca√≠das, confirmar que tu pol√≠tica est√° funcionando como se espera, etc.\nOk, creo que eso es todo\nDemo Comenc√© creando un ACL para bloquear la comunicaci√≥n y la apliqu√© en el lado de DC.\nMunich_DC100-1 - ACL configuration sdwan interface GigabitEthernet2 access-list ACL_Drop_172_16_10_0 out policy access-list ACL_Drop_172_16_10_0 sequence 1 match source-ip 172.16.10.0/24 destination-ip 172.16.100.0/24 ! action drop count dropCounter ! ! default-action accept ! ¬øMi asistente detectar√° esto? ü§î\nA continuaci√≥n, comienzo la aplicaci√≥n y solicito que el LLM inicie una traza. Puedo confirmar en la UI que se crea.\nLanzo un par de conexiones SSH de Branch a DC\nDespu√©s, le pregunto al asistente si se han capturado flujos, responde con esto\nPodemos ver que los flujos fueron capturados y tambi√©n me dio m√°s informaci√≥n sobre los eventos detectados y el camino que tomaron los paquetes incluyendo los nombres de los dispositivos. El primer evento parece estar relacionado con nuestro problema. Hasta ahora, la informaci√≥n parece precisa, voy a pedir m√°s detalles.\nCon esto, podemos ver que el cliente envi√≥ m√∫ltiples intentos de SSH, podemos profundizar en uno de los flujos. Veamos qu√© m√°s da.\nFinalmente, el asistente proporciona informaci√≥n detallada sobre las funcionalidades que se aplican a cada uno de los flujos. En el segundo salto, en Munich DC, podemos ver que las funcionalidades de salida muestran el SD-WAN ACL y un \u0026lsquo;Drop Report\u0026rsquo;. El asistente proporciona su propia conclusi√≥n y tambi√©n sospecha que el router de Munich est√° tirando el tr√°fico.\nCon un poco m√°s de trabajo, el agente podr√≠a decir el nombre del ACL y el n√∫mero de secuencia responsable de tirar el tr√°fico. ¬°Hemos identificado con √©xito la ra√≠z del problema! üòÄ üéâ\nLecciones aprendidas Cuando comenc√©, quer√≠a ser s√∫per cauteloso con los cr√©ditos ($$), as√≠ que estaba usando GPT-3.5-Turbo-16k que es m√°s barato pero tambi√©n menos inteligente. En alg√∫n momento, enfrent√© problemas con el LLM entrando en un loop, decid√≠ probar GPT-4O y sent√≠ una diferencia en la forma en que el agente estaba razonando. Inicialmente, estaba usando una temperatura LLM = 0, esto estaba bien, pero las respuestas carec√≠an de variedad y detalles, necesitaba hacerlo m√°s hablador. Ajustar la temperatura = 0.9 me dio un buen equilibrio entre la charla y la correcci√≥n (aunque a veces el agente todav√≠a proporciona informaci√≥n que es cuestionable en funci√≥n de las salidas) Hacer troubleshooting puede ser dif√≠cil a veces, principalmente me bas√© en imprimir los resultados de las funciones mientras estas se ejecutaban y el agente imprim√≠a en la terminal. Esto me permiti√≥ entender qu√© herramientas estaba utilizando el agente y el orden en que las utilizaba. Adem√°s, pude ver qu√© estaban devolviendo esas herramientas. Aqu√≠ tienes un ejemplo: El texto en verde indica las herramientas a las que est√° accediendo al agente. El texto amarillo es la informaci√≥n devuelta por una funci√≥n. En este caso, podemos ver que el agente llam√≥ la funci√≥n \u0026quot;get_entry_time_and_state\u0026quot; para que obtener informaci√≥n necesaria para llamar a la siguiente funci√≥n \u0026quot;get_flow_detail\u0026quot;\nHay mejores herramientas disponibles para ayudar con la resoluci√≥n de problemas como LangSmith Tracing, lo voy a explorar en el futuro.\nEl prompts de mi agente tuvo que ser refinado varias veces, a menudo me di cuenta de que necesitaba proporcionar m√°s detalles para manejar ciertas situaciones correctamente, especialmente cuando la salida de una funci√≥n era necesaria para llamar a otra o para manejar situaciones inesperadas. Creo que a√∫n puede mejorarse, de hecho, quiero escribir un prompt completamente diferente para intentar hacer que el agente ejecute todas las herramientas por s√≠ mismo y solo devuelva una conclusi√≥n despu√©s de analizar todas las salidas. Conclusi√≥n En general, fue un buen y largo ejercicio de aprendizaje esto de construir mi primer asistente. Me siento contento con el resultado, ya que logr√© alcanzar mi objetivo. Al mismo tiempo, reconozco que hay muchas cosas que se pueden mejorar para hacer que los resultados sean m√°s confiables y significativos. Adem√°s, hay mucha m√°s informaci√≥n que NWPI puede mostrar, por lo que las herramientas definitivamente se pueden ampliar.\nComo siguiente paso, planeo aprender LangChain adecuadamente y entender c√≥mo puedo implementar m√∫ltiples agentes para mejorar la funcionalidad y confiabilidad de mi asistente.\n¬°Espero que este post te ayude de la misma manera que la presentaci√≥n de Cisco Live me ayud√≥ a m√≠!\n","permalink":"https://netwithalex.blog/creando-mi-primer-asistente-ai-con-langchain/","summary":"Descubre c√≥mo los LLMs se pueden integrar con Cisco SD-WAN para hacer troubleshooting de manera sencilla y sin estr√©s","title":"Creando mi primer asistente de AI SD-WAN con Langchain"},{"content":"Introducci√≥n A medida que las redes evolucionan para ofrecer una mejor experiencia de usuario y se introducen nuevas tecnolog√≠as para gestionar la red, mantener todo funcionando sin problemas se ha vuelto cada vez m√°s dif√≠cil. Una de las responsabilidades m√°s cr√≠ticas del equipo de operaciones es hacer un seguimiento de los problemas que ocurren en toda la red. Identificarlos es solo el comienzo, luego deben ser registrados y gestionados hasta su resoluci√≥n. ¬°Multiplica la cantidad de acciones por incidente y tendr√°s suficiente para mantener ocupado a tu equipo de TI todo el d√≠a!\nEn este post, te mostrar√© lo que necesitas saber para integrar el SD-WAN Manager con ServiceNow para la gesti√≥n de incidentes. Veremos algunos de los problemas m√°s comunes en SD-WAN.\nConfiguraci√≥n de laboratorio Estoy utilizando la versi√≥n 20.12.1 de SD-WAN Manager y tengo una instancia de desarrollador de ServiceNow. Mi servidor de Webhook funciona en Ubuntu 20.04 LTS y constru√≠ el receptor de Webhook en lenguaje Go.\nPara simplificar las cosas, tengo comunicaci√≥n directa entre todos los elementos de mi laboratorio.\nWebhooks Los Webhooks son una manera en que las aplicaciones web se comunican entre s√≠ en tiempo real. Permiten que una aplicaci√≥n env√≠e notificaciones autom√°ticas a otra aplicaci√≥n cuando ocurre un evento espec√≠fico, lo que se conoce como el modelo push. Esto facilita la integraci√≥n entre diferentes sistemas y puede usarse para activar actividades automatizadas posteriores. Los Webhooks t√≠picamente utilizan callbacks HTTP para compartir notificaciones/informaci√≥n.\nEn nuestro escenario, el SD-WAN Manager monitorear√° eventos en BR10 y enviar√° solicitudes HTTP POST a nuestro servidor de Webhook cuando ocurran eventos espec√≠ficos. Esto nos permitir√° gestionar los incidentes en ServiceNow.\nAnatom√≠a de una notificaci√≥n webhook Comprendamos la estructura y la informaci√≥n que el SD-WAN Manager compartir√° con nuestro servidor Webhook.\nEste es un ejemplo de la informaci√≥n enviada cuando alguna interfaz va abajo\n{ \u0026#34;suppressed\u0026#34;: false, \u0026#34;devices\u0026#34;: [ { \u0026#34;system-ip\u0026#34;: \u0026#34;1.1.10.1\u0026#34; } ], \u0026#34;eventname\u0026#34;: \u0026#34;interface-state-change\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;interface-state-change\u0026#34;, \u0026#34;rulename\u0026#34;: \u0026#34;interface-state-change\u0026#34;, \u0026#34;component\u0026#34;: \u0026#34;VPN\u0026#34;, \u0026#34;entry_time\u0026#34;: 1709277345253, \u0026#34;statcycletime\u0026#34;: 1709277345253, \u0026#34;message\u0026#34;: \u0026#34;The interface oper-state changed to down\u0026#34;, \u0026#34;severity\u0026#34;: \u0026#34;Critical\u0026#34;, \u0026#34;severity_number\u0026#34;: 1, \u0026#34;uuid\u0026#34;: \u0026#34;9e2f7630-d504-4cdf-b808-fc8e29a6dd47\u0026#34;, \u0026#34;values\u0026#34;: [ { \u0026#34;host-name\u0026#34;: \u0026#34;BR10\u0026#34;, \u0026#34;system-ip\u0026#34;: \u0026#34;1.1.10.1\u0026#34;, \u0026#34;if-name\u0026#34;: \u0026#34;GigabitEthernet2\u0026#34;, \u0026#34;new-state\u0026#34;: \u0026#34;down\u0026#34;, \u0026#34;vpn-id\u0026#34;: \u0026#34;0\u0026#34; } ], \u0026#34;rule_name_display\u0026#34;: \u0026#34;Interface_State_Change\u0026#34;, \u0026#34;receive_time\u0026#34;: 1708843127894, \u0026#34;values_short_display\u0026#34;: [ { \u0026#34;host-name\u0026#34;: \u0026#34;BR10\u0026#34;, \u0026#34;system-ip\u0026#34;: \u0026#34;1.1.10.1\u0026#34;, \u0026#34;if-name\u0026#34;: \u0026#34;GigabitEthernet2\u0026#34;, \u0026#34;new-state\u0026#34;: \u0026#34;down\u0026#34; } ], \u0026#34;system_ip\u0026#34;: \u0026#34;1.1.10.1\u0026#34;, \u0026#34;host_name\u0026#34;: \u0026#34;BR10\u0026#34;, \u0026#34;acknowledged\u0026#34;: false, \u0026#34;active\u0026#34;: true } Veamos la informaci√≥n m√°s importante para nosotros:\n\u0026quot;active\u0026quot;: true - ¬øTenemos un problema? S√≠, indicado por el estado activo \u0026quot;message\u0026quot;: \u0026quot;The interface oper...\u0026quot; - ¬øQu√© est√° pasando? \u0026quot;severity_number\u0026quot;: 1 - ¬øQu√© tan malo es? (escog√≠ el numero y no el string a prop√≥sito) \u0026quot;uuid\u0026quot;: \u0026quot;9e2f7630-d504...d47\u0026quot; - Identificador del evento usado por el SD-WAN Manager \u0026quot;system_ip\u0026quot;: \u0026quot;1.1.10.1\u0026quot; - ¬øQu√© equipo origin√≥ la alerta? \u0026quot;host_name\u0026quot;: \u0026quot;BR10\u0026quot; - Identificador de equipo m√°s amigable para los humanos Veamos la notificaci√≥n cuando la interfaz se va arriba\n{ \u0026#34;suppressed\u0026#34;: false, \u0026#34;devices\u0026#34;: [ { \u0026#34;system-ip\u0026#34;: \u0026#34;1.1.10.1\u0026#34; } ], \u0026#34;eventname\u0026#34;: \u0026#34;interface-state-change\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;interface-state-change\u0026#34;, \u0026#34;rulename\u0026#34;: \u0026#34;interface-state-change\u0026#34;, \u0026#34;component\u0026#34;: \u0026#34;VPN\u0026#34;, \u0026#34;entry_time\u0026#34;: 1709277482508, \u0026#34;statcycletime\u0026#34;: 1709277482508, \u0026#34;message\u0026#34;: \u0026#34;The interface oper-state changed to up\u0026#34;, \u0026#34;severity\u0026#34;: \u0026#34;Medium\u0026#34;, \u0026#34;severity_number\u0026#34;: 3, \u0026#34;uuid\u0026#34;: \u0026#34;5486325c-d189-4467-9b5a-16acb1f28ec9\u0026#34;, \u0026#34;values\u0026#34;: [ { \u0026#34;host-name\u0026#34;: \u0026#34;BR10\u0026#34;, \u0026#34;system-ip\u0026#34;: \u0026#34;1.1.10.1\u0026#34;, \u0026#34;if-name\u0026#34;: \u0026#34;GigabitEthernet2\u0026#34;, \u0026#34;new-state\u0026#34;: \u0026#34;up\u0026#34;, \u0026#34;vpn-id\u0026#34;: \u0026#34;0\u0026#34; } ], \u0026#34;rule_name_display\u0026#34;: \u0026#34;Interface_State_Change\u0026#34;, \u0026#34;receive_time\u0026#34;: 1708843265147, \u0026#34;values_short_display\u0026#34;: [ { \u0026#34;host-name\u0026#34;: \u0026#34;BR10\u0026#34;, \u0026#34;system-ip\u0026#34;: \u0026#34;1.1.10.1\u0026#34;, \u0026#34;if-name\u0026#34;: \u0026#34;GigabitEthernet2\u0026#34;, \u0026#34;new-state\u0026#34;: \u0026#34;up\u0026#34; } ], \u0026#34;system_ip\u0026#34;: \u0026#34;1.1.10.1\u0026#34;, \u0026#34;host_name\u0026#34;: \u0026#34;BR10\u0026#34;, \u0026#34;acknowledged\u0026#34;: false, \u0026#34;cleared_events\u0026#34;: [ \u0026#34;9e2f7630-d504-4cdf-b808-fc8e29a6dd47\u0026#34; ], \u0026#34;active\u0026#34;: false } Las dos cosas m√°s importantes son:\n\u0026quot;active\u0026quot;: false - ya no est√° activo o presente \u0026quot;cleared_events\u0026quot;: [\u0026quot;9e2f7630-d504...d47]\u0026quot; - ID del evento que se resuelve Una cosa que debe saber es que no todos los eventos se comportar√°n de la misma manera. Algunos de ellos no tendr√°n una entrada de cleared_events, por lo que tendr√≠amos que manejarlos de manera diferente si queremos cerrarlos autom√°ticamente. Otros pueden carecer de cierta informaci√≥n dependiendo de lo que estemos monitoreando.\nAntes de codificar cualquier tipo de aplicaci√≥n, es importante saber lo que deseas monitorear y lo que obtendr√°s del SD-WAN Manager para que puedas manejarlo correctamente.\nConfiguraci√≥n de Webhooks en SD-WAN Manager El 20.12, es muy simple configurarlos, primero habilita la configuraci√≥n de notificaci√≥n desde Administration \u0026gt; Settings \u0026gt; Alarm Notifications\nDefinamos las reglas para activar nuestros webhooks. Desde Monitor \u0026gt; Logs \u0026gt; Alarm notification \u0026gt; Add Alarm Notification\nCosas que tienes que saber:\nPuedes elegir monitorear sitios o dispositivos. La severidad es crucial. Para abrir incidentes, generalmente querr√°s monitorear incidentes de severidad cr√≠tica o alta, y para cerrarlos necesitar√°s monitorear severidades m√°s bajas. Las alarmas para las que deseas generar webhooks, en nuestro caso: BFD nodo fuera de servicio/activo Omp nodo fuera de servicio/activo Nodo de control fuera de servicio/activo Interfaz fuera de servicio/activa Ten en cuenta que solo estoy usando HTTP en mi URL de webhook, se recomienda usar HTTPS para mayor seguridad. El 8080:/webhook proviene de la aplicaci√≥n que construimos. El threshold limitar√° la cantidad de notificaciones enviadas por minuto a esta URL. 15 es suficiente para m√≠, pero probablemente no lo sea para un entorno de producci√≥n. Por √∫ltimo, el usuario y la contrase√±a en caso de que tu aplicaci√≥n de webhook lo requiera. Estos valores se codificar√≠an y se enviar√≠an en los encabezados. Usa valores ficticios si no son necesarios. Construyendo el servidor webhook El c√≥digo que uso esta publicado en el siguiente Repo de Github, aqu√≠ lo explicar√© de una manera m√°s simple.\nPaso 1: Las solicitudes se esperan en el puerto 8080 al endpoint /webhook.\n// Listen upcoming requests http.HandleFunc(\u0026#34;/webhook\u0026#34;, handleWebhook) fmt.Println(\u0026#34;Server listening on port 8080...\u0026#34;) if err := http.ListenAndServe(\u0026#34;0.0.0.0:8080\u0026#34;, nil); err != nil { fmt.Printf(\u0026#34;Failed to start server: %v\u0026#34;, err) } Paso 2. Comprobar si la solicitudes tiene un estado activo. En caso afirmativo, creo un incidente en ServiceNow.\n//Verify if issue is active and create incident if data[\u0026#34;active\u0026#34;] == true { fmt.Println(\u0026#34;Opening Service Now incident...\u0026#34;) err := createIncident(data) Paso 2.1 Para abrir un incidente en ServiceNow, necesitamos reformatear la informaci√≥n que se enviar√° all√≠.\nfunc createIncident(data map[string]interface{}) error { // Retrieve information to open incident issueId := data[\u0026#34;uuid\u0026#34;].(string) ruleName := data[\u0026#34;rule_name_display\u0026#34;].(string) title := data[\u0026#34;message\u0026#34;].(string) severity := data[\u0026#34;severity_number\u0026#34;].(float64) severityStr := strconv.FormatFloat(severity, \u0026#39;f\u0026#39;, -1, 64) device := \u0026#34;. Device \u0026#34; + data[\u0026#34;host_name\u0026#34;].(string) + \u0026#34;, System-ip \u0026#34; + data[\u0026#34;system_ip\u0026#34;].(string) // Construct JSON payload for creating incident in SNOW incidentData := map[string]interface{}{ \u0026#34;category\u0026#34;: \u0026#34;network\u0026#34;, \u0026#34;caller_id\u0026#34;: \u0026#34;vManage\u0026#34;, \u0026#34;short_description\u0026#34;: issueId, \u0026#34;description\u0026#34;: ruleName + \u0026#34; - \u0026#34; + title + device, \u0026#34;urgency\u0026#34;: severityStr, \u0026#34;impact\u0026#34;: severityStr, } ... Observa que almaceno el uuid proveniente de vManage y lo usamos como short_description para ServiceNow.\nPaso 3.a Si el estado no es activo, verificamos si hay alg√∫n cleared_events incluido, esto nos dar√° una alta precisi√≥n al cerrar incidentes.\nif _, ok := data[\u0026#34;cleared_events\u0026#34;]; ok { ... clearedEvents, ok := data[\u0026#34;cleared_events\u0026#34;].([]interface{}) eventId := clearedEvents[0].(string) incidentExists, incident_id, err := getIncidentWithId(eventId) ... if incidentExists { err := closeIncident(incident_id) Para cerrar un caso, necesitamos tener el identificador de ServiceNow llamado sys_id. Para obtenerlo, usamos la funci√≥n getIncidentWithId.\nfunc getIncidentWithId(issueId string) (bool, string, error) { ... // Store Service Now \u0026#34;short_description\u0026#34; shortDescription, ok := incidentMap[\u0026#34;short_description\u0026#34;].(string) // Compare the short_description with the issueId if strings.Contains(shortDescription, issueId) { // If the short_description matches the issueId, return the incident id sys_id, ok := incidentMap[\u0026#34;sys_id\u0026#34;].(string) if !ok { continue } return true, sys_id, nil Paso 3.b Si el estado no es activo y no hay _cleared events_ incluidos, vamos a intentar encontrar el incidente que se abri√≥. Hay tres cosas que verificamos:\nRule Name - Los nombres de reglas para los eventos que estamos monitoreando tendr√°n la siguiente estructura _node_. Por ejemplo, BFD_Node_Down. Si estamos viendo BFD_Node_Up, cambiaremos \u0026ldquo;Up\u0026rdquo; por \u0026ldquo;Down\u0026rdquo; y buscaremos BFD_Node_Down en los incidentes devueltos desde ServiceNow. System Ip - Almacene el System-IP contenido en la notificaci√≥n y coincida con la descripci√≥n de cada incidente devuelto. Time - Almaceno el opened_at y verificamos si tiene menos de 12 horas. Esta es una medida totalmente subjetiva, pero mi idea es que los problemas que tardan m√°s de 12 horas en resolverse, tendr√≠an que ser verificados por alg√∫n humano. func getIncidentWoutId(ruleName, sysIp string, openTime float64) (bool, string, error) { ... // IncidentMap holds the incidents from Service Now description := incidentMap[\u0026#34;description\u0026#34;].(string) snowTime := incidentMap[\u0026#34;opened_at\u0026#34;].(string) newRuleName := strings.Replace(ruleName, \u0026#34;Up\u0026#34;, \u0026#34;Down\u0026#34;, -1) // Compare Rule Name, system ip and time if strings.Contains(description, newRuleName) \u0026amp;\u0026amp; strings.Contains(description, sysIp) \u0026amp;\u0026amp; diffHours \u0026lt; 12 { sys_id, ok := incidentMap[\u0026#34;sys_id\u0026#34;].(string) sys_id, ok := incidentMap[\u0026#34;sys_id\u0026#34;].(string) if !ok { continue } return true, sys_id, nil Paso 4. Cierra el caso con el sys_id obtenido a trav√©s de la funci√≥n getIncidentWoutId.\nif incidentExists { err := closeIncident(incident_id) if err != nil { fmt.Printf(\u0026#34;Error closing incident: %v\\n\u0026#34;, err) // Handle the error accordingly (e.g., log it, return, etc.) return } } else { fmt.Printf(\u0026#34;Incident doesn\u0026#39;t exist or is older than 12 hours\u0026#34;) } Demo Comenzaremos ejecutando la aplicaci√≥n en Go. Nota que no estoy usando VS Code para ejecutarla (Ctrl + F5), sino la terminal para permitir las conexiones entrantes.\nNotificaci√≥n de interfaz Apagamos una de las interfaces de servicio en el router:\nBR10-1#config-transaction BR10-1(config)# interface GigabitEthernet 2 BR10-1(config-if)# shutdown BR10-1(config-if)# commit Commit complete. El servidor recibe la notificaci√≥n y abre el incidente. El n√∫mero de incidente es el identificador ServiceNow (sys_id)\nTraigo la interfaz arriba y el incidente se cierra\nObserve que esta notificaci√≥n tiene la informaci√≥n de cleared_events, por lo que es muy f√°cil encontrar ese incidente en ServiceNow. Adem√°s, la severidad es \u0026lsquo;Medium\u0026rsquo;, por eso es importante establecer el valor correcto en la configuraci√≥n de Alarm Notifications.\nObserva que State es Resolved y Resolution Notes indica que el incidente se cerr√≥ autom√°ticamente a trav√©s de Webhooks.\nNotificaciones de BFD y Control Connections Bajemos las sesiones de control y BFD cerrando la apagando la interfaz de transporte\nBR10-1(config)# interface GigabitEthernet 1 BR10-1(config-if)# sh BR10-1(config-if)# commit Commit complete. Se reciben notificaciones y se crean incidentes\nCuando volvemos a habilitar la interfaz, recibimos las notificaciones y tambi√©n registramos el estado de la interfaz para la interfaz Gig 1 y Tunnel1. Todo esto se refleja en ServiceNow. Estas notificaciones de interfaz no fueron entregadas antes porque se perdi√≥ la conectividad con el SD-WAN Manager.\nLecciones aprendidas Es muy importante monitorear el nivel de severidad correcto, de lo contrario podr√≠amos perder notificaciones necesarias para cerrar los incidentes adecuadamente. El SD-WAN Manager puede generar muchas alertas, por lo que el umbral del webhook se vuelve muy importante. Deber√≠as probar para encontrar el n√∫mero que funcione para tu entorno. ServiceNow asignar√° una prioridad en funci√≥n de la urgencia e impacto utilizados para crear el ticket. ServiceNow puede tener pol√≠ticas que te impidan cerrar incidentes si cierta informaci√≥n no est√° presente en la interfaz. Familiar√≠zate un poco con las pol√≠ticas en la interfaz gr√°fica y Data Policies. Aunque puedes establecer manualmente el \u0026ldquo;sys_id\u0026rdquo; en ServiceNow mediante APIs, sugiero dejarlo como est√°, ya que poner valores manuales podr√≠a causar problemas en el futuro, y este campo debe ser √∫nico en tu instancia. Te recomiendo usar el valor generado autom√°ticamente. Puedes usar sitios p√∫blicos como este para ver f√°cilmente el contenido de las notificaciones mientras planificas tus casos de uso. Conclusi√≥n Los webhooks son una excelente manera de monitorear nuestro entorno. Al ser notificado exactamente cu√°ndo ocurre un problema en lugar de confiar en encuestas continuas, aumente nuestra capacidad de iniciar sesi√≥n y reaccionar r√°pidamente a lo que est√© sucediendo. Puede combinar webhooks con otro tipo de alertas, como correos electr√≥nicos o incluso chat (webex, holgura, etc.) en caso de que necesite alertar a diferentes equipos. Espero que esta publicaci√≥n te haya dado algunas ideas o active tu curiosidad.\n¬°Gracias por leerme!\n","permalink":"https://netwithalex.blog/rastreando-incidentes-de-sdwan-con-servicenow/","summary":"Aprenda a integrar Cisco SD-WAN con ServiceNow y automatiza la gesti√≥n de incidentes","title":"Seguimiento de incidentes SD-WAN con ServiceNow"},{"content":"Introducci√≥n Las Redes Definidas por Software (SDN) llegaron con la promesa de simplificar la administraci√≥n de la red, permitiendo a los equipos de redes automatizar y adoptar un enfoque program√°tico. Cisco cre√≥ soluciones como Catalyst Center, ACI, Meraki y Viptela SD-WAN. Esta √∫ltima introdujo nuevos controladores que cambiaron las reglas que rigen el funcionamiento de la red WAN.\nLas organizaciones que no estaban listas para dar el salto completo a SD-WAN, pero que a√∫n deseaban los beneficios de los principios de SDN, ten√≠an opciones limitadas, como integrarse con sistemas de terceros o depender de Catalyst Center. Aunque estas soluciones resolv√≠an algunos desaf√≠os, qued√≥ una brecha significativa sin cubrir hasta que lleg√≥\u0026hellip; ¬°SD-Routing!\n¬øQu√© es SD-Routing? En t√©rminos simples, SD-Routing es el punto medio entre SDN y SD-WAN. Con SD-Routing, las organizaciones pueden adoptar de manera gradual el enfoque de redes definidas por software en su infraestructura existente.\nLa idea detr√°s de esto es administrar la red no-SD-WAN (tambi√©n conocida como \u0026ldquo;tradicional\u0026rdquo;) desde un Single Pane of Glass llamado SD-WAN Manager (anteriormente vManage). ¬°Por supuesto, tambi√©n es posible gestionar dispositivos SD-WAN al mismo tiempo!\nA diferencia de SD-WAN, no es necesario conectarse al SD-WAN Controller (anteriormente vSmart), por lo que los protocolos de ruteo existentes se mantienen. Adem√°s, se obtiene una capa de seguridad adicional con el SD-WAN Validator (anteriormente vBond), que se encarga de permitir la conexi√≥n solo a los dispositivos autorizados.\nBeneficios Algunos de los beneficios de SD-Routing incluyen:\nOnboarding ‚Äì Los nuevos dispositivos pueden integrarse de forma f√°cil y r√°pida utilizando SD-WAN Manager. Configuraci√≥n ‚Äì Administra la configuraci√≥n de tus dispositivos desde un √∫nico lugar mediante un m√©todo reutilizable llamado Configuration Groups, que permite escalar m√°s r√°pido. Adem√°s, cuenta con workflows optimizados para pol√≠ticas de seguridad y conectividad a la nube. Monitoreo ‚Äì Supervisa tus dispositivos, sitios y aplicaciones. Recibe alertas y eventos, y aprovecha las capacidades de notificaci√≥n de SD-WAN Manager. Gesti√≥n de software ‚Äì Distribuye, instala y activa im√°genes de software de manera sencilla y r√°pida en uno o varios dispositivos. Troubleshooting ‚Äì Ejecuta diversas operaciones desde vManage, como sesiones SSH, pruebas de velocidad, traceroutes y m√°s. Transici√≥n a SD-WAN ‚Äì Si planeas implementar SD-WAN, SD-Routing es un excelente punto de partida para familiarizarte con SD-WAN Manager y simplificar la migraci√≥n. üöÄ Descripci√≥n general del SD-WAN Manager D√©jame darte un recorrido r√°pido por el SD-WAN Manager y un vistazo a algunas de las caracter√≠sticas. Si ya lo conoces, probablemente a√∫n te sorprender√° el nuevo aspecto del 20.13. ¬°Te lo ense√±o!\nDescripci√≥n general de la red Cuando iniciamos sesi√≥n por primera vez, se presenta un overview de la red para que podamos determinar r√°pidamente cu√°ntos dispositivos y controladores est√°n conectados, informaci√≥n de las aplicaciones, sal√∫d de los equipos y m√°s.\nOye, ¬øa d√≥nde se fue el Controller (vSmart)?\nSD-WAN Manager 20.13\nLa apariencia magn√©tica te recordar√° a otros productos de seguridad de Cisco o Meraki, esto es genial para mantener la experiencia consistente. Observe que arriba a la derecha hay un bot√≥n que te permite activar el modo SD-Routing, esto es muy √∫til para mostrar la informaci√≥n referente a SD-Routing y la raz√≥n por la que no vemos el Controller.\nMonitoreo de red Si queremos ver informaci√≥n m√°s detallada del dispositivo, podemos visitar la pesta√±a devices. SD-WAN Manager est√° constantemente actualizando esta informaci√≥n, por lo que tenemos una vista precisa. Nota como los dispositivos se muestran como SD-Ruting.\nBR20 no tiene una buena salud debido a la alta utilizaci√≥n de la memoria, ¬øpodr√≠amos saber cu√°ndo comenz√≥ esto? Hagamos doble clic en √©l.\nComenz√≥ a ir m√°s all√° del 75% alrededor de las 12:30, esto se debi√≥ a que activ√© Performance Monitor para obtener informaci√≥n del rendimiento de las aplicaciones.\nCentr√©monos en el men√∫ izquierdo, mira las opciones de monitoreo disponibles que incluyen aplicaciones, funciones de seguridad e informaci√≥n en tiempo real. La secci√≥n Troubleshooting es el lugar para usar las herramientas que mencion√© anteriormente.\nConfiguraci√≥n En las versiones 20.13/17.13 se agreg√≥ soporte para SD-Routing Configuration Groups. Con ellos, puedes crear Feature Profiles basados en parcels, que son elementos individuales que, en conjunto, conforman toda la configuraci√≥n del router.\nEn la versi√≥n 20.13, los siguientes parcels est√°n disponibles:\nTenemos el CLI Configuration Profile para aplicar cualquier configuraci√≥n que no est√© disponible a trav√©s de parcels. Podemos definir variables para hacer nuestro Profile reutilizable en m√∫ltiples dispositivos. Tambi√©n es posible usar un CLI Profile completo en lugar de parcels.\nPor cierto, si tienes una combinaci√≥n de dispositivos SD-WAN y SD-Routing, ver√°s ambos Configuration Groups en la lista. Actualmente, SD-WAN tiene un conjunto m√°s amplio de parcels, pero con el tiempo, SD-Routing tambi√©n recibir√° m√°s configuraciones sin depender de CLI.\nWorkflows La workflows library nos ayudar√° a realizar f√°cilmente ciertas acciones como onboarding, configuraci√≥n de seguridad, actualizaciones de software, entre otras.\nEn lugar de hacer clic en m√∫ltiples p√°ginas, podemos seguir un flujo paso a paso con toda la informaci√≥n necesaria en un solo lugar. Personalmente, me gusta c√≥mo los workflows simplifican las cosas.\nConectividad con la nube Es muy probable que tu organizaci√≥n utilice alg√∫n tipo de conectividad a la nube, ya sea para acceder a aplicaciones o ejecutar cargas de trabajo. SD-Routing cubre esta necesidad.\nPuedes automatizar la conexi√≥n con el proveedor de nube, extendiendo tu red para acceder a esos recursos sin complicaciones.\nHay m√∫ltiples opciones. Tambi√©n se proporciona algo de esto para SD-WAN, por lo que recomiendo verificar la Gu√≠a de configuraci√≥n de SD-Routing.\nConclusi√≥n El prop√≥sito de esta publicaci√≥n es mostrar lo que es posible con SD-Routing y el vac√≠o que busca llenar. Adoptar esta tecnolog√≠a puede impactar positivamente los flujos de trabajo operativos, mejorar la agilidad de la red y optimizar la utilizaci√≥n de recursos.\nSi tu organizaci√≥n a√∫n no ha adoptado ninguna forma de SDN, te invito a reflexionar sobre tus procesos diarios, identificar los principales desaf√≠os y pensar en c√≥mo SD-Routing podr√≠a ayudarte a resolverlos.\n¬°D√©jame saber qu√© opinas y nos vemos en el pr√≥ximo post! üöÄ\n","permalink":"https://netwithalex.blog/sd-routing-revoluciona-la-gestion-de-red/","summary":"Explora c√≥mo SD-Ruting puede ayudarte de manera simple y efectiva a administrar y monitorear equipos aut√≥nomos (IOX-XE regular, sin SD-WAN).","title":"Un nuevo cap√≠tulo: SD-Routing revoluciona la gesti√≥n de red"},{"content":"Introducci√≥n Para la publicaci√≥n final de esta serie, exploremos la opci√≥n restante para manejar el tr√°fico cuando no se cumple SLA: Fallback a Best Path. Se introdujo en 20.5/17.5 y proporciona m√°s flexibilidad y selecci√≥n de ruta mejorada en comparaci√≥n con las otras opciones. Entendamos por qu√© fue creado.\nMotivaci√≥n Con los [m√©todos anteriores] (/desmitificaci√≥n-AAR-Enderstanding-Diferent-SceneRios/), el tr√°fico lo har√≠a:\nse eliminar√°, rara vez se usan casos de uso espec√≠ficos que se aplican a una peque√±a cantidad de entornos. Est√© equilibrado en las rutas disponibles, ampliamente utilizada, sin embargo, el tr√°fico podr√≠a estar utilizando la ruta de peor desempe√±o. Tome el siguiente ejemplo\nTunnel 2 claramente tiene el peor rendimiento, sin embargo, con el m√©todo load balance, el tr√°fico a√∫n podr√≠a usarlo en funci√≥n del algoritmo de hash. ¬øC√≥mo superamos esta situaci√≥n? Probablemente lo hayas adivinado: _ ** Falta a la mejor ruta ** _\nFuerte a la mejor ruta Veamos c√≥mo lo describe la documentaci√≥n:\nCuando el tr√°fico de datos no cumple con ninguno de los requisitos de la clase SLA, esta caracter√≠stica le permite seleccionar la mejor secuencia de criterios de ruta del t√∫nel utilizando el t√∫nel mejor alternativo.\nEl gerente de Cisco SD-WAN usa Best of Weor (Bow) para encontrar el mejor t√∫nel cuando ning√∫n t√∫nel cumple con ninguno de los requisitos de la clase SLA.\nhttps://www.cisco.com/c/en/us/td/docs/routers/sdwan/configuration/policies/ios-xe-17/policies-book-xe/application-ware-routing.html\nlo mejor de lo peor Veamos c√≥mo funciona Bow con el siguiente ejemplo:\nEl requisito de latencia de SLA se establece en 8. Ninguno de los t√∫neles lo satisface, pero el t√∫nel 1 es el m√°s cercano, lo que lo convierte en lo mejor de peor con una latencia de 10.\nLos criterios para elegir el arco son extremadamente flexibles, en este ejemplo utilizamos latencia, otras opciones podr√≠an ser:\nLatencia - Solo latencia Jitter - Solo jitter P√©rdida - Solo p√©rdida Latencia/Jitter - Primera latencia, si son iguales, entonces Jitter Latencia/p√©rdida - Primera latencia, si son iguales, entonces p√©rdida Jitter/Latencia - Primer jitter, si son iguales, entonces latencia -. . . p√©rdida/jitter/latencia - Primera p√©rdida, luego fase, luego latencia Varianza Vamos un paso m√°s all√°, el t√∫nel 3 tambi√©n est√° muy cerca de la latencia 8 ms, no ser√≠a una mala idea enviar tr√°fico tambi√©n en ese t√∫nel. ¬øC√≥mo logramos esto? Bueno, podemos implementar un variance para acomodar peque√±as variaciones al elegir las mejores rutas.\nContinuando con este ejemplo, echemos un vistazo a la selecci√≥n de arco con una `varianza de 5 ms \u0026lsquo;.\nBow Range = (mejor latencia, mejor latencia + varianza) Rango de arco = (10, 15) La mejor latencia en los t√∫neles es 10 (T√∫nel 1), observe que esto ** no es ** la latencia configurada en el SLA. Con esta varianza, si alg√∫n otro t√∫nel tiene una latencia entre 10 y 15, tambi√©n se eligir√° para enviar tr√°fico. En nuestro ejemplo, el t√∫nel 3 satisface la condici√≥n, por lo que ahora el t√∫nel 1 y el t√∫nel 3 se utilizar√°n como t√∫neles fallback.\nComo puede ver, el t√∫nel 2 ya no se considera. ¬°Excelente!\nConfiguraci√≥n Clase SLA Para usar este m√©todo, lo primero que debemos hacer es modificar nuestra clase SLA para indicar que debe buscar la ruta de mejor rendimiento cuando no se cumple SLA. Nuestra configuraci√≥n se ve as√≠:\nSLA-CLASS Custom-SLA P√©rdida 1 Latencia 250 Jitter 100 alero-mejor t√∫nel p√©rdida de criterios Varianza de p√©rdidas 2 Observe que seleccionamos el criteria para ser p√©rdida 'y un _variance_ de 2`. La varianza es un par√°metro ** opcional **.\nPol√≠tica AAR A continuaci√≥n, en la pol√≠tica de AAR especificamos la acci√≥n cuando no se cumple SLA: Fallback a Best Path\nsecuencia 1 f√≥sforo Fuente-IP 172.16.10.0/24 Destino-IP 172.16.20.0/24 acci√≥n SLA-CLASS Custom-SLA No hay clase SLA estricta MPLS de color de clase SLA SLA-Class Fallback-to-Best-Path Mantengamos la misma din√°mica y construamos un diagrama:\nEscenarios Usando la misma topolog√≠a exploremos algunas situaciones\nMPLS compatible, biz-internet/private1 no conforme Iniciar√© el tr√°fico de Branch10 -\u0026gt; Branch 20 y lo capturar√© con NWPI. MPLS tiene m√©tricas KPI perfectas (0, 0, 0)\nObserve c√≥mo fallback to Best Path se establece en `no \u0026lsquo;y el tr√°fico coincide con el SLA y el color preferido. Veamos tambi√©n el siguiente comando de verificaci√≥n de BR10. `` BR10#show sdwan tunnel sla \u0026lt;. . .\u0026gt; T√∫nel SLA-Class 1 SLA-NAME Custom-SLA SLA-Loss 1 SLA-Latencia 250 sla-jitter 100 RETROCEDER Remoto t sla sla Sistema DST SRC Local t remota media media media clase de clase PROTO SRC IP DST Puerto IP Puerto IP Color P√©rdida de color P√©rdida de latencia Jitter √çndice SLA Nombre de clase √çndice Gre 21.1.10.2 21.1.20.2 0 0 1.1.0.20 MPLS MPLS 0 0 0 0,1 all_tunnels, Custom-SLA Ninguno Gre 21.1.10.2 31.1.20.2 0 0 1.1.0.20 MPLS Biz-Internet 0 0 0 0,1 all_tunnels, Custom-SLA Ninguno GRE 21.1.10.2 41.1.20.2 0 0 1.1.0.20 MPLS Private1 0 0 0 0,1 all_tunnels, Custom-SLA Ninguno ``\nAlgunos comentarios sobre este resultado:\nEl hecho de que veamos t√∫neles enumerados en Custom-SLA, nos dice que hay t√∫neles que cumplen con la p√©rdida, la latencia y la fluctuaci√≥n. Esto se espera ya que nuestro MPLS est√° teniendo m√©tricas perfectas. Vea que esta clase SLA tiene un identificador num√©rico de 1-T√∫nel SLA-Class 1. Ver√° referencia a este n√∫mero en breve. Fallback SLA Class Index est√° configurado en Ninguno, esto significa que estos t√∫neles no se est√°n utilizando como t√∫neles de respaldo, esto quedar√° claro en un segundo. mpls/biz-inernet/private1 no conforma pero varianza de reuni√≥n Ahora que no tenemos transportes que cumplan con el SLA, verifiquemos c√≥mo lo mostrar√° NWPI:\nObserve que ahora NWPI est√° indicando que fallback a la mejor ruta est√° en uso.\nPrivate1 fue elegido para enviar este flujo en particular, pero ¬øhay otros t√∫neles que pudieran usarse? Vamos a ver BR10 nuevamente.\n`` BR10# show sdwan tunnel sla T√∫nel SLA-Class 0 sla-name all_tunnels SLA-Loss 0 SLA-Latencia 0 sla-jitter 0 RETROCEDER SLA SLA remoto Sistema DST SRC T Local T Remote media media media clase PROTO SRC IP DST Puerto IP Puerto IP Color P√©rdida de color P√©rdida de latencia Jitter √çndice SLA Nombre de clase √çndice Gre 21.1.10.2 21.1.20.2 0 0 1.1.0.20 MPLS MPLS 18 0 0 0 0 all_tunnels Ninguno GRE 21.1.10.2 31.1.20.2 0 0 1.1.0.20 MPLS Biz-Internet 9 0 0 0 all_tunnels Ninguno Gre 21.1.10.2 41.1.20.2 0 0 1.1.0.20 MPLS Private1 11 0 0 0 all_tunnels Ninguno Gre 31.1.10.2 21.1.20.2 0 0 1.1.0.20 Biz-Internet Mpls 4 0 0 0 all_tunnels 1 Gre 31.1.10.2 31.1.20.2 0 0 1.1.0.20 Biz-Internet Biz-Internet 2 0 0 0 0 all_tunnels 1 Gre 31.1.10.2 41.1.20.2 0 0 1.1.0.20 Biz-Internet Private1 4 0 0 0 all_tunnels 1 GRE 41.1.10.2 21.1.20.2 0 0 1.1.0.20 Private1 MPLS 3 0 0 0 0 all_tunnels 1 GRE 41.1.10.2 31.1.20.2 0 0 1.1.0.20 Private1 Biz-Internet 6 0 0 0 all_tunnels Ninguno GRE 41.1.10.2 41.1.20.2 0 0 1.1.0.20 Private1 Private1 3 0 0 0 0 all_tunnels 1\nT√∫nel SLA-Class 1 SLA-NAME Custom-SLA SLA-Loss 1 SLA-Latencia 250 sla-jitter 100\nBR10# ``\nComentarios sobre este resultado:\nHay ** no ** t√∫neles que cumplen con nuestro custom-sla Incluso si MPLS es el color preferido, ** no es ** considerado porque no cumple con el rango de varianza de p√©rdida. Hay 5 t√∫neles que satisfacen la varianza. Observe c√≥mo algunos t√∫neles tienen una clase SLA de Fallback SLA Index establecido en 1, lo que significa que est√°n sirviendo como alternativos para SLA-Class 1 (Custom-SLA). En este caso, el ** arco ** es biz-instantet-biz-insternet tunnel con una p√©rdida media de 2. El variance se establece en 2, por lo que el rango de arco es 2-4. Los t√∫neles que satisfacen la gama de arco tambi√©n se utilizar√°n para reenviar el tr√°fico. Dependiendo del hash de equilibrio de carga, se eligir√°n diferentes t√∫neles `` BR10#show Sdwan Policy Service-Path VPN 10 Interfaz GigabitEthernet 3 Fuente-IP 172.16.10.2 Dest-IP 172.16.20.2 Protocolo 6 Dest-Port 22 Siguiente salto: Gre Fuente: 31.1.10.2 Destino: 21.1.20.2 Color local: Biz-Internet Color remoto: Sistema remoto MPLS IP: 1.1.0.20\nBR10#show SDWAN Policy Service-Path VPN 10 Interfaz GigabitEthernet 3 Fuente-IP 172.16.10.56 Dest-IP 172.16.20.2 Protocolo 6 Dest-Port 24 Siguiente salto: Gre Fuente: 31.1.10.2 Destino: 41.1.20.2 Color local: Biz-Internet Color remoto: Private1 Sistema remoto IP: 1.1.0.20 ``\nPodemos ver dos t√∫neles diferentes biz -internet - mpls y biz -internet - privado\nLatencia fuera de cumplimiento Hasta ahora hemos estado jugando solo con p√©rdida, porque los criterios de alojamiento estaban establecidos en la p√©rdida. Veamos qu√© sucede cuando un criterio diferente no se cumple. Establecer√© la latencia del SLA a 15 ms. .\n`` BR10#show sdwan pol√≠tica de vsmart From-vsmart SLA-Class Custom-SLA P√©rdida 1 latencia 15 Jitter 100 alero-mejor t√∫nel p√©rdida de criterios Varianza de p√©rdidas 2\n``\nDespu√©s de presentar algo de latencia, vemos algo interesante:\n`` BR10#show sdwan tunnel sla T√∫nel SLA-Class 0 sla-name all_tunnels SLA-Loss 0 SLA-Latencia 0 sla-jitter 0 RETROCEDER SLA SLA remoto Sistema DST SRC T Local T Remote media media media clase PROTO SRC IP DST Puerto IP Puerto IP Color P√©rdida de color P√©rdida de latencia Jitter √çndice SLA Nombre de clase √çndice Gre 21.1.10.2 21.1.20.2 0 0 1.1.0.20 MPLS MPLS 0 20 1 0 all_tunnels 1 GRE 21.1.10.2 31.1.20.2 0 0 1.1.0.20 MPLS Biz-Internet 0 20 1 0 all_tunnels 1 Gre 21.1.10.2 41.1.20.2 0 0 1.1.0.20 MPLS Private1 0 20 0 0 all_tunnels 1 Gre 31.1.10.2 21.1.20.2 0 0 1.1.0.20 Biz-Internet Mpls 0 21 2 0 all_tunnels 1 Gre 31.1.10.2 31.1.20.2 0 0 1.1.0.20 Biz-Internet Biz-Internet 0 21 2 0 all_tunnels 1 Gre 31.1.10.2 41.1.20.2 0 0 1.1.0.20 Biz-Internet Private1 0 21 2 0 all_tunnels 1 Gre 41.1.10.2 21.1.20.2 0 0 1.1.0.20 Private1 MPLS 0 16 1 0 all_tunnels 1 GRE 41.1.10.2 31.1.20.2 0 0 1.1.0.20 Privado1 Biz-Internet 0 16 0 0 all_tunnels 1 GRE 41.1.10.2 41.1.20.2 0 0 1.1.0.20 Private1 Private1 0 16 0 0 all_tunnels 1\nT√∫nel SLA-Class 1 SLA-NAME Custom-SLA SLA-Loss 1 SLA-Latencia 15 sla-jitter 100\nBR10# ``\n¬°Todos los t√∫neles se usan como t√∫neles respaldados porque todos tienen un 0% de p√©rdida! ¬øEs esta la situaci√≥n ideal? Esto es discutible, tal vez para algunos tipos de tr√°fico est√° bien, pero para otros probablemente desee tener un segundo o tercer criterio para elegir los mejores t√∫neles de respaldo.\nCriterios de arco m√∫ltiple Para la √∫ltima prueba, veamos qu√© sucede cuando seleccionamos m√∫ltiples criterios para seleccionar el arco. Agregar√© latencia a los criterios de SLA.\nBR10#show sdwan pol√≠tica de vsmart From-vsmart SLA-Class Custom-SLA P√©rdida 1 latencia 15 Jitter 100 alero-mejor t√∫nel latencia de p√©rdida de criterios Varianza de p√©rdidas 2 Lo que esperamos es que si alguno de los KPI no cumple, el arco se decidir√° en base a:\nP√©rdida media m√°s baja. Si hay un empate, entonces Latencia m√°s baja Verifiquemos `` BR10#show sdwan tunnel sla T√∫nel SLA-Class 0 sla-name all_tunnels SLA-Loss 0 SLA-Latencia 0 sla-jitter 0 RETROCEDER SLA SLA remoto Sistema DST SRC T Local T Remote media media media clase PROTO SRC IP DST Puerto IP Puerto IP Color P√©rdida de color P√©rdida de latencia Jitter √çndice SLA Nombre de clase √çndice Gre 21.1.10.2 21.1.20.2 0 0 1.1.0.20 MPLS MPLS 0 20 1 0 all_tunnels Ninguno Gre 21.1.10.2 31.1.20.2 0 0 1.1.0.20 MPLS Biz-Internet 0 20 1 0 all_tunnels Ninguno Gre 21.1.10.2 41.1.20.2 0 0 1.1.0.20 MPLS Private1 0 20 1 0 all_tunnels Ninguno Gre 31.1.10.2 21.1.20.2 0 0 1.1.0.20 Biz-Internet Mpls 0 20 1 0 all_tunnels Ninguno Gre 31.1.10.2 31.1.20.2 0 0 1.1.0.20 Biz-Internet Biz-Internet 0 20 1 0 all_tunnels Ninguno Gre 31.1.10.2 41.1.20.2 0 0 1.1.0.20 Biz-Internet Private1 0 21 1 0 all_tunnels Ninguno GRE 41.1.10.2 21.1.20.2 0 0 1.1.0.20 Private1 Mpls 0 16 0 0 all_tunnels 1 GRE 41.1.10.2 31.1.20.2 0 0 1.1.0.20 Privado1 Biz-Internet 0 16 0 0 all_tunnels 1 GRE 41.1.10.2 41.1.20.2 0 0 1.1.0.20 Private1 Private1 0 16 0 0 all_tunnels 1\nT√∫nel SLA-Class 1 SLA-NAME Custom-SLA SLA-Loss 1 SLA-Latencia 15 sla-jitter 100\nBR10# ``\nEst√° claro que la p√©rdida no se us√≥ para elaborar el arco, de lo contrario, ver√≠amos todos los t√∫neles actuando como respaldo para el √≠ndice de clase SLA 1. En cambio, se seleccionaron t√∫neles con latencia m√°s baja. Tenga en cuenta que podr√≠a haber agregado una varianza de latencia para incluir otros t√∫neles con n√∫meros similares.\nConclusi√≥n A trav√©s de las √∫ltimas tres publicaciones, hemos sido testigos de AAR como una funcionalidad cr√≠tica de SD-WAN para proteger el SLA de nuestras aplicaciones. Espero que despu√©s de explicar y verificar diferentes escenarios, ahora tenga una mejor comprensi√≥n y se sienta m√°s seguro de probar AAR dentro de su infraestructura SD-WAN. Gu√≠a] (https://www.cisco.com/c/en/us/td/docs/routers/sdwan/configuration/policies/ios-xe-17/policies-book-xe/application-ware-routing.html#config-variance-best-tunnel-path) es muy completo, lo que est√° familiarizado con it y use lo necesita.\nD√©jame saber tus pensamientos en los comentarios.\n¬°Nos vemos pronto!\n","permalink":"https://netwithalex.blog/simplificando-aar-3-3-fallback-to-best-path/","summary":"Aprende c√≥mo AAR puede ayudarte a mejorar la experiencia del usuario y aplicaci√≥n con Cisco SD-WAN","title":"Simplificando AAR: 3/3 Fallback to Best Path"},{"content":"Introducci√≥n Bienvenido de nuevo a la segunda entrega de mi serie en Application Aware Routing (AAR). En mi publicaci√≥n anterior, discutimos los conceptos b√°sicos de BFD y SLAs, estableciendo las bases para comprender c√≥mo AAR optimiza el rendimiento de la red en funci√≥n de los requisitos de las aplicaciones. Tambi√©n tocamos brevemente la configuraci√≥n de AAR con un ejemplo simple.\nAhora, vamos a ver en profundidad diferentes configuraciones de AAR cuando no hay t√∫neles que cumplan con los SLAs, m√°s espec√≠ficamente nos concentraremos en el comportamiento de strict/drop y Preferred Backup SLA.\nTopolog√≠a y configuraci√≥n inicial Comencemos con una topolog√≠a simple\nNo estoy limitando los t√∫neles entre los colores, por lo que tenemos un total de 4 t√∫neles en cada borde WAN.\nmpls - mpls mpls - biz-inet biz-inet- mpls biz-inet - biz-inet Este es el Hello interval de BFD y la configuraci√≥n de app-route para todos los dispositivos; esto es lo m√°s relevante para AAR. Si no est√°s familiarizado con ello, te recomiendo que revises mi √∫ltima publicaci√≥n antes de continuar.\nhello-interval 1000 bfd app-route multiplier 3 bfd app-route poll-interval 120000 Escenario 1: SLA not met - Strict/Drop Nuestra pol√≠tica de AAR est√° usando el SLA Business-Critical. Vou a introducir p√©rdida de paquetes para demostrar c√≥mo cambia el tr√°fico.\nBR10#show sdwan policy from-vsmart from-vsmart sla-class Business-Critical loss 1 latency 250 jitter 100 from-vsmart app-route-policy _VPN10_AAR vpn-list VPN10 sequence 1 match source-ip 172.16.10.0/24 destination-ip 172.16.20.0/24 action sla-class Business-Critical sla-class strict sla-class preferred-color mpls sequence 11 match source-ip 172.16.20.0/24 destination-ip 172.16.10.0/24 action sla-class Business-Critical sla-class strict sla-class preferred-color mpls from-vsmart lists vpn-list VPN10 vpn 10 Leamos lo que dice la documentaci√≥n sobre nuestra configuraci√≥n:\nsla-class preferred-color mpls\nsla-class sla-class-name preferred-color color - Para configurar un t√∫nel espec√≠fico para el tr√°fico de datos que cumpla con una clase de SLA, incluye la opci√≥n preferred-color, especificando el color del t√∫nel preferido. Si m√°s de un t√∫nel cumple con el SLA, el tr√°fico se enviar√° a trav√©s del t√∫nel preferido. Si no hay un t√∫nel del color preferido disponible, el tr√°fico se enviar√° a trav√©s de cualquier t√∫nel que cumpla con la clase de SLA. Si ning√∫n t√∫nel cumple con el SLA, el tr√°fico de datos se enviar√° a trav√©s de cualquier t√∫nel disponible.\nhttps://www.cisco.com/c/en/us/td/docs/routers/sdwan/configuration/policies/ios-xe-17/policies-book-xe/application-aware-routing.html\nAqu√≠ hay un diagrama para visualizarlo mejor:\nTen en cuenta que incluso si tanto Biz-Internet como MPLS cumplen con el SLA, solo se utilizar√° MPLS.\nS√≠, Biz-Internet se utilizar√° incluso si no est√° especificado como un color preferido si el color preferido no cumple con el SLA. Desde mi experiencia, esta es una fuente frecuente de confusi√≥n, ya que la expectativa suele ser que, si MPLS no cumple con el SLA, se ejecutar√° la acci√≥n de SLA not met sin considerar el resto de los colores.\nsla-class strict\nHaz clic en Strict/Drop para hacer un match estricto de la clase SLA. Si no hay un t√∫nel de plano de datos disponible que satisfaga los criterios de SLA, se tira el tr√°fico.\nhttps://www.cisco.com/c/en/us/td/docs/routers/sdwan/configuration/policies/ios-xe-17/policies-book-xe/application-ware-routing.html\nAhora el diagrama se ve as√≠:\nPrueba 1 - MPLS/Biz-internet cumplen SLA Inicio el tr√°fico de Branch 10 -\u0026gt; Branch 20 y lo capturo con NWPI. Tanto MPLS como Biz-Internet est√°n teniendo m√©tricas de KPI perfectas (0 p√©rdida, 0 latencia, 0 jitter)\nBR10-PC1#ssh -l admin 172.16.20.2 Password: Podemos ver que el color Actual Color mpls y Tunnel Match Reason is Matched sla and pref encap color. Todo funcionando de acuerdo con nuestra definici√≥n de pol√≠tica.\nPrueba 2- Biz-internet cumple, MPLS no cumple con SLA Introduzco el 3% de p√©rdida de paquetes en el enlace MPLS. Veamos qu√© pasa.\nAhora, nuestro t√∫nel MPLS est√° por encima del 1% de p√©rdida, por lo que ya no es elegible. Confirmamos que el t√∫nel biz-internet se usa porque cumple con el sla - Tunnel match reason es matched sla and color any\nPrueba 3-MPLS/Biz-internet no cumplen SLA Nuestra √∫ltima prueba para este escenario ser√° estropear los SLA para ambos transportes. Nuevamente, introduzco el 3% de p√©rdida de paquetes en ambos MPLS y Biz-internet.\nComo se esperaba, ahora el tr√°fico se est√° tirando en BR10, ya que no hay transportes que coincidan con el SLA. Nota como DROP_REPORT indica SdwanDataPolicyDrop\nEscenario 2: Backup SLA Preferred Color Exploremos un nuevo escenario, agregaremos un transporte adicional.\nNuestra configuraci√≥n de pol√≠ticas tendr√° ligeros cambios. Es importante destacar que, al usar la opci√≥n Backup SLA preferred color, la √∫nica acci√≥n disponible cuando el SLA no se cumple ser√° Load Balance.\nBR10#show sdwan policy from-vsmart from-vsmart sla-class Business-Critical loss 1 latency 250 jitter 100 from-vsmart app-route-policy _VPN10_AAR vpn-list VPN10 sequence 1 match source-ip 172.16.10.0/24 destination-ip 172.16.20.0/24 action backup-sla-preferred-color private1 sla-class Business-Critical no sla-class strict sla-class preferred-color mpls sequence 11 match source-ip 172.16.20.0/24 destination-ip 172.16.10.0/24 action backup-sla-preferred-color private1 sla-class Business-Critical no sla-class strict sla-class preferred-color mpls from-vsmart lists vpn-list VPN10 vpn 10 Nuevamente, veamos qu√© dice la documentaci√≥n:\nbackup-sla-preferred-color private1\nCuando ning√∫n t√∫nel cumple con el SLA, se puede elegir c√≥mo manejar el tr√°fico:\nbackup-sla-preferred-color colors: Dirige el tr√°fico de datos a un t√∫nel espec√≠fico. El tr√°fico de datos se env√≠a a trav√©s del t√∫nel configurado si la interfaz de dicho t√∫nel est√° disponible; si no lo est√°, el tr√°fico se enviar√° por otro t√∫nel disponible. Se pueden especificar uno o m√°s colores.\nhttps://www.cisco.com/c/en/us/td/docs/routers/sdwan/configuration/policies/ios-xe-17/policies-book-xe/application-aware-routing.html\nPara ponerlo visualmente\nPrueba 1- MPLS/Private1 complen con el SLA, Biz-Internet no cumple Comenzaremos con la suposici√≥n de que Biz-Internet no cumple con el SLA, por lo que tenemos dos transportes disponibles: MPLS y Private1. Inicio el tr√°fico.\nBR10-PC1#ssh -l admin 172.16.20.2 Password: Nota como SLA Strict tiene un varlo de No y el MPLS cumple con el SLA y se usa.\nPrueba 2 - Private1 cumple con el SLA, MPLS/Biz-internet no cumplen Para la segunda prueba, estamos introduciendo p√©rdida en el transporte MPLS. Con esto, el √∫nico transporte que cumple con el SLA es Private1, que tambi√©n es el color preferido de respaldo para el SLA. Veamos c√≥mo se ve.\nEn el Tunnel Match Reason podemos ver claramente que el SLA se cumple a trav√©s de un color que no es el preferido (Private1). ¬øQu√© crees que suceder√° si Private1 no cumple con el SLA?\nPrueba 3 - MPLS/Private1/Biz-Internet No confunde Private1 es el √∫nico transporte que cumple con el SLA, me encargar√© de eso al introducir la p√©rdida de paquetes.\nDe nuevo (!) Private1 se usa, pero ahora el tr√°fico coincide con el SLA por defecto, en otras palabras, no hay t√∫neles que coincidan con el SLA, por lo que se utilizar√° el t√∫nel marcado backup preferred.\nBono Private1 no disponible\nEl resultado despu√©s de apagar la interfaz Private1, a√∫n sin ning√∫n t√∫nel que cumpla con el SLA. Podemos ver que se realiza una coincidencia flexible en los t√∫neles (se puede elegir cualquier t√∫nel disponible).\nBiz-internet cumple, MPLS/Private1 no cumplen\nEl resultado despu√©s de que biz-internet vuelve a tener valores de p√©rdida cero, mientras que private1 no cumple con el SLA. Aunque no sea el color preferido, a√∫n cumple con el SLA, por lo que es seleccionado.\nComo nota final, ten en cuenta que AAR siempre intentar√° usar los t√∫neles que cumplan con el SLA especificado, no te confundas solo porque los nombres de los colores no est√°n expl√≠citamente mencionados en la configuraci√≥n.\nEn la Siguiente publicaci√≥n, exploraremos la opci√≥n restante Fallback to Best Path. ¬°Nos vemos all√≠!\n","permalink":"https://netwithalex.blog/simplificando-aar-analizando-diferentes-escenarios/","summary":"Aprende c√≥mo AAR puede ayudarte a mejorar la experiencia del usuario y aplicaci√≥n con Cisco SD-WAN","title":"Simplificando AAR: 2/3 Analizando diferentes escenarios"},{"content":"Introducci√≥n Piensa en las tecnolog√≠as de enrutamiento que existen; la mayor√≠a de ellas han mejorado mucho en reaccionar ante fallos de enlaces y cortes de energ√≠a mediante protocolos como OSPF LFA/FRR, EIGRP Feasible Successor, BGP PIC, etc.\nSin embargo, estos protocolos no son tan eficaces cuando se trata de abordar problemas como la degradaci√≥n del rendimiento de la red durante brownouts, que pueden ser causados por fluctuaciones de energ√≠a o congesti√≥n en los enlaces. Estos escenarios presentan nuevos desaf√≠os para los cuales los protocolos de enrutamiento tradicionales no tienen herramientas adecuadas.\nAqu√≠ es donde Application Aware Routing llega al rescate.\nA pesar de generar cierta confusi√≥n entre los clientes y quienes est√°n aprendiendo sobre SD-WAN, Application Aware Routing (AAR) representa una ventaja fundamental de esta tecnolog√≠a.\nEn esta serie, exploraremos los conceptos b√°sicos para comprender los principios y comportamientos clave que nos permitir√°n analizar diferentes escenarios.\nUsaremos NWPI para entender mejor c√≥mo funciona todo. Si no est√°s familiarizado con NWPI, te recomiendo leer este post que escrib√≠ sobre el tema.\nAAR explicado en 5 l√≠neas Using IPSec tunnels formed between WAN Edges, BFD packets will be sent across them to measure the **loss, latency Utilizando t√∫neles IPSec formados entre los WAN Edges, se enviar√°n paquetes BFD a trav√©s de ellos para medir la p√©rdida, latencia y jitter (KPIs).\nLos usuarios pueden definir SLAs para distintos tipos de tr√°fico (voz, web, video, etc.) y configurar pol√≠ticas de AAR para garantizar que el tr√°fico se env√≠e a trav√©s de rutas que cumplan con el SLA.\nSi en alg√∫n momento la ruta deja de cumplir con el SLA, el tr√°fico ser√° redirigido autom√°ticamente a una ruta que s√≠ lo haga.\nSencillo, ¬øverdad? üòÉ\nSLAs El Service Level Agreement (SLA) se refiere a la cantidad de p√©rdida, latencia y jitter que una aplicaci√≥n puede tolerar mientras sigue funcionando correctamente. Su definici√≥n debe ser precisa y realista seg√∫n el tipo de tr√°fico y el entorno de la red.\nPor ejemplo, si estamos definiendo un SLA para voz, debemos conocer los valores aceptables de p√©rdida, latencia y jitter.\nSi nuestro SLA de voz tuviera estos valores:\nP√©rdida: 5% Latencia: 350 ms Jitter: 200 ms Es muy probable que las llamadas tengan una mala calidad.\nEn cambio, estos valores ser√≠an mucho mejores:\nP√©rdida: 1% Latencia: 150 ms Jitter: 50 ms Tambi√©n es importante considerar la naturaleza del entorno al definir estos valores. Hay lugares donde los proveedores pueden ser menos confiables, el tr√°fico puede recorrer grandes distancias y los tipos de transporte pueden variar (sat√©lite vs. fibra, por ejemplo).\nPuedes utilizar los datos hist√≥ricos de KPIs en SD-WAN Manager para construir una l√≠nea base y definir un SLA adecuado.\nLa definici√≥n de SLA se ver√° as√≠:\nsla-class Custom-SLA loss 1 latency 250 jitter 100 BFD El protocolo Bidirectional Forwarding Detection (BFD) se usa para detectar r√°pidamente fallas entre dos dispositivos de red. En SD-WAN, tambi√©n se usa para medir la p√©rdida, la latencia y el jitter. Los par√°metros que usamos para configurar BFD dictar√°n qu√© tan r√°pido SD-WAN detectar√° y reaccionar√° a los problemas de red.\nHello Interval Este intervalo representa la frecuencia con la que se enviar√° un paquete de BFD. Est√° configurado por color en milisegundos; El valor predeterminado por defecto es 1000 ms. Este paquete viajar√° hasta el WAN Edge del otro extremo y regresar√°. De esta manera, se medir√°n los KPIs para cada paquete.\nsdwan interface GigabitEthernetX tunnel-interface color mpls hello-interval 1000 \u0026lt;\u0026lt;\u0026lt; Cada modelo de router tiene una capacidad definida de t√∫neles (cantidad de t√∫neles que puede formar). Reducir el hello interval por debajo de 1 segundo disminuye la capacidad de t√∫neles.\nTen esto en cuenta para evitar posibles problemas por exceder la capacidad del hardware.\nApp route poll interval Digamos que tenemos un intervalo de votaci√≥n de 4000 ms. Cada 4 segundos se construye un nuevo cubo, este cubo tendr√° su propio √≠ndice. ** El intervalo de encuesta predeterminado ** es de 600,000 ms (10 minutos).\nA medida que el WAN Edge sigue enviando paquetes, el poll interval es el temporizador que ayuda a organizarlos en buckets. Estos buckets se utilizan para calcular las estad√≠sticas del t√∫nel.\nEl poll interval se configura a nivel de dispositivo (per box basis), lo que significa que se aplica de la misma manera para todos los colores.\nPor ejemplo, si el poll interval es de 4000 ms, cada 4 segundos se crea un nuevo bucket, y cada uno tendr√° su propio √≠ndice.\nEl valor por defecto del poll interval es 600,000 ms (10 minutos).\nPara configurar el poll interval\nbfd app-route poll-interval 60000 La p√©rdida promedio, la latencia y el jitter, se calcular√°n para cada poll interval. Podemos verificar esto directamente en SD-WAN Manager -\u0026gt; Monitor -\u0026gt; Real Time -\u0026gt; App Route Statistics\nMultiplicador de ruta de la aplicaci√≥n Para configurar el multiplicador\nbfd app-route multiplier 3 El multiplicador indica la cantidad de buckets que se utilizar√°n para calcular las estad√≠sticas del t√∫nel, lo que influir√° en la decisi√≥n de redirigir el tr√°fico cuando las condiciones de la red empeoren.\nPara esta ilustraci√≥n, se usa un multiplicador de 3.\nPor defecto, el multiplicador est√° configurado en 6.\nObserva que cada bucket contiene 4 paquetes.\nhello interval (s) x Poll interval (s)\nEn el mundo real, 4 paquetes ser√≠an ** demasiado bajo **. Si tomamos todos los valores predeterminados, terminar√≠amos con un cubo de 600 paquetes. Consulte la [Gu√≠a de implementaci√≥n de AAR] (https://www.cisco.com/c/en/us/td/docs/solutions/cvd/sdwan/cisco-sdwan-application-ware-routing-deploy-guide.html) para obtener m√°s detalles y opciones.\nDespu√©s de llenar todos los buckets, se calcular√°n las estad√≠sticas del t√∫nel.\nPodemos visualizar los buckets y los c√°lculos de la media. F√≠jate que los valores son los mismos para todos los buckets. No te confundas con las columnas de avg loss, latency y jitter que se mostraron antes.\nEste mecanismo act√∫a como una ventana deslizante que descartar√° el bucket m√°s antiguo para hacer espacio al nuevo, recalculando las estad√≠sticas del t√∫nel cada poll interval.\nConfiguraci√≥n de la pol√≠tica AAR Ahora que tenemos una mejor comprensi√≥n sobre SLA y BFD, podemos crear las reglas que gobernar√°n el comportamiento de nuestra pol√≠tica AAR. As√≠ es como se ver√° en SD-WAN Manager.\nEsta es probablemente la forma m√°s simple que podemos configurar. El tr√°fico de Google Apps ser√° matcheado y se utilizar√°n los transportes que coincidan con nuestro Custom-SLA de manera indiferente.\nEn otras palabras, si tenemos 3 transportes diferentes y todos cumplen con el SLA, el tr√°fico se balancear√° entre ellos.\n¬øQu√© pasa si queremos que el tr√°fico prefiera uno de los transportes? Bueno, podemos especificar un Prefered Color como se muestra a continuaci√≥n:\nEn esta secuencia, las aplicaciones de voz se emparejan, y el SLA de los transportes debe coincidir con el de Bussiness-Critical. Se dar√° preferencia a MPLS si cumple con el SLA. La acci√≥n cuando no se cumple el SLA se configura en Load Balance entre los colores disponibles.\nA primera vista, esto parece muy simple, pero hay algunos detalles que debemos conocer si queremos entender completamente c√≥mo se comportar√° el tr√°fico bajo diferentes circunstancias.\nTe invito a leer mi pr√≥ximo post donde exploraremos algunos escenarios para tener un mejor entendimiento de esta tecnolog√≠a. ¬°Nos vemos all√°!\n","permalink":"https://netwithalex.blog/simplificando-aar-1-3-las-bases/","summary":"Aprende c√≥mo AAR puede ayudarte a mejorar la experiencia del usuario y aplicaci√≥n con Cisco SD-WAN","title":"Simplificando AAR: 1/3 Las bases"},{"content":"Motivaci√≥n: El escenario cl√°sico de crisis Imagina comenzar el d√≠a en el equipo de redes, solo para ser bombardeado con quejas sobre la principal aplicaci√≥n interna. Empiezas a investigar. ¬øD√≥nde se encuentra el problema? ¬øEst√° aislado o afectando m√∫ltiples lugares? ¬øCu√°ndo comenz√≥ el problema? ¬øCu√°l es el impacto?\nA continuaci√≥n, intentas conectar con alguien que te ayude a verificar los conceptos b√°sicos. DHCP y DNS funcionan. Gateway es accesible. ¬°La conectividad a otros objetivos en el mismo DC es intermitente! Est√° empezando a ser raro \u0026hellip;\nEn este punto, cada minuto cuenta y un proceso de soluci√≥n de problemas adecuado debe implementarse para verificar todos los dispositivos involucrados y aislar la ra√≠z del problema. Comienza a tomar capturas de paquetes y trazas en diferentes puntos de la red, verificas los contadores, las sesiones BFD e IPSEC, buscas inconsistencias en la tabla OMP y enrutamiento, verificas largas configuraciones de pol√≠ticas y par√°metros de puerto, una cosa a la vez. Dos horas m√°s tarde (¬°con suerte!) t√∫ y tu equipo finalmente llegan a la causa ra√≠z\u0026hellip;\n¬øQu√© hizo Cisco al respecto? Teniendo en cuenta el nivel de complejidad y los esfuerzos necesarios para resolver los problemas de la red, Cisco cre√≥ - Network Wide Path Insights (NWPI) - para facilitar la soluci√≥n de problemas de nuestra WAN. NWPI se introdujo por primera vez la versi√≥n 20.4 y con cada lanzamiento sigui√≥ mejorando. En la versi√≥n 20.9 hay varias mejoras importantes que lo ayudar√°n a determinar r√°pidamente lo que est√° sucediendo. ¬øQuieres verlo en acci√≥n? ¬°Vamos!\n** Topolog√≠a ** Usaremos este escenario para ejecutar nuestro traza NWPI. No existe una pol√≠tica centralizada, como resultado, tenemos un full mesh y el tr√°fico podr√≠a fluir en cualquiera de los t√∫neles disponibles.\n** Comprensi√≥n de NWPI ** En VManage, navegue a la secci√≥n Tools para encontrar esta caracter√≠stica. Para comenzar a usarlo, la informaci√≥n m√≠nima que necesita es:\nDonde se genera el tr√°fico (Site`` ID) segmento de la red (VPN) Device se determina autom√°ticamente. Puedes refinar a√∫n m√°s los filtros para capturar exactamente lo que est√° buscando.\n20.12.2 NWPI\nUna vez que los filtros est√©n en su lugar, comienza la traza y observa la magia.\nInsight - Vista b√°sica Veamos los resultados de una peque√±a transferencia SCP entre sitios 10 y 20. Esta es la primera informaci√≥n que veremos.\nDe lo anterior, podemos determinar:\n** Direcci√≥n de flujo ** - Tr√°fico que fluye del sitio 10 a 20 ** Equipos edges tocando el tr√°fico ** - BR10-1 y BR20-2 ** Informaci√≥n de flujo ** - src/dst ips, puertos, protocolo, aplicaci√≥n, etc. ** Colores involucrados ** - MPLS -\u0026gt; Biz- Internet ** KPIs SD-WAN espec√≠ficos del flujo ** - P√©rdida de paquetes, latencia y jitter ** Porcentaje de p√©rdida de paquetes ** - en los dispositivos WAN y en los dispositivos Hagamos clic en readout para obtener m√°s informaci√≥n\nLeer Una nueva informaci√≥n est√° disponible para nosotros:\n** Entrada coincidente en la tabla de enrutamiento ** - 172.10.20.0/24 Proven√≠a de OMP y sus respectivas m√©tricas. ** Candidato y ruta elegida ** - Rutas disponibles que se muestran y elegidas una resaltada en verde. ** Interfaces f√≠sicas involucradas ** - tanto para el servicio como para el transporte ** Raz√≥n para elegir esta ruta ** - Enrutamiento, sin embargo, tenga en cuenta que las pol√≠ticas pueden anular la tabla de enrutamiento. Si nos detenemos aqu√≠, ya tenemos mucha informaci√≥n muy √∫til para comprender el flujo del tr√°fico, pero ¬øqu√© pasa si necesitamos profundizar? Bueno, ahora exploremos las vistas Advanced\nVistas avanzadas Si conoce [DataPath Packet Trace] (https://www.cisco.com/c/en/us/support/docs/content-networking/adaptive-session-redundancy-asr/117858-technote-asr-00.html#toc-hid-180344474), esta informaci√≥n ser√° familiar. Esencialmente, nos dir√° todas las funcionalidades que ejecuta el dispositivo a medida que se procesa el paquete. Algunos ejemplos podr√≠an ser ACL, pol√≠ticas, reglas FW, DPI, Netflow y mucho m√°s. Hay casos en los que necesitamos determinar si o por qu√© el dispositivo est√° dejando caer paquetes, ¬°este es el lugar para verificar!\nEn resumen aqu√≠ est√° la informaci√≥n adicional que podemos obtener:\nFuncionalidades - Algunas de ellas depender√°n de la configuraci√≥n, otras siempre estar√°n all√≠ en un entorno SD-WAN. Drops - Si una caracter√≠stica est√° dejando caer el tr√°fico, tiene la informaci√≥n para saber exactamente por qu√©. Detalles de bajo nivel sobre las funcionalidades - La mayor√≠a de las veces no tendr√° que lidiar con esto, pero puede ser √∫til cuando se comunica con el soporte t√©cnico. Hay mucho m√°s que hacer con esta herramienta, pero creo que esto es suficiente como introducci√≥n. Sin embargo, antes de llegar a la conclusi√≥n, me gustar√≠a mencionar algunos de los casos de uso en los que esta herramiento es extremadamente √∫til.\nMal rendimiento de la aplicaci√≥n Validaci√≥n de pol√≠ticas Aislamiento del problema Validaci√≥n/soluci√≥n de problemas DIA y SaaS (s√≠, tambi√©n puede brindar informaci√≥n sobre el tr√°fico destinado a Internet) ¬øEn qu√© otros escenarios podr√≠as pensar?\nConclusi√≥n NWPI es un gran ejemplo del esfuerzo de Cisco para crear una herramienta que puede ayudar a solucionar problemas m√°s r√°pido y de manera simple y eficiente. Consulte esta gu√≠a para saber m√°s sobre las caracter√≠sticas introducidas y m√°s.\nEn mi experiencia, NWPI no se usa lo suficiente principalmente porque todav√≠a es desconocido para muchos. Te animo a que lo pruebes y eventualmente lo incorpores a su conjunto de herramientas de soluci√≥n de problemas, estoy seguro de que encontrar√° alg√∫n beneficio.\n","permalink":"https://netwithalex.blog/introduccion-network-wide-path-insights/","summary":"Aprende a usar la herramienta de troubleshooting m√°s avanzada para tu red Cisco SD-WAN.","title":"Cisco SD-WAN Network Wide Path Insights (NWPI)"},{"content":" ¬°Hola! Soy Alex y me encanta compartir mi conocimiento sobre redes y tecnolog√≠a. He estado en el campo de networking durante los √∫ltimos a√±os. Actualmente, aporto mi experiencia en Cisco, donde comenc√© en el equipo de soporte TAC de R\u0026S. Despu√©s de un par de a√±os, hice la transici√≥n al equipo de soporte TAC de SD-WAN. Ahora soy Customer Success Specialist para tecnolog√≠as como DNA Center y SD-WAN. Obtuve mi CCIE Enterprise en 2022. Tambi√©n me interesa la automatizaci√≥n, la inteligencia artificial y la tecnolog√≠a en general. Gracias por estar aqu√≠. Espero que encuentres mi blog √∫til y entretenido. ¬°Conectemos! üëá ","permalink":"https://netwithalex.blog/es/sobre-mi/","summary":"\u003cdiv style=\"display: flex; align-items: center;\"\u003e\n    \u003cdiv style=\"flex: 1; padding-right: 20px;font-size: 17px;\"\u003e\n        \u003cdiv style=\"line-height: 1; margin-bottom: 1em; \"\u003e\u003c/div\u003e\n      \n\n¬°Hola! Soy Alex y me encanta compartir mi conocimiento sobre redes y tecnolog√≠a. He estado en el campo de networking durante los √∫ltimos a√±os.\n\u003cbr\u003e\u003cbr\u003e\nActualmente, aporto mi experiencia en Cisco, donde comenc√© en el equipo de soporte TAC de R\u0026S. Despu√©s de un par de a√±os, hice la transici√≥n al equipo de soporte TAC de SD-WAN.\n\u003cbr\u003e\u003cbr\u003e\nAhora soy Customer Success Specialist para tecnolog√≠as como DNA Center y SD-WAN. Obtuve mi CCIE Enterprise en 2022. Tambi√©n me interesa la automatizaci√≥n, la inteligencia artificial y la tecnolog√≠a en general.\n\u003cbr\u003e\u003cbr\u003e\nGracias por estar aqu√≠. Espero que encuentres mi blog √∫til y entretenido. ¬°Conectemos! üëá\n\u003cbr\u003e\u003cbr\u003e\n\u003cdiv style=\"display: flex; gap: 30px; align-items: center;\"\u003e\n\n  \u003ca href=\"https://www.linkedin.com/in/alexruizs/\" target=\"_blank\" style=\"margin-right: 1px;\"\u003e\n\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"width:30px; height:30px; fill: var(--primary);\"\u003e\u003cpath d=\"M22.23 0H1.77C.8 0 0 .77 0 1.72v20.56C0 23.23.8 24 1.77 24h20.46c.98 0 1.77-.77 1.77-1.72V1.72C24 .77 23.2 0 22.23 0zM7.27 20.1H3.65V9.24h3.62V20.1zM5.47 7.76h-.03c-1.22 0-2-.83-2-1.87 0-1.06.8-1.87 2.05-1.87 1.24 0 2 .8 2.02 1.87 0 1.04-.78 1.87-2.05 1.87zM20.34 20.1h-3.63v-5.8c0-1.45-.52-2.45-1.83-2.45-1 0-1.6.67-1.87 1.32-.1.23-.11.55-.11.88v6.05H9.28s.05-9.82 0-10.84h3.63v1.54a3.6 3.6 0 0 1 3.26-1.8c2.39 0 4.18 1.56 4.18 4.89v6.21z\"/\u003e\u003c/svg\u003e\n  \u003c/a\u003e\n\n  \u003c!-- GitHub Icon --\u003e\n  \u003ca href=\"https://github.com/aruiz-p\" target=\"_blank\" style=\"margin-right: 1px;\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"width: 30px; height: 30px; fill: var(--primary);\"\u003e\u003cpath d=\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577v-2.234c-3.338.724-4.033-1.415-4.033-1.415-.546-1.385-1.333-1.754-1.333-1.754-1.089-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.775.418-1.305.762-1.605-2.665-.3-5.466-1.333-5.466-5.93 0-1.31.465-2.381 1.235-3.221-.123-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.3 1.23.957-.266 1.983-.398 3.003-.404 1.02.006 2.047.138 3.006.404 2.29-1.552 3.296-1.23 3.296-1.23.653 1.653.241 2.873.118 3.176.77.84 1.231 1.911 1.231 3.221 0 4.61-2.805 5.625-5.475 5.92.429.372.824 1.104.824 2.222v3.293c0 .322.218.694.825.576C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"/\u003e\u003c/svg\u003e  \n  \u003c/a\u003e\n\n  \u003c!-- Gmail Icon --\u003e\n\u003ca href=\"mailto:netwithalex@gmail.com\" target=\"_blank\" style=\"margin-right: 1px;\"\u003e\n  \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" style=\"width: 30px; height: 30px;\"\u003e\n    \u003c!-- Background --\u003e\n    \u003crect width=\"24\" height=\"24\" fill=\"var(--theme)\" /\u003e\n    \u003c!-- Envelope Outline --\u003e\n    \u003cpath d=\"M12 12.713L.015 5.328V19.2A2.8 2.8 0 002.8 22h18.4a2.8 2.8 0 002.8-2.8V5.328L12 12.713zm11.985-7.385v-.2a2.8 2.8 0 00-2.8-2.8H2.8A2.8 2.8 0 000 5.328l12 7.679 12-7.679z\" fill=\"none\" stroke=\"var(--primary)\" stroke-width=\"2.5\" /\u003e\n  \u003c/svg\u003e\n\u003c/a\u003e\n\u003c/div\u003e\n\n\n    \u003c/div\u003e\n    \u003cdiv style=\"flex: 1;\"\u003e\n      \u003cimg src=\"/wp-content/uploads/2024/01/IMG_8522-e1704915321848.jpeg\" alt=\"Example Image\" style=\"max-width: 100%; height: auto;border: 5px solid transparent;border-radius: 20px;\"\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e","title":"Sobre mi."}]