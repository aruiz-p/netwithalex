<!DOCTYPE html>
<html lang="es" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Simplificando AAR: 1/3 Las bases | NetWithAlex</title>
<meta name="keywords" content="">
<meta name="description" content="Aprende c√≥mo AAR puede ayudarte a mejorar la experiencia del usuario y aplicaci√≥n con Cisco SD-WAN">
<meta name="author" content="Alex">
<link rel="canonical" href="http://localhost:1313/simplificando-aar-1-3-las-bases/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/assets/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/demystifying-aar-1-3-the-foundations/">
<link rel="alternate" hreflang="es" href="http://localhost:1313/simplificando-aar-1-3-las-bases/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>















    
        <link rel="preconnect" href="https://plausible.io">
    
        <!-- Dev mode : We do not load plausible script to avoid bloating your stats -->

<!-- If you are using Content-Security-Policy, do not forget to add this code to your CSP : 
  script-src 'unsafe-inline' https://plausible.io
  connect-src 'unsafe-inline' https://plausible.io
  or just add the partial 'plausible_csp.html' to those 2 csp directives in your 'index.headers' file
-->



    
    <script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
    <script>
         
         
         
    </script>

    

<link rel="stylesheet" href="/assets/css/custom.css">
<meta property="og:url" content="http://localhost:1313/simplificando-aar-1-3-las-bases/">
  <meta property="og:site_name" content="NetWithAlex">
  <meta property="og:title" content="Simplificando AAR: 1/3 Las bases">
  <meta property="og:description" content="Aprende c√≥mo AAR puede ayudarte a mejorar la experiencia del usuario y aplicaci√≥n con Cisco SD-WAN">
  <meta property="og:locale" content="es">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-01T16:25:27+00:00">
    <meta property="article:modified_time" content="2024-02-01T16:25:27+00:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Simplificando AAR: 1/3 Las bases">
<meta name="twitter:description" content="Aprende c√≥mo AAR puede ayudarte a mejorar la experiencia del usuario y aplicaci√≥n con Cisco SD-WAN">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/es/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Simplificando AAR: 1/3 Las bases",
      "item": "http://localhost:1313/simplificando-aar-1-3-las-bases/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Simplificando AAR: 1/3 Las bases",
  "name": "Simplificando AAR: 1\/3 Las bases",
  "description": "Aprende c√≥mo AAR puede ayudarte a mejorar la experiencia del usuario y aplicaci√≥n con Cisco SD-WAN",
  "keywords": [
    
  ],
  "articleBody": "Introducci√≥n Piensa en las tecnolog√≠as de enrutamiento que existen; la mayor√≠a de ellas han mejorado mucho en reaccionar ante fallos de enlaces y cortes de energ√≠a mediante protocolos como OSPF LFA/FRR, EIGRP Feasible Successor, BGP PIC, etc.\nSin embargo, estos protocolos no son tan eficaces cuando se trata de abordar problemas como la degradaci√≥n del rendimiento de la red durante brownouts, que pueden ser causados por fluctuaciones de energ√≠a o congesti√≥n en los enlaces. Estos escenarios presentan nuevos desaf√≠os para los cuales los protocolos de enrutamiento tradicionales no tienen herramientas adecuadas.\nAqu√≠ es donde Application Aware Routing llega al rescate.\nA pesar de generar cierta confusi√≥n entre los clientes y quienes est√°n aprendiendo sobre SD-WAN, Application Aware Routing (AAR) representa una ventaja fundamental de esta tecnolog√≠a.\nEn esta serie, exploraremos los conceptos b√°sicos para comprender los principios y comportamientos clave que nos permitir√°n analizar diferentes escenarios.\nUsaremos NWPI para entender mejor c√≥mo funciona todo. Si no est√°s familiarizado con NWPI, te recomiendo leer este post que escrib√≠ sobre el tema.\nAAR explicado en 5 l√≠neas Using IPSec tunnels formed between WAN Edges, BFD packets will be sent across them to measure the **loss, latency Utilizando t√∫neles IPSec formados entre los WAN Edges, se enviar√°n paquetes BFD a trav√©s de ellos para medir la p√©rdida, latencia y jitter (KPIs).\nLos usuarios pueden definir SLAs para distintos tipos de tr√°fico (voz, web, video, etc.) y configurar pol√≠ticas de AAR para garantizar que el tr√°fico se env√≠e a trav√©s de rutas que cumplan con el SLA.\nSi en alg√∫n momento la ruta deja de cumplir con el SLA, el tr√°fico ser√° redirigido autom√°ticamente a una ruta que s√≠ lo haga.\nSencillo, ¬øverdad? üòÉ\nSLAs El Service Level Agreement (SLA) se refiere a la cantidad de p√©rdida, latencia y jitter que una aplicaci√≥n puede tolerar mientras sigue funcionando correctamente. Su definici√≥n debe ser precisa y realista seg√∫n el tipo de tr√°fico y el entorno de la red.\nPor ejemplo, si estamos definiendo un SLA para voz, debemos conocer los valores aceptables de p√©rdida, latencia y jitter.\nSi nuestro SLA de voz tuviera estos valores:\nP√©rdida: 5% Latencia: 350 ms Jitter: 200 ms Es muy probable que las llamadas tengan una mala calidad.\nEn cambio, estos valores ser√≠an mucho mejores:\nP√©rdida: 1% Latencia: 150 ms Jitter: 50 ms Tambi√©n es importante considerar la naturaleza del entorno al definir estos valores. Hay lugares donde los proveedores pueden ser menos confiables, el tr√°fico puede recorrer grandes distancias y los tipos de transporte pueden variar (sat√©lite vs. fibra, por ejemplo).\nPuedes utilizar los datos hist√≥ricos de KPIs en SD-WAN Manager para construir una l√≠nea base y definir un SLA adecuado.\nLa definici√≥n de SLA se ver√° as√≠:\nsla-class Custom-SLA loss 1 latency 250 jitter 100 BFD El protocolo Bidirectional Forwarding Detection (BFD) se usa para detectar r√°pidamente fallas entre dos dispositivos de red. En SD-WAN, tambi√©n se usa para medir la p√©rdida, la latencia y el jitter. Los par√°metros que usamos para configurar BFD dictar√°n qu√© tan r√°pido SD-WAN detectar√° y reaccionar√° a los problemas de red.\nHello Interval Este intervalo representa la frecuencia con la que se enviar√° un paquete de BFD. Est√° configurado por color en milisegundos; El valor predeterminado por defecto es 1000 ms. Este paquete viajar√° hasta el WAN Edge del otro extremo y regresar√°. De esta manera, se medir√°n los KPIs para cada paquete.\nsdwan interface GigabitEthernetX tunnel-interface color mpls hello-interval 1000 \u003c\u003c\u003c Cada modelo de router tiene una capacidad definida de t√∫neles (cantidad de t√∫neles que puede formar). Reducir el hello interval por debajo de 1 segundo disminuye la capacidad de t√∫neles.\nTen esto en cuenta para evitar posibles problemas por exceder la capacidad del hardware.\nApp route poll interval Digamos que tenemos un intervalo de votaci√≥n de 4000 ms. Cada 4 segundos se construye un nuevo cubo, este cubo tendr√° su propio √≠ndice. ** El intervalo de encuesta predeterminado ** es de 600,000 ms (10 minutos).\nA medida que el WAN Edge sigue enviando paquetes, el poll interval es el temporizador que ayuda a organizarlos en buckets. Estos buckets se utilizan para calcular las estad√≠sticas del t√∫nel.\nEl poll interval se configura a nivel de dispositivo (per box basis), lo que significa que se aplica de la misma manera para todos los colores.\nPor ejemplo, si el poll interval es de 4000 ms, cada 4 segundos se crea un nuevo bucket, y cada uno tendr√° su propio √≠ndice.\nEl valor por defecto del poll interval es 600,000 ms (10 minutos).\nPara configurar el poll interval\nbfd app-route poll-interval 60000 La p√©rdida promedio, la latencia y el jitter, se calcular√°n para cada poll interval. Podemos verificar esto directamente en SD-WAN Manager -\u003e Monitor -\u003e Real Time -\u003e App Route Statistics\nMultiplicador de ruta de la aplicaci√≥n Para configurar el multiplicador\nbfd app-route multiplier 3 El multiplicador indica la cantidad de buckets que se utilizar√°n para calcular las estad√≠sticas del t√∫nel, lo que influir√° en la decisi√≥n de redirigir el tr√°fico cuando las condiciones de la red empeoren.\nPara esta ilustraci√≥n, se usa un multiplicador de 3.\nPor defecto, el multiplicador est√° configurado en 6.\nObserva que cada bucket contiene 4 paquetes.\nhello interval (s) x Poll interval (s)\nEn el mundo real, 4 paquetes ser√≠an ** demasiado bajo **. Si tomamos todos los valores predeterminados, terminar√≠amos con un cubo de 600 paquetes. Consulte la [Gu√≠a de implementaci√≥n de AAR] (https://www.cisco.com/c/en/us/td/docs/solutions/cvd/sdwan/cisco-sdwan-application-ware-routing-deploy-guide.html) para obtener m√°s detalles y opciones.\nDespu√©s de llenar todos los buckets, se calcular√°n las estad√≠sticas del t√∫nel.\nPodemos visualizar los buckets y los c√°lculos de la media. F√≠jate que los valores son los mismos para todos los buckets. No te confundas con las columnas de avg loss, latency y jitter que se mostraron antes.\nEste mecanismo act√∫a como una ventana deslizante que descartar√° el bucket m√°s antiguo para hacer espacio al nuevo, recalculando las estad√≠sticas del t√∫nel cada poll interval.\nConfiguraci√≥n de la pol√≠tica AAR Ahora que tenemos una mejor comprensi√≥n sobre SLA y BFD, podemos crear las reglas que gobernar√°n el comportamiento de nuestra pol√≠tica AAR. As√≠ es como se ver√° en SD-WAN Manager.\nEsta es probablemente la forma m√°s simple que podemos configurar. El tr√°fico de Google Apps ser√° matcheado y se utilizar√°n los transportes que coincidan con nuestro Custom-SLA de manera indiferente.\nEn otras palabras, si tenemos 3 transportes diferentes y todos cumplen con el SLA, el tr√°fico se balancear√° entre ellos.\n¬øQu√© pasa si queremos que el tr√°fico prefiera uno de los transportes? Bueno, podemos especificar un Prefered Color como se muestra a continuaci√≥n:\nEn esta secuencia, las aplicaciones de voz se emparejan, y el SLA de los transportes debe coincidir con el de Bussiness-Critical. Se dar√° preferencia a MPLS si cumple con el SLA. La acci√≥n cuando no se cumple el SLA se configura en Load Balance entre los colores disponibles.\nA primera vista, esto parece muy simple, pero hay algunos detalles que debemos conocer si queremos entender completamente c√≥mo se comportar√° el tr√°fico bajo diferentes circunstancias.\nTe invito a leer mi pr√≥ximo post donde exploraremos algunos escenarios para tener un mejor entendimiento de esta tecnolog√≠a. ¬°Nos vemos all√°!\n",
  "wordCount" : "1183",
  "inLanguage": "es",
  "datePublished": "2024-02-01T16:25:27Z",
  "dateModified": "2024-02-01T16:25:27Z",
  "author":{
    "@type": "Person",
    "name": "Alex"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/simplificando-aar-1-3-las-bases/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "NetWithAlex",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/assets/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/es/" accesskey="h" title="NetWithAlex (Alt + H)">NetWithAlex</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://localhost:1313/" title="English"
                            aria-label="English">En</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/es/" title="Inicio">
                    <span>Inicio</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/es/archives/" title="Archivo">
                    <span>Archivo</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/es/category/" title="Categor√≠as">
                    <span>Categor√≠as</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/es/sobre-mi/" title="Sobre m√≠">
                    <span>Sobre m√≠</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/es/search/" title="üîç">
                    <span>üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/es/">Inicio</a>&nbsp;¬ª&nbsp;<a href="http://localhost:1313/es/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Simplificando AAR: 1/3 Las bases
    </h1>
    <div class="post-description">
      Aprende c√≥mo AAR puede ayudarte a mejorar la experiencia del usuario y aplicaci√≥n con Cisco SD-WAN
    </div>
    <div class="post-meta"><span title='2024-02-01 16:25:27 +0000 WET'>febrero 1, 2024</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;Alex&nbsp;|&nbsp;Traducciones:
<ul class="i18n_list">
    <li>
        <a href="http://localhost:1313/demystifying-aar-1-3-the-foundations/">En</a>
    </li>
</ul>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Tabla de Contenidos</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introducci%c3%b3n" aria-label="Introducci√≥n">Introducci√≥n</a></li>
                <li>
                    <a href="#aar-explicado-en-5-l%c3%adneas" aria-label="AAR explicado en 5 l√≠neas">AAR explicado en 5 l√≠neas</a></li>
                <li>
                    <a href="#slas" aria-label="SLAs">SLAs</a></li>
                <li>
                    <a href="#bfd" aria-label="BFD">BFD</a><ul>
                        
                <li>
                    <a href="#hello-interval" aria-label="Hello Interval">Hello Interval</a></li>
                <li>
                    <a href="#app-route-poll-interval" aria-label="App route poll interval">App route poll interval</a></li>
                <li>
                    <a href="#multiplicador-de-ruta-de-la-aplicaci%c3%b3n" aria-label="Multiplicador de ruta de la aplicaci√≥n">Multiplicador de ruta de la aplicaci√≥n</a></li></ul>
                </li>
                <li>
                    <a href="#configuraci%c3%b3n-de-la-pol%c3%adtica-aar" aria-label="Configuraci√≥n de la pol√≠tica AAR">Configuraci√≥n de la pol√≠tica AAR</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="introducci√≥n">Introducci√≥n<a hidden class="anchor" aria-hidden="true" href="#introducci√≥n">#</a></h3>
<p>Piensa en las tecnolog√≠as de enrutamiento que existen; la mayor√≠a de ellas han mejorado mucho en reaccionar ante fallos de enlaces y cortes de energ√≠a mediante protocolos como OSPF LFA/FRR, EIGRP Feasible Successor, BGP PIC, etc.</p>
<p>Sin embargo, estos protocolos no son tan eficaces cuando se trata de abordar problemas como la degradaci√≥n del rendimiento de la red durante brownouts, que pueden ser causados por fluctuaciones de energ√≠a o congesti√≥n en los enlaces. Estos escenarios presentan nuevos desaf√≠os para los cuales los protocolos de enrutamiento tradicionales no tienen herramientas adecuadas.</p>
<p>Aqu√≠ es donde Application Aware Routing llega al rescate.</p>
<p>A pesar de generar cierta confusi√≥n entre los clientes y quienes est√°n aprendiendo sobre SD-WAN, Application Aware Routing (AAR) representa una ventaja fundamental de esta tecnolog√≠a.</p>
<p>En esta serie, exploraremos los conceptos b√°sicos para comprender los principios y comportamientos clave que nos permitir√°n analizar diferentes escenarios.</p>
<p>Usaremos NWPI para entender mejor c√≥mo funciona todo. Si no est√°s familiarizado con NWPI, te recomiendo leer este <a href="/network-wide-path-insights-an-introduction/">post</a> que escrib√≠ sobre el tema.</p>
<h3 id="aar-explicado-en-5-l√≠neas">AAR explicado en 5 l√≠neas<a hidden class="anchor" aria-hidden="true" href="#aar-explicado-en-5-l√≠neas">#</a></h3>
<p>Using IPSec tunnels formed between WAN Edges, <strong>BFD</strong> packets will be sent across them to measure the **loss, latency Utilizando t√∫neles IPSec formados entre los WAN Edges, se enviar√°n paquetes BFD a trav√©s de ellos para medir la p√©rdida, latencia y jitter (KPIs).</p>
<p>Los usuarios pueden definir SLAs para distintos tipos de tr√°fico (voz, web, video, etc.) y configurar pol√≠ticas de AAR para garantizar que el tr√°fico se env√≠e a trav√©s de rutas que cumplan con el SLA.</p>
<p>Si en alg√∫n momento la ruta deja de cumplir con el SLA, el tr√°fico ser√° redirigido autom√°ticamente a una ruta que s√≠ lo haga.</p>
<p>Sencillo, ¬øverdad? üòÉ</p>
<h3 id="slas">SLAs<a hidden class="anchor" aria-hidden="true" href="#slas">#</a></h3>
<p>El Service Level Agreement (SLA) se refiere a la cantidad de p√©rdida, latencia y jitter que una aplicaci√≥n puede tolerar mientras sigue funcionando correctamente. Su definici√≥n debe ser precisa y realista seg√∫n el tipo de tr√°fico y el entorno de la red.</p>
<p>Por ejemplo, si estamos definiendo un SLA para voz, debemos conocer los valores aceptables de p√©rdida, latencia y jitter.</p>
<p>Si nuestro SLA de voz tuviera estos valores:</p>
<pre><code>P√©rdida: 5%
Latencia: 350 ms
Jitter: 200 ms
</code></pre>
<p>Es muy probable que las llamadas tengan una mala calidad.</p>
<p>En cambio, estos valores ser√≠an mucho mejores:</p>
<pre><code>P√©rdida: 1%
Latencia: 150 ms
Jitter: 50 ms
</code></pre>
<p>Tambi√©n es importante considerar la naturaleza del entorno al definir estos valores. Hay lugares donde los proveedores pueden ser menos confiables, el tr√°fico puede recorrer grandes distancias y los tipos de transporte pueden variar (sat√©lite vs. fibra, por ejemplo).</p>
<p>Puedes utilizar los datos hist√≥ricos de KPIs en SD-WAN Manager para construir una l√≠nea base y definir un SLA adecuado.</p>
<p>La definici√≥n de SLA se ver√° as√≠:</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/s1-aar100.png"></p>
<hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sla-class Custom-SLA
</span></span><span style="display:flex;"><span> loss 1
</span></span><span style="display:flex;"><span> latency 250
</span></span><span style="display:flex;"><span> jitter 100
</span></span></code></pre></div><h3 id="bfd">BFD<a hidden class="anchor" aria-hidden="true" href="#bfd">#</a></h3>
<p>El protocolo Bidirectional Forwarding Detection (BFD) se usa para detectar r√°pidamente fallas entre dos dispositivos de red. En SD-WAN, tambi√©n se usa para medir la p√©rdida, la latencia y el jitter. Los par√°metros que usamos para configurar BFD dictar√°n qu√© tan r√°pido SD-WAN detectar√° y reaccionar√° a los problemas de red.</p>
<h4 id="hello-interval">Hello Interval<a hidden class="anchor" aria-hidden="true" href="#hello-interval">#</a></h4>
<p>Este intervalo representa la frecuencia con la que se enviar√° un paquete de BFD. Est√° configurado por color en milisegundos; El valor predeterminado <strong>por defecto</strong> es 1000 ms. Este paquete viajar√° hasta el WAN Edge del otro extremo y regresar√°. De esta manera, se medir√°n los KPIs para cada paquete.</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/bfd-1.png"></p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/s1-aar101.png"></p>
<hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sdwan
</span></span><span style="display:flex;"><span> interface GigabitEthernetX
</span></span><span style="display:flex;"><span>   tunnel-interface
</span></span><span style="display:flex;"><span>   color mpls
</span></span><span style="display:flex;"><span>   hello-interval 1000 &lt;&lt;&lt;
</span></span></code></pre></div><p>Cada modelo de router tiene una capacidad definida de t√∫neles (cantidad de t√∫neles que puede formar). Reducir el hello interval por debajo de 1 segundo disminuye la capacidad de t√∫neles.</p>
<p><strong>Ten esto en cuenta para evitar posibles problemas por exceder la capacidad del hardware.</strong></p>
<h4 id="app-route-poll-interval">App route poll interval<a hidden class="anchor" aria-hidden="true" href="#app-route-poll-interval">#</a></h4>
<p>Digamos que tenemos un intervalo de votaci√≥n de 4000 ms. Cada 4 segundos se construye un nuevo cubo, este cubo tendr√° su propio √≠ndice. ** El intervalo de encuesta predeterminado ** es de 600,000 ms (10 minutos).</p>
<p>A medida que el WAN Edge sigue enviando paquetes, el poll interval es el temporizador que ayuda a organizarlos en buckets. Estos buckets se utilizan para calcular las estad√≠sticas del t√∫nel.</p>
<p>El poll interval se configura a nivel de dispositivo (per box basis), lo que significa que se aplica de la misma manera para todos los colores.</p>
<p>Por ejemplo, si el poll interval es de 4000 ms, cada 4 segundos se crea un nuevo bucket, y cada uno tendr√° su propio √≠ndice.</p>
<p>El <strong>valor por defecto</strong> del poll interval es 600,000 ms (10 minutos).</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/bfd-4.png"></p>
<p>Para configurar el poll interval</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/bfd-cofig.png"></p>
<hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>bfd app-route poll-interval 60000
</span></span></code></pre></div><p>La p√©rdida promedio, la latencia y el jitter, se calcular√°n para cada poll interval. Podemos verificar esto directamente en <em>SD-WAN Manager -&gt; Monitor -&gt; Real Time -&gt; App Route Statistics</em></p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/bfd-5.png"></p>
<h4 id="multiplicador-de-ruta-de-la-aplicaci√≥n">Multiplicador de ruta de la aplicaci√≥n<a hidden class="anchor" aria-hidden="true" href="#multiplicador-de-ruta-de-la-aplicaci√≥n">#</a></h4>
<p><img loading="lazy" src="/wp-Content/uploads/2024/02/captshot-2024-02-06-AT-12.16.05.png"></p>
<p>Para configurar el multiplicador</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/bfd-cofig-1.png"></p>
<hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>bfd app-route multiplier 3
</span></span></code></pre></div><p>El multiplicador indica la cantidad de buckets que se utilizar√°n para calcular las estad√≠sticas del t√∫nel, lo que influir√° en la decisi√≥n de redirigir el tr√°fico cuando las condiciones de la red empeoren.</p>
<p>Para esta ilustraci√≥n, se usa un multiplicador de 3.</p>
<p>Por defecto, el multiplicador est√° configurado en 6.</p>
<p>Observa que cada bucket contiene 4 paquetes.</p>
<p><code>hello interval (s) x Poll interval (s)</code></p>
<p>En el mundo real, 4 paquetes ser√≠an ** demasiado bajo **. Si tomamos todos los valores predeterminados, terminar√≠amos con un cubo de 600 paquetes. Consulte la [Gu√≠a de implementaci√≥n de AAR] (<a href="https://www.cisco.com/c/en/us/td/docs/solutions/cvd/sdwan/cisco-sdwan-application-ware-routing-deploy-guide.html" target="_blank" rel="nofollow noopener noreferrer">https://www.cisco.com/c/en/us/td/docs/solutions/cvd/sdwan/cisco-sdwan-application-ware-routing-deploy-guide.html</a>) para obtener m√°s detalles y opciones.</p>
<p>Despu√©s de llenar todos los buckets, se calcular√°n las estad√≠sticas del t√∫nel.</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/bfd-10.png"></p>
<p>Podemos visualizar los buckets y los c√°lculos de la media. F√≠jate que los valores son los mismos para todos los buckets. No te confundas con las columnas de avg loss, latency y jitter que se mostraron antes.</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/bfd-11.png"></p>
<p>Este mecanismo act√∫a como una ventana deslizante que descartar√° el bucket m√°s antiguo para hacer espacio al nuevo, recalculando las estad√≠sticas del t√∫nel cada poll interval.</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/bfd-9-1.png"></p>
<h3 id="configuraci√≥n-de-la-pol√≠tica-aar">Configuraci√≥n de la pol√≠tica AAR<a hidden class="anchor" aria-hidden="true" href="#configuraci√≥n-de-la-pol√≠tica-aar">#</a></h3>
<p>Ahora que tenemos una mejor comprensi√≥n sobre SLA y BFD, podemos crear las reglas que gobernar√°n el comportamiento de nuestra pol√≠tica AAR. As√≠ es como se ver√° en SD-WAN Manager.</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/s1-aar100-1.png"></p>
<p>Esta es probablemente la forma m√°s simple que podemos configurar. El tr√°fico de Google Apps ser√° <em>matcheado</em> y se utilizar√°n los transportes que coincidan con nuestro Custom-SLA de manera indiferente.</p>
<p>En otras palabras, si tenemos 3 transportes diferentes y todos cumplen con el SLA, el tr√°fico se balancear√° entre ellos.</p>
<p>¬øQu√© pasa si queremos que el tr√°fico prefiera uno de los transportes? Bueno, podemos especificar un <em>Prefered Color</em> como se muestra a continuaci√≥n:</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/02/manger-aar.png"></p>
<p>En esta secuencia, las aplicaciones de voz se emparejan, y el SLA de los transportes debe coincidir con el de Bussiness-Critical. Se dar√° preferencia a MPLS si cumple con el SLA. La acci√≥n cuando no se cumple el SLA se configura en Load Balance entre los colores disponibles.</p>
<p>A primera vista, esto parece muy simple, pero hay algunos detalles que debemos conocer si queremos entender completamente c√≥mo se comportar√° el tr√°fico bajo diferentes circunstancias.</p>
<p>Te invito a leer mi <a href="simplificando-aar-analizando-diferentes-escenarios">pr√≥ximo post</a> donde exploraremos algunos escenarios para tener un mejor entendimiento de esta tecnolog√≠a. ¬°Nos vemos all√°!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer><script src="https://utteranc.es/client.js"
        repo="aruiz-p/netwithalex"
        issue-term="title"
        label="comments"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/es/">NetWithAlex</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copiar';

        function copyingDone() {
            copybutton.innerHTML = '¬°copiado!';
            setTimeout(() => {
                copybutton.innerHTML = 'copiar';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
