<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>TLOC Extension in Cisco SD-WAN: Design &amp; Configuration | NetWithAlex</title>
<meta name="keywords" content="">
<meta name="description" content="Learn how Cisco SD-WAN TLOC Extension works, its use cases, configuration steps, and best practices to improve resiliency and optimize WAN resources..">
<meta name="author" content="Alex">
<link rel="canonical" href="http://localhost:1313/tloc-ext-en/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/assets/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tloc-ext-en/">
<link rel="alternate" hreflang="es" href="http://localhost:1313/tloc-ext-es/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>















    
        <link rel="preconnect" href="https://plausible.io">
    
        <!-- Dev mode : We do not load plausible script to avoid bloating your stats -->

<!-- If you are using Content-Security-Policy, do not forget to add this code to your CSP : 
  script-src 'unsafe-inline' https://plausible.io
  connect-src 'unsafe-inline' https://plausible.io
  or just add the partial 'plausible_csp.html' to those 2 csp directives in your 'index.headers' file
-->



    
    <script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
    <script>
         
         
         
    </script>

    

<link rel="stylesheet" href="/assets/css/custom.css">
<meta property="og:url" content="http://localhost:1313/tloc-ext-en/">
  <meta property="og:site_name" content="NetWithAlex">
  <meta property="og:title" content="TLOC Extension in Cisco SD-WAN: Design & Configuration">
  <meta property="og:description" content="Learn how Cisco SD-WAN TLOC Extension works, its use cases, configuration steps, and best practices to improve resiliency and optimize WAN resources..">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-15T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-08-15T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TLOC Extension in Cisco SD-WAN: Design &amp; Configuration">
<meta name="twitter:description" content="Learn how Cisco SD-WAN TLOC Extension works, its use cases, configuration steps, and best practices to improve resiliency and optimize WAN resources..">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "TLOC Extension in Cisco SD-WAN: Design \u0026 Configuration",
      "item": "http://localhost:1313/tloc-ext-en/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "TLOC Extension in Cisco SD-WAN: Design \u0026 Configuration",
  "name": "TLOC Extension in Cisco SD-WAN: Design \u0026 Configuration",
  "description": "Learn how Cisco SD-WAN TLOC Extension works, its use cases, configuration steps, and best practices to improve resiliency and optimize WAN resources..",
  "keywords": [
    
  ],
  "articleBody": "Introduction In a Cisco SD-WAN fabric, transport resiliency and efficient use of transports are critical for delivering reliable connectivity. Each WAN Edge in the fabric typically connects to one transport network, like MPLS, Internet, 4G/5G, etc. The unique logical combination of System-ip + Color + Encapsulation result in what are known as Transport Locators (TLOCs).\nHowever, on dual router scenarios, not every branch site has the luxury of multiple WAN circuits connected to a single router. In some cases, one WAN circuit may be terminated on one router, while another circuit is only available on a second router. This is where TLOC Extension comes in, allowing one router to leverage the transport connection of another router in the same site, increasing tunnel redundancy and flexibility.\nLet‚Äôs explore it in more detail.\nWhat is TLOC Extension? TLOC Extension in Cisco SD-WAN enables a router to use the transport interface of another router as if it were its own. This is done by extending the TLOC (Transport Locator) from one router to another through a Layer 2 or Layer 3 connection. The physical representation could like like this:\nFigure 1 ‚Äì Layer 2 TLOC Extension In practice, this means Router A can leverage Router B‚Äôs transport circuits (for example, MPLS or Internet) without being directly connected to them, and vice versa. This mechanism ensures that all routers at the site can fully use all the available transports in the SD-WAN fabric, even if they don‚Äôt have their own dedicated transport connections. The logical picture is something like this:\nFigure 2 ‚Äì Dual Transport TLOC extension BR1-1 can now use INET as transport and BR1-2 can use MPLS as an available transport as well.\nSome of the advantages of using TLOC extension:\nIt reduces the direct number of circuits you need per router. It provides resiliency at the site level. It simplifies deployments in branch offices where only one transport circuit is physically available. Use Cases TLOC Extension addresses real-world challenges in SD-WAN deployments. Some common use cases include:\nSmall Branch Sites with Limited Connectivity A branch may only have a single Internet or MPLS link. With TLOC Extension, two routers can still operate with redundancy by sharing that single transport.\nFigure 3 ‚Äì Single Transport TLOC Extension Cost Optimization Instead of purchasing multiple circuits for each router, costs can be reduced by having one circuit per transport type and sharing it across routers.\nFigure 4 ‚Äì Cost Comparison TLOC Extension vs Full Mesh Transport Redundancy When a site has different transport types split across different routers (Example: Internet on Router A, MPLS on Router B), TLOC Extension ensures both routers can access both transport types.\nFigure 5 ‚Äì Dual Transport TLOC extension Architecture and How it Works A TLOC is defined by three elements:\nSystem IP of the router Color (which transport type the link belongs to, e.g., public-internet, mpls, lte) Encapsulation (IPsec/GRE) With TLOC Extension, one router establishes an internal tunnel across the LAN to another router, allowing it to advertise and use that TLOC.\nKey points about the architecture:\nA TLOC extension is built over a physical LAN interface between the two routers, sub-interfaces and dot1Q encapsulations are commonly used. The ‚Äúdonor‚Äù router provides access to its transport interface. The ‚Äúreceiver‚Äù router can then form control and data plane connections using that transport. From a fabric perspective, both routers appear as if they were independently connected to the transport cloud.\nConfiguring TLOC Extension I will take advantage of the UX 2.0 guided workflows to quickly generate a configuration for a dual-router site with TLOC extension and we‚Äôll examine it.\nFigure 6 ‚Äì UX2.0 Workflow TLOC Extension Configuration The resulting configuration has the following interfaces on the Transport Feature Profile.\nFigure 7 ‚Äì Interfaces Configured through Workflow Six different interfaces were created, let‚Äôs examine the first three to understand how TLOC extension is configured.\nNote I needed to remove some unneeded NAT on some of those interfaces, aside from this, configuration was ready.\nInterface #1 - Internet TLOC The first interface connect directly to the Internet Transport, standard interface and TLOC configuration.\ninterface GigabitEthernet1 description WAN Interface - biz-internet ip address 31.11.0.2 255.255.255.252 ip nat outside sdwan interface GigabitEthernet1 tunnel-interface encapsulation ipsec weight 1 color biz-internet Interface #2 - ‚ÄúDonated‚Äù interface to the Second Router The second interface is needed to extend Internet TLOC to the BR1-2, it needs an ip address and BR1-2 will use it as a default gateway.\ninterface GigabitEthernet4 description WAN Interface - biz-internet ip address 172.17.1.1 255.255.255.252 sdwan interface GigabitEthernet4 tloc-extension GigabitEthernet1 exit Interface #3 - MPLS TLOC This is a normal TLOC configuration that will use BR1-2‚Äôs IP address as default gateway for the MPLS transport to work.\ninterface GigabitEthernet5 description WAN VPN 0 Interface - MPLS ip address 172.17.1.5 255.255.255.252 ! ip route 0.0.0.0 0.0.0.0 172.17.1.6 sdwan interface GigabitEthernet5 tunnel-interface encapsulation ipsec weight 1 color mpls The subnet 172.17.140/30 needs to be advertised on the MPLS underlay. Typically, BGP is used to do this advertisement.\nThe configuration of interfaces 4,5 and 6 are a mirror of what we just saw.\nValidation Once this configuration is in place, we can validate our control and data plane:\nOn BR1-1, notice that I have two different SD-WAN interfaces, Gig1 and Gig5\nLisbon_10-1#show sdwan control local-properties personality vedge sp-organization-name MYSDWAN-LAB123 organization-name MYSDWAN-LAB123 root-ca-chain-status Installed root-ca-crl-status Not-Installed ... PUBLIC PUBLIC PRIVATE PRIVATE PRIVATE MAX RESTRICT/ LAST SPI TIME NAT VM BIND INTERFACE IPv4 PORT IPv4 IPv6 PORT VS/VM COLOR STATE CNTRL CONTROL/ LR/LB CONNECTION REMAINING TYPE CON REG INTERFACE STUN PRF IDs ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- GigabitEthernet1 31.11.0.2 12386 31.11.0.2 :: 12386 1/1 biz-internet up 2 no/yes/no No/No 0:00:00:10 0:03:06:00 N 5 Default N/A GigabitEthernet5 172.17.1.5 12426 172.17.1.5 :: 12426 1/0 mpls up 2 no/yes/no No/No 0:00:00:15 0:04:19:53 N 5 Default N/A Control connections work on both transports as expected\nLisbon_10-1#show sdwan control connections PEER PEER CONTROLLER PEER PEER PEER SITE DOMAIN PEER PRIV PEER PUB GROUP TYPE PROT SYSTEM IP ID ID PRIVATE IP PORT PUBLIC IP PORT ORGANIZATION LOCAL COLOR PROXY STATE UPTIME ID ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- vsmart dtls 1.0.0.3 999 1 10.1.0.4 12446 10.1.0.4 12446 MYSDWAN-LAB123 biz-internet No up 0:20:59:37 0 vsmart dtls 1.0.0.3 999 1 10.1.0.4 12446 10.1.0.4 12446 MYSDWAN-LAB123 mpls No up 0:07:45:45 0 vbond dtls 0.0.0.0 0 0 10.1.0.3 12346 10.1.0.3 12346 MYSDWAN-LAB123 biz-internet - up 0:20:59:38 0 vbond dtls 0.0.0.0 0 0 10.1.0.3 12346 10.1.0.3 12346 MYSDWAN-LAB123 mpls - up 0:07:48:46 0 vmanage dtls 1.0.0.1 999 0 10.1.0.1 12646 10.1.0.1 12646 MYSDWAN-LAB123 biz-internet No up 0:20:59:38 0 My data plane also established using MPLS and Biz-internet\nLisbon_10-1#sh sdwan bfd sessions SOURCE TLOC REMOTE TLOC DST PUBLIC DST PUBLIC DETECT TX SYSTEM IP SITE ID STATE COLOR COLOR SOURCE IP IP PORT ENCAP MULTIPLIER INTERVAL(msec UPTIME TRANSITIONS ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.1.20.1 20 up biz-internet mpls 31.11.0.2 21.21.0.2 12346 ipsec 7 1000 0:07:48:41 0 1.1.20.2 20 up biz-internet mpls 31.11.0.2 21.22.0.2 12346 ipsec 7 1000 0:07:48:41 0 1.1.200.1 200 up biz-internet mpls 31.11.0.2 21.201.0.2 12346 ipsec 7 1000 0:21:01:36 1 1.1.200.2 200 up biz-internet mpls 31.11.0.2 21.202.0.2 12346 ipsec 7 1000 0:21:01:36 1 ... 1.1.20.1 20 up mpls mpls 172.17.1.5 21.21.0.2 12346 ipsec 7 1000 0:07:47:43 0 1.1.20.2 20 up mpls mpls 172.17.1.5 21.22.0.2 12346 ipsec 7 1000 0:07:47:43 0 1.1.200.1 200 up mpls mpls 172.17.1.5 21.201.0.2 12346 ipsec 7 1000 0:07:47:43 0 1.1.200.2 200 up mpls mpls 172.17.1.5 21.202.0.2 12346 ipsec 7 1000 0:07:47:43 0 Considerations When deploying TLOC Extension, consider the following:\nUse Direct Connections Where Possible A direct cable between routers is preferred over a shared switch to minimize failure points.\nUse sub-interfaces if there aren‚Äôt enough interfaces In situations where devices don‚Äôt have available ports, you can always do layer 2 TLOCs using sub-interfaces, just be mindful of the available bandwidth as the throughput will be shared.\nPlan for Redundancy Critical sites are better off with direct connections to available transports. TLOC extensions will help extend transports, but will not protect in case of device failures.\nAdvertise TLOC extension subnets To provide your private tloc extensions with connectivity, the local subnet must be reachable on the private transport. You can use BGP, static or any other routing means to achieve it.\nAvoid Overloading the LAN Link The link between routers should be sized appropriately, as all extended traffic will traverse it.\nLayer 3 TLOC Extension Tlox Extension can be configured as layer 3 and GRE encapsulation. This is especially useful when two devices don‚Äôt have a direct layer 2 adjacency.\nConclusion TLOC Extension is a powerful feature in Cisco SD-WAN that enhances flexibility and resiliency at branch sites. By allowing routers to share transport connections, it optimizes resource usage, lowers costs, and ensures that all routers can fully participate in the SD-WAN fabric, even when dedicated WAN links are limited.\nProper planning, redundancy, and monitoring are essential to get the most value out of this feature. When implemented correctly, TLOC Extension can significantly improve the robustness and cost-effectiveness of an SD-WAN deployment.\nüëâ Stay tuned for the next blog, where we‚Äôll continue exploring practical ways to strengthen and optimize your Cisco SD-WAN design\n",
  "wordCount" : "1506",
  "inLanguage": "en",
  "datePublished": "2025-08-15T00:00:00Z",
  "dateModified": "2025-08-15T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Alex"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/tloc-ext-en/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "NetWithAlex",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/assets/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="NetWithAlex (Alt + H)">NetWithAlex</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://localhost:1313/es/" title="Espa√±ol"
                            aria-label="Espa√±ol">Es</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/category/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="About me.">
                    <span>About me.</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="üîç">
                    <span>üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;¬ª&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      TLOC Extension in Cisco SD-WAN: Design &amp; Configuration
    </h1>
    <div class="post-description">
      Learn how Cisco SD-WAN TLOC Extension works, its use cases, configuration steps, and best practices to improve resiliency and optimize WAN resources..
    </div>
    <div class="post-meta"><span title='2025-08-15 00:00:00 +0000 +0000'>August 15, 2025</span>&nbsp;¬∑&nbsp;8 min&nbsp;¬∑&nbsp;Alex&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="http://localhost:1313/tloc-ext-es/">Es</a>
    </li>
</ul>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#what-is-tloc-extension" aria-label="What is TLOC Extension?">What is TLOC Extension?</a></li>
                <li>
                    <a href="#use-cases" aria-label="Use Cases">Use Cases</a><ul>
                        
                <li>
                    <a href="#small-branch-sites-with-limited-connectivity" aria-label="Small Branch Sites with Limited Connectivity">Small Branch Sites with Limited Connectivity</a></li>
                <li>
                    <a href="#cost-optimization" aria-label="Cost Optimization">Cost Optimization</a></li>
                <li>
                    <a href="#transport-redundancy" aria-label="Transport Redundancy">Transport Redundancy</a></li></ul>
                </li>
                <li>
                    <a href="#architecture-and-how-it-works" aria-label="Architecture and How it Works">Architecture and How it Works</a></li>
                <li>
                    <a href="#configuring-tloc-extension" aria-label="Configuring TLOC Extension">Configuring TLOC Extension</a><ul>
                        
                <li>
                    <a href="#interface-1---internet-tloc" aria-label="Interface #1 - Internet TLOC">Interface #1 - Internet TLOC</a></li>
                <li>
                    <a href="#interface-2---donated-interface-to-the-second-router" aria-label="Interface #2 - &ldquo;Donated&rdquo; interface to the Second Router">Interface #2 - &ldquo;Donated&rdquo; interface to the Second Router</a></li>
                <li>
                    <a href="#interface-3---mpls-tloc" aria-label="Interface #3 - MPLS TLOC">Interface #3 - MPLS TLOC</a></li></ul>
                </li>
                <li>
                    <a href="#validation" aria-label="Validation">Validation</a></li>
                <li>
                    <a href="#considerations" aria-label="Considerations">Considerations</a><ul>
                        
                <li>
                    <a href="#use-direct-connections-where-possible" aria-label="Use Direct Connections Where Possible">Use Direct Connections Where Possible</a></li>
                <li>
                    <a href="#use-sub-interfaces-if-there-arent-enough-interfaces" aria-label="Use sub-interfaces if there aren&rsquo;t enough interfaces">Use sub-interfaces if there aren&rsquo;t enough interfaces</a></li>
                <li>
                    <a href="#plan-for-redundancy" aria-label="Plan for Redundancy">Plan for Redundancy</a></li>
                <li>
                    <a href="#advertise-tloc-extension-subnets" aria-label="Advertise TLOC extension subnets">Advertise TLOC extension subnets</a></li>
                <li>
                    <a href="#avoid-overloading-the-lan-link" aria-label="Avoid Overloading the LAN Link">Avoid Overloading the LAN Link</a></li>
                <li>
                    <a href="#layer-3-tloc-extension" aria-label="Layer 3 TLOC Extension">Layer 3 TLOC Extension</a></li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>In a Cisco SD-WAN fabric, transport resiliency and efficient use of transports are critical for delivering reliable connectivity. Each WAN Edge in the fabric typically connects to one transport network, like MPLS, Internet, 4G/5G, etc. The unique logical combination of <em>System-ip + Color + Encapsulation</em> result in what are known as <strong>Transport Locators (TLOCs)</strong>.</p>
<p>However, on dual router scenarios, not every branch site has the luxury of multiple WAN circuits connected to a single router. In some cases, one WAN circuit may be terminated on one router, while another circuit is only available on a second router. This is where TLOC Extension comes in, allowing one router to leverage the transport connection of another router in the same site, increasing tunnel redundancy and flexibility.</p>
<p>Let&rsquo;s explore it in more detail.</p>
<h2 id="what-is-tloc-extension">What is TLOC Extension?<a hidden class="anchor" aria-hidden="true" href="#what-is-tloc-extension">#</a></h2>
<p>TLOC Extension in Cisco SD-WAN enables a router to use the transport interface of another router as if it were its own. This is done by extending the TLOC (Transport Locator) from one router to another through a Layer 2 or Layer 3 connection. The physical representation could like like this:</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/08/tloc-ex-1.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 1</strong>
       ‚Äì 
      Layer 2 TLOC Extension
    </figcaption>
  
</figure>

<p>In practice, this means Router A can leverage Router B‚Äôs transport circuits (for example, MPLS or Internet) without being directly connected to them, and vice versa. This mechanism ensures that all routers at the site can fully use all the available transports in the SD-WAN fabric, even if they don‚Äôt have their own dedicated transport connections. The logical picture is something like this:</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/08/tloc-ex-2.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 2</strong>
       ‚Äì 
      Dual Transport TLOC extension
    </figcaption>
  
</figure>

<p><em>BR1-1</em> can now use <strong>INET</strong> as transport and <em>BR1-2</em> can use <strong>MPLS</strong> as an available transport as well.</p>
<p>Some of the advantages of using TLOC extension:</p>
<ul>
<li>It reduces the direct number of circuits you need per router.</li>
<li>It provides resiliency at the site level.</li>
<li>It simplifies deployments in branch offices where only one transport circuit is physically available.</li>
</ul>
<h2 id="use-cases">Use Cases<a hidden class="anchor" aria-hidden="true" href="#use-cases">#</a></h2>
<p>TLOC Extension addresses real-world challenges in SD-WAN deployments. Some common use cases include:</p>
<h3 id="small-branch-sites-with-limited-connectivity">Small Branch Sites with Limited Connectivity<a hidden class="anchor" aria-hidden="true" href="#small-branch-sites-with-limited-connectivity">#</a></h3>
<p>A branch may only have a single Internet or MPLS link. With TLOC Extension, two routers can still operate with redundancy by sharing that single transport.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/08/tloc-ex-4.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 3</strong>
       ‚Äì 
      Single Transport TLOC Extension
    </figcaption>
  
</figure>

<h3 id="cost-optimization">Cost Optimization<a hidden class="anchor" aria-hidden="true" href="#cost-optimization">#</a></h3>
<p>Instead of purchasing multiple circuits for each router, costs can be reduced by having one circuit per transport type and sharing it across routers.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/08/tloc-ex-4.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 4</strong>
       ‚Äì 
      Cost Comparison TLOC Extension vs Full Mesh
    </figcaption>
  
</figure>

<h3 id="transport-redundancy">Transport Redundancy<a hidden class="anchor" aria-hidden="true" href="#transport-redundancy">#</a></h3>
<p>When a site has different transport types split across different routers (Example: Internet on Router A, MPLS on Router B), TLOC Extension ensures both routers can access both transport types.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/08/tloc-ex-2.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 5</strong>
       ‚Äì 
      Dual Transport TLOC extension
    </figcaption>
  
</figure>

<h2 id="architecture-and-how-it-works">Architecture and How it Works<a hidden class="anchor" aria-hidden="true" href="#architecture-and-how-it-works">#</a></h2>
<p>A TLOC is defined by three elements:</p>
<ul>
<li>System IP of the router</li>
<li>Color (which transport type the link belongs to, e.g., public-internet, mpls, lte)</li>
<li>Encapsulation (IPsec/GRE)</li>
</ul>
<p>With TLOC Extension, one router establishes an internal tunnel across the LAN to another router, allowing it to advertise and use that TLOC.</p>
<p>Key points about the architecture:</p>
<ul>
<li>A TLOC extension is built over a physical LAN interface between the two routers, <em>sub-interfaces</em> and <em>dot1Q</em> encapsulations are commonly used.</li>
<li>The ‚Äúdonor‚Äù router provides access to its transport interface.</li>
<li>The ‚Äúreceiver‚Äù router can then form control and data plane connections using that transport.</li>
</ul>
<p>From a fabric perspective, both routers appear as if they were <strong>independently</strong> connected to the transport cloud.</p>
<h2 id="configuring-tloc-extension">Configuring TLOC Extension<a hidden class="anchor" aria-hidden="true" href="#configuring-tloc-extension">#</a></h2>
<p>I will take advantage of the UX 2.0 guided workflows to quickly generate a configuration for a dual-router site with TLOC extension and we&rsquo;ll examine it.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/08/tloc-ex-5.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 6</strong>
       ‚Äì 
      UX2.0 Workflow TLOC Extension Configuration
    </figcaption>
  
</figure>

<p>The resulting configuration has the following interfaces on the <em>Transport Feature Profile</em>.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/08/tloc-ex-6.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 7</strong>
       ‚Äì 
      Interfaces Configured through Workflow
    </figcaption>
  
</figure>

<p>Six different interfaces were created, let&rsquo;s examine the first three to understand how TLOC extension is configured.</p>
<p><strong>Note</strong> I needed to remove some unneeded NAT on some of those interfaces, aside from this, configuration was ready.</p>
<h3 id="interface-1---internet-tloc">Interface #1 - Internet TLOC<a hidden class="anchor" aria-hidden="true" href="#interface-1---internet-tloc">#</a></h3>
<p>The first interface connect directly to the Internet Transport, standard interface and TLOC configuration.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>interface GigabitEthernet1
</span></span><span style="display:flex;"><span> description WAN Interface - biz-internet
</span></span><span style="display:flex;"><span> ip address 31.11.0.2 255.255.255.252
</span></span><span style="display:flex;"><span> ip nat outside
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sdwan
</span></span><span style="display:flex;"><span> interface GigabitEthernet1
</span></span><span style="display:flex;"><span>  tunnel-interface
</span></span><span style="display:flex;"><span>   encapsulation ipsec weight 1
</span></span><span style="display:flex;"><span>   color biz-internet
</span></span></code></pre></div><h3 id="interface-2---donated-interface-to-the-second-router">Interface #2 - &ldquo;Donated&rdquo; interface to the Second Router<a hidden class="anchor" aria-hidden="true" href="#interface-2---donated-interface-to-the-second-router">#</a></h3>
<p>The second interface is needed to extend Internet TLOC to the BR1-2, it needs an ip address and BR1-2 will use it as a default gateway.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>interface GigabitEthernet4
</span></span><span style="display:flex;"><span> description WAN Interface - biz-internet
</span></span><span style="display:flex;"><span> ip address 172.17.1.1 255.255.255.252
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sdwan
</span></span><span style="display:flex;"><span>interface GigabitEthernet4
</span></span><span style="display:flex;"><span>  tloc-extension GigabitEthernet1
</span></span><span style="display:flex;"><span> exit
</span></span></code></pre></div><h3 id="interface-3---mpls-tloc">Interface #3 - MPLS TLOC<a hidden class="anchor" aria-hidden="true" href="#interface-3---mpls-tloc">#</a></h3>
<p>This is a normal TLOC configuration that will use <em>BR1-2&rsquo;s IP address</em> as default gateway for the MPLS transport to work.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>interface GigabitEthernet5
</span></span><span style="display:flex;"><span> description WAN VPN 0 Interface - MPLS
</span></span><span style="display:flex;"><span> ip address 172.17.1.5 255.255.255.252
</span></span><span style="display:flex;"><span>!
</span></span><span style="display:flex;"><span>ip route 0.0.0.0 0.0.0.0 172.17.1.6
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sdwan
</span></span><span style="display:flex;"><span>interface GigabitEthernet5
</span></span><span style="display:flex;"><span>  tunnel-interface
</span></span><span style="display:flex;"><span>   encapsulation ipsec weight 1
</span></span><span style="display:flex;"><span>   color mpls
</span></span></code></pre></div><p>The subnet 172.17.140/30 needs to be advertised on the MPLS underlay. Typically, BGP is used to do this advertisement.</p>
<p>The configuration of interfaces 4,5 and 6 are a mirror of what we just saw.</p>
<h2 id="validation">Validation<a hidden class="anchor" aria-hidden="true" href="#validation">#</a></h2>
<p>Once this configuration is in place, we can validate our control and data plane:</p>
<p>On BR1-1, notice that I have two different SD-WAN interfaces, Gig1 and Gig5</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Lisbon_10-1#show sdwan control local-properties 
</span></span><span style="display:flex;"><span>personality                       vedge
</span></span><span style="display:flex;"><span>sp-organization-name              MYSDWAN-LAB123
</span></span><span style="display:flex;"><span>organization-name                 MYSDWAN-LAB123
</span></span><span style="display:flex;"><span>root-ca-chain-status              Installed
</span></span><span style="display:flex;"><span>root-ca-crl-status                Not-Installed
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>                         PUBLIC          PUBLIC PRIVATE         PRIVATE         PRIVATE                         MAX   RESTRICT/           LAST         SPI TIME    NAT  VM          BIND
</span></span><span style="display:flex;"><span>INTERFACE                IPv4            PORT   IPv4            IPv6            PORT    VS/VM COLOR       STATE CNTRL CONTROL/     LR/LB  CONNECTION   REMAINING   TYPE CON REG     INTERFACE
</span></span><span style="display:flex;"><span>                                                                                                                      STUN                                              PRF IDs
</span></span><span style="display:flex;"><span>-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>GigabitEthernet1       31.11.0.2       12386  31.11.0.2       ::                12386    1/1  biz-internet     up     2      no/yes/no   No/No  0:00:00:10   0:03:06:00  N    5  Default N/A                           
</span></span><span style="display:flex;"><span>GigabitEthernet5       172.17.1.5      12426  172.17.1.5      ::                12426    1/0  mpls             up     2      no/yes/no   No/No  0:00:00:15   0:04:19:53  N    5  Default N/A                           
</span></span><span style="display:flex;"><span>          
</span></span></code></pre></div><p>Control connections work on both transports as expected</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Lisbon_10-1#show sdwan control connections
</span></span><span style="display:flex;"><span>                                                                                       PEER                                          PEER                                          CONTROLLER 
</span></span><span style="display:flex;"><span>PEER    PEER PEER            SITE       DOMAIN PEER                                    PRIV  PEER                                    PUB                                           GROUP      
</span></span><span style="display:flex;"><span>TYPE    PROT SYSTEM IP       ID         ID     PRIVATE IP                              PORT  PUBLIC IP                               PORT  ORGANIZATION            LOCAL COLOR     PROXY STATE UPTIME      ID         
</span></span><span style="display:flex;"><span>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>vsmart  dtls 1.0.0.3         999        1      10.1.0.4                                12446 10.1.0.4                                12446 MYSDWAN-LAB123          biz-internet    No    up     0:20:59:37 0           
</span></span><span style="display:flex;"><span>vsmart  dtls 1.0.0.3         999        1      10.1.0.4                                12446 10.1.0.4                                12446 MYSDWAN-LAB123          mpls            No    up     0:07:45:45 0           
</span></span><span style="display:flex;"><span>vbond   dtls 0.0.0.0         0          0      10.1.0.3                                12346 10.1.0.3                                12346 MYSDWAN-LAB123          biz-internet    -     up     0:20:59:38 0           
</span></span><span style="display:flex;"><span>vbond   dtls 0.0.0.0         0          0      10.1.0.3                                12346 10.1.0.3                                12346 MYSDWAN-LAB123          mpls            -     up     0:07:48:46 0           
</span></span><span style="display:flex;"><span>vmanage dtls 1.0.0.1         999        0      10.1.0.1                                12646 10.1.0.1                                12646 MYSDWAN-LAB123          biz-internet    No    up     0:20:59:38 0           
</span></span></code></pre></div><p>My data plane also established using MPLS and Biz-internet</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Lisbon_10-1#sh sdwan bfd sessions 
</span></span><span style="display:flex;"><span>                                      SOURCE TLOC      REMOTE TLOC                                      DST PUBLIC                      DST PUBLIC         DETECT      TX                              
</span></span><span style="display:flex;"><span>SYSTEM IP        SITE ID     STATE       COLOR            COLOR            SOURCE IP                                       IP                                              PORT        ENCAP  MULTIPLIER  INTERVAL(msec  UPTIME          TRANSITIONS   
</span></span><span style="display:flex;"><span>-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>1.1.20.1         20          up          biz-internet     mpls             31.11.0.2                                       21.21.0.2                                       12346       ipsec  7           1000           0:07:48:41      0             
</span></span><span style="display:flex;"><span>1.1.20.2         20          up          biz-internet     mpls             31.11.0.2                                       21.22.0.2                                       12346       ipsec  7           1000           0:07:48:41      0             
</span></span><span style="display:flex;"><span>1.1.200.1        200         up          biz-internet     mpls             31.11.0.2                                       21.201.0.2                                      12346       ipsec  7           1000           0:21:01:36      1             
</span></span><span style="display:flex;"><span>1.1.200.2        200         up          biz-internet     mpls             31.11.0.2                                       21.202.0.2                                      12346       ipsec  7           1000           0:21:01:36      1             
</span></span><span style="display:flex;"><span>...                  
</span></span><span style="display:flex;"><span>1.1.20.1         20          up          mpls             mpls             172.17.1.5                                      21.21.0.2                                       12346       ipsec  7           1000           0:07:47:43      0             
</span></span><span style="display:flex;"><span>1.1.20.2         20          up          mpls             mpls             172.17.1.5                                      21.22.0.2                                       12346       ipsec  7           1000           0:07:47:43      0             
</span></span><span style="display:flex;"><span>1.1.200.1        200         up          mpls             mpls             172.17.1.5                                      21.201.0.2                                      12346       ipsec  7           1000           0:07:47:43      0             
</span></span><span style="display:flex;"><span>1.1.200.2        200         up          mpls             mpls             172.17.1.5                                      21.202.0.2                                      12346       ipsec  7           1000           0:07:47:43      0             
</span></span></code></pre></div><h2 id="considerations">Considerations<a hidden class="anchor" aria-hidden="true" href="#considerations">#</a></h2>
<p>When deploying TLOC Extension, consider the following:</p>
<h3 id="use-direct-connections-where-possible">Use Direct Connections Where Possible<a hidden class="anchor" aria-hidden="true" href="#use-direct-connections-where-possible">#</a></h3>
<p>A direct cable between routers is preferred over a shared switch to minimize failure points.</p>
<h3 id="use-sub-interfaces-if-there-arent-enough-interfaces">Use sub-interfaces if there aren&rsquo;t enough interfaces<a hidden class="anchor" aria-hidden="true" href="#use-sub-interfaces-if-there-arent-enough-interfaces">#</a></h3>
<p>In situations where devices don&rsquo;t have available ports, you can always do layer 2 TLOCs using sub-interfaces, just be mindful of the available bandwidth as the throughput will be shared.</p>
<h3 id="plan-for-redundancy">Plan for Redundancy<a hidden class="anchor" aria-hidden="true" href="#plan-for-redundancy">#</a></h3>
<p>Critical sites are better off with direct connections to available transports. TLOC extensions will help extend transports, but will not protect in case of device failures.</p>
<h3 id="advertise-tloc-extension-subnets">Advertise TLOC extension subnets<a hidden class="anchor" aria-hidden="true" href="#advertise-tloc-extension-subnets">#</a></h3>
<p>To provide your private tloc extensions with connectivity, the local subnet must be reachable on the private transport. You can use BGP, static or any other routing means to achieve it.</p>
<h3 id="avoid-overloading-the-lan-link">Avoid Overloading the LAN Link<a hidden class="anchor" aria-hidden="true" href="#avoid-overloading-the-lan-link">#</a></h3>
<p>The link between routers should be sized appropriately, as all extended traffic will traverse it.</p>
<h3 id="layer-3-tloc-extension">Layer 3 TLOC Extension<a hidden class="anchor" aria-hidden="true" href="#layer-3-tloc-extension">#</a></h3>
<p>Tlox Extension can be configured as layer 3 and GRE encapsulation. This is especially useful when two devices don&rsquo;t have a direct layer 2 adjacency.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>TLOC Extension is a powerful feature in Cisco SD-WAN that enhances flexibility and resiliency at branch sites. By allowing routers to share transport connections, it optimizes resource usage, lowers costs, and ensures that all routers can fully participate in the SD-WAN fabric, even when dedicated WAN links are limited.</p>
<p>Proper planning, redundancy, and monitoring are essential to get the most value out of this feature. When implemented correctly, TLOC Extension can significantly improve the robustness and cost-effectiveness of an SD-WAN deployment.</p>
<p>üëâ Stay tuned for the next blog, where we‚Äôll continue exploring practical ways to strengthen and optimize your Cisco SD-WAN design</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer><script src="https://utteranc.es/client.js"
        repo="aruiz-p/netwithalex"
        issue-term="title"
        label="comments"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">NetWithAlex</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
