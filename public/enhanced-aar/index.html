<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Enhanced Application Aware Routing | NetWithAlex</title>
<meta name="keywords" content="">
<meta name="description" content="Introduction
In my previous series of posts, I talked in depth about Application Aware Routing (AAR), a technology used to direct traffic through best performing paths. AAR is a core functionality of SD-WAN and has been around for years. Naturally, new ideas to improve it came around and gave birth to a revamped implementation which Cisco called Enhanced Application Aware Routing (EAAR). Let¬¥s take a look to it.
AAR Limitations
Before diving into EAAR, let&rsquo;s understand why it was created.">
<meta name="author" content="alex">
<link rel="canonical" href="http://localhost:1313/enhanced-aar/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/assets/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/enhanced-aar/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="http://localhost:1313/enhanced-aar/">
  <meta property="og:site_name" content="NetWithAlex">
  <meta property="og:title" content="Enhanced Application Aware Routing">
  <meta property="og:description" content="Introduction In my previous series of posts, I talked in depth about Application Aware Routing (AAR), a technology used to direct traffic through best performing paths. AAR is a core functionality of SD-WAN and has been around for years. Naturally, new ideas to improve it came around and gave birth to a revamped implementation which Cisco called Enhanced Application Aware Routing (EAAR). Let¬¥s take a look to it.
AAR Limitations Before diving into EAAR, let‚Äôs understand why it was created.">
  <meta property="og:locale" content="en-US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-05T14:20:31+00:00">
    <meta property="article:modified_time" content="2025-01-05T14:20:31+00:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Enhanced Application Aware Routing">
<meta name="twitter:description" content="Introduction
In my previous series of posts, I talked in depth about Application Aware Routing (AAR), a technology used to direct traffic through best performing paths. AAR is a core functionality of SD-WAN and has been around for years. Naturally, new ideas to improve it came around and gave birth to a revamped implementation which Cisco called Enhanced Application Aware Routing (EAAR). Let¬¥s take a look to it.
AAR Limitations
Before diving into EAAR, let&rsquo;s understand why it was created.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Enhanced Application Aware Routing",
      "item": "http://localhost:1313/enhanced-aar/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Enhanced Application Aware Routing",
  "name": "Enhanced Application Aware Routing",
  "description": "Introduction In my previous series of posts, I talked in depth about Application Aware Routing (AAR), a technology used to direct traffic through best performing paths. AAR is a core functionality of SD-WAN and has been around for years. Naturally, new ideas to improve it came around and gave birth to a revamped implementation which Cisco called Enhanced Application Aware Routing (EAAR). Let¬¥s take a look to it.\nAAR Limitations Before diving into EAAR, let\u0026rsquo;s understand why it was created.\n",
  "keywords": [
    
  ],
  "articleBody": "Introduction In my previous series of posts, I talked in depth about Application Aware Routing (AAR), a technology used to direct traffic through best performing paths. AAR is a core functionality of SD-WAN and has been around for years. Naturally, new ideas to improve it came around and gave birth to a revamped implementation which Cisco called Enhanced Application Aware Routing (EAAR). Let¬¥s take a look to it.\nAAR Limitations Before diving into EAAR, let‚Äôs understand why it was created.\nThe current AAR implementation meassures the path quality using BFD, sending packets at a defined interval, 1 second by default. Loss, latency and jitter are derived from those packtes and these values are placed into rotating buckets to calculate an average tunnel health metric. This process would typically take between 10 and 60 minutes and with some configuration tweaks we could achieve times of 2 - 10 mins.\nFalse Positive Tunnel Scale issues if bfd hello interval is reduced Slow degradation detection and switch times Enhanced AAR In a nutshell these are the advantages\nImproves performance measurements using inline data Steer traffic in seconds rather than minutes 10s by default Dapening implemented for stability purposes Taking a deeper look Loss measurement is done per queue Latency is the RTT Jitter is unidirectional, which means it is measured at the receiver and reported to the sender\nIn Continuous Integration (CI), a crucial idea is the frequent uploading of code into the code base, often multiple times a day. This involves the constant merging of developer work with the code base, and the early identification of issues through the use of testing.\nCI Diagram\nBenefits Reduce time to market Achieve revenue and results at a faster pace Smaller backlog Smaller code changes Fewer bugs Build Process Involves activities such as:\nIntegration: Merging code. If several people are working on a project, the changes of each of them, must be consolidated in a single place. Linting: Analyze code to identify programming errors, software defects, style and incorrect amounts of spaces. Some linting tools to know: Pylint Pyflakes Bandit Black Unit Testing: Test individual components of code, not the entire code base. Write tests first, then code - Test Driven Development (TDD). Some tools to know: Pytest Unittest Build: This stage implies that all linting and unit tests have been completed and code is ready to be deployed on staging environment. Here an ‚Äúartifact‚Äù is built and stored independently. Suggestion: Explore the different tools shown above and know the basics of them\nCI tools These are some of the most common CI tools out there. In the next post we are going to explore them with more detail.\nCI ToolsURL**Travis CIhttps://travis-ci.orgJenkinshttps://jenkins.ioDronehttps://drone.ioGitLab CI**https://gitlab.com\nClick here to learn about them!\n",
  "wordCount" : "454",
  "inLanguage": "en",
  "datePublished": "2025-01-05T14:20:31Z",
  "dateModified": "2025-01-05T14:20:31Z",
  "author":{
    "@type": "Person",
    "name": "alex"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/enhanced-aar/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "NetWithAlex",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="NetWithAlex (Alt + H)">NetWithAlex</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://netwithalex.blog" title="Home">
                    <span>Home</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Blogs">
                    <span>Blogs</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="About me.">
                    <span>About me.</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="üîç">
                    <span>üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;¬ª&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Enhanced Application Aware Routing
    </h1>
    <div class="post-meta"><span title='2025-01-05 14:20:31 +0000 WET'>January 5, 2025</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;alex

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#aar-limitations" aria-label="AAR Limitations">AAR Limitations</a></li>
                <li>
                    <a href="#enhanced-aar" aria-label="Enhanced AAR">Enhanced AAR</a><ul>
                        
                <li>
                    <a href="#taking-a-deeper-look" aria-label="Taking a deeper look">Taking a deeper look</a><ul>
                        
                <li>
                    <a href="#benefits" aria-label="Benefits">Benefits</a></li>
                <li>
                    <a href="#build-process" aria-label="Build Process">Build Process</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#ci-tools" aria-label="CI tools">CI tools</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h3>
<p>In my previous <a href="/demystifying-aar-1-3-the-foundations">series of posts</a>, I talked in depth about Application Aware Routing (AAR), a technology used to direct traffic through best performing paths. AAR is a core functionality of SD-WAN and has been around for years. Naturally, new ideas to improve it came around and gave birth to a revamped implementation which Cisco called <strong><em>Enhanced</em></strong> Application Aware Routing (EAAR). Let¬¥s take a look to it.</p>
<h3 id="aar-limitations">AAR Limitations<a hidden class="anchor" aria-hidden="true" href="#aar-limitations">#</a></h3>
<p>Before diving into EAAR, let&rsquo;s understand why it was created.</p>
<p>The current AAR implementation meassures the path quality using BFD, sending packets at a defined interval, 1 second by default. Loss, latency and jitter are derived from those packtes and these values are placed into rotating buckets to calculate an average tunnel health metric. This process would typically take between 10 and 60 minutes and with some configuration tweaks we could achieve times of 2 - 10 mins.</p>
<ul>
<li>False Positive</li>
<li>Tunnel Scale issues if bfd hello interval is reduced</li>
<li>Slow degradation detection and switch times</li>
</ul>
<h3 id="enhanced-aar">Enhanced AAR<a hidden class="anchor" aria-hidden="true" href="#enhanced-aar">#</a></h3>
<p>In a nutshell these are the advantages</p>
<ul>
<li>Improves performance measurements using <strong>inline data</strong></li>
<li>Steer traffic in seconds rather than minutes 10s by default</li>
<li>Dapening implemented for stability purposes</li>
</ul>
<h4 id="taking-a-deeper-look">Taking a deeper look<a hidden class="anchor" aria-hidden="true" href="#taking-a-deeper-look">#</a></h4>
<p>Loss measurement is done per queue
Latency is the RTT
Jitter is unidirectional, which means it is measured at the receiver and reported to the sender</p>
<p>In <strong>Continuous Integration (CI)</strong>, a crucial idea is the frequent uploading of code into the code base, often multiple times a day. This involves the constant merging of developer work with the code base, and the early identification of issues through the use of testing.</p>
<p><img loading="lazy" src="/wp-content/uploads/2024/01/Screenshot-2024-01-17-at-15.23.10.png">CI Diagram</p>
<h5 id="benefits">Benefits<a hidden class="anchor" aria-hidden="true" href="#benefits">#</a></h5>
<ul>
<li>Reduce time to market</li>
<li>Achieve revenue and results at a faster pace</li>
<li>Smaller backlog</li>
<li>Smaller code changes</li>
<li>Fewer bugs</li>
</ul>
<h5 id="build-process">Build Process<a hidden class="anchor" aria-hidden="true" href="#build-process">#</a></h5>
<p>Involves activities such as:</p>
<ol>
<li><strong>Integration:</strong> Merging code. If several people are working on a project, the changes of each of them, must be consolidated in a single place.</li>
<li><strong>Linting:</strong> Analyze code to identify programming errors, software defects, style and incorrect amounts of spaces. Some linting tools to know:
<ul>
<li><a href="https://pypi.org/project/pylint/">Pylint</a></li>
<li><a href="https://pypi.org/project/pyflakes/">Pyflakes</a></li>
<li><a href="https://bandit.readthedocs.io/en/latest/">Bandit</a></li>
<li><a href="https://black.readthedocs.io/en/stable/">Black</a></li>
</ul>
</li>
<li><strong>Unit Testing:</strong> Test individual components of code, not the entire code base. Write tests first, then code - Test Driven Development (TDD). Some tools to know:
<ul>
<li><a href="https://docs.pytest.org/en/7.4.x/">Pytest</a></li>
<li><a href="https://docs.python.org/3/library/unittest.html">Unittest</a></li>
</ul>
</li>
<li><strong>Build:</strong> This stage implies that all linting and unit tests have been completed and code is ready to be deployed on staging environment. Here an &ldquo;artifact&rdquo; is built and stored independently.</li>
</ol>
<p><strong>Suggestion:</strong> Explore the different tools shown above and know the basics of them</p>
<h3 id="ci-tools">CI tools<a hidden class="anchor" aria-hidden="true" href="#ci-tools">#</a></h3>
<p>These are some of the most common CI tools out there. In the next post we are going to explore them with more detail.</p>
<p>CI ToolsURL**<em>Travis CI</em><strong><a href="https://travis-ci.org">https://travis-ci.org</a></strong><em>Jenkins</em><strong><a href="https://jenkins.io">https://jenkins.io</a></strong><em>Drone</em><strong><a href="https://drone.io">https://drone.io</a></strong><em>GitLab CI</em>**<a href="https://gitlab.com">https://gitlab.com</a></p>
<p>Click <a href="/ci-tools/">here</a> to learn about them!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">NetWithAlex</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
