<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Simplifying Tunnel Management with Tunnel Groups in Cisco SD-WAN | NetWithAlex</title>
<meta name="keywords" content="">
<meta name="description" content="Learn how Tunnel Groups in Cisco SD-WAN simplify tunnel management at scale. Discover how they work, how they differ from control policies, and when to use them with real-world examples.">
<meta name="author" content="Alex">
<link rel="canonical" href="http://localhost:1313/tunnel-groups-en/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/assets/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tunnel-groups-en/">
<link rel="alternate" hreflang="es" href="http://localhost:1313/tunnel-groups-es/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>















    
        <link rel="preconnect" href="https://plausible.io">
    
        <!-- Dev mode : We do not load plausible script to avoid bloating your stats -->

<!-- If you are using Content-Security-Policy, do not forget to add this code to your CSP : 
  script-src 'unsafe-inline' https://plausible.io
  connect-src 'unsafe-inline' https://plausible.io
  or just add the partial 'plausible_csp.html' to those 2 csp directives in your 'index.headers' file
-->



    
    <script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
    <script>
         
         
         
    </script>

    

<link rel="stylesheet" href="/assets/css/custom.css">
<meta property="og:url" content="http://localhost:1313/tunnel-groups-en/">
  <meta property="og:site_name" content="NetWithAlex">
  <meta property="og:title" content="Simplifying Tunnel Management with Tunnel Groups in Cisco SD-WAN">
  <meta property="og:description" content="Learn how Tunnel Groups in Cisco SD-WAN simplify tunnel management at scale. Discover how they work, how they differ from control policies, and when to use them with real-world examples.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-07-15T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-15T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Simplifying Tunnel Management with Tunnel Groups in Cisco SD-WAN">
<meta name="twitter:description" content="Learn how Tunnel Groups in Cisco SD-WAN simplify tunnel management at scale. Discover how they work, how they differ from control policies, and when to use them with real-world examples.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Simplifying Tunnel Management with Tunnel Groups in Cisco SD-WAN",
      "item": "http://localhost:1313/tunnel-groups-en/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Simplifying Tunnel Management with Tunnel Groups in Cisco SD-WAN",
  "name": "Simplifying Tunnel Management with Tunnel Groups in Cisco SD-WAN",
  "description": "Learn how Tunnel Groups in Cisco SD-WAN simplify tunnel management at scale. Discover how they work, how they differ from control policies, and when to use them with real-world examples.",
  "keywords": [
    
  ],
  "articleBody": "Introduction SD-WAN provides a highly flexible overlay architecture that allows building tunnels across multiple transport types. A key aspect of this flexibility is how traffic is forwarded across tunnels between edge devices based on transport colors such as private (mpls, private1, etc) and public (public-internet, biz-internet, etc)\nThere are a couple of ways to control what tunnels are created, most notably Control Policies and Tunnel Groups.\nTunnel Groups allow network admins to logically group tunnels (TLOCs) under a common label, simplifying how tunnels are established between devices. This approach makes tunnel management more scalable and easier to maintain. In this post, we‚Äôll explore what Tunnel Groups are, how they work, and how they can serve as an alternative to Control Policies in certain scenarios.\nWhat are tunnel groups? A Tunnel Group is a numeric label that represents a set of TLOCs (tunnels) grouped logically based on a defined intent.\nFigure 1 ‚Äì Tunnel Group configuration on Feature Template Once a Tunnel Group ID is configured the router will:\nEstablish a tunnel with TLOCs that have the same tunnel group ID Establish a tunnel with TLOCs that have no tunnel group ID (value of 0) The Tunnel Group ID is propagated through OMP, just like other TLOC attributes. One key difference between Tunnel Groups and Control Policies is where they take effect: Tunnel Groups control tunnel establishment locally on the device, while Control Policies determine which TLOCs are advertised by the Controller (vSmart) at a central level. Both mechanisms can be used independently or together, depending on your design requirements.\nTunnel Group Behavior: Real Output Walkthrough Let‚Äôs take this topology as a reference for this scenario.\nFigure 2 ‚Äì Reference Topology Let‚Äôs validate how Tunnel group IDs influence which tunnels are actually formed by looking at OMP TLOCs and BFD sessions from a device in site 20.\nBarcelona_BR20-1#show sdwan omp tlocs table ... PUBLIC PRIVATE AFFINITY ADDRESS TENANT PSEUDO PUBLIC PRIVATE PUBLIC IPV6 PRIVATE IPV6 BFD GROUP FAMILY TLOC IP COLOR ENCAP ID FROM PEER STATUS TENANT NAME KEY PUBLIC IP PORT PRIVATE IP PORT IPV6 PORT IPV6 PORT STATUS REGION ID NUMBER --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ipv4 1.1.10.1 mpls ipsec 0 1.0.0.3 C,I,R [Default] 1 21.11.0.2 12426 21.11.0.2 12426 :: 0 :: 0 down None None 1.1.10.1 biz-internet ipsec 0 1.0.0.3 C,I,R [Default] 1 31.11.0.2 12346 31.11.0.2 12346 :: 0 :: 0 down None None 1.1.10.2 mpls ipsec 0 1.0.0.3 C,I,R [Default] 1 21.12.0.2 12346 21.12.0.2 12346 :: 0 :: 0 down None None 1.1.10.2 biz-internet ipsec 0 1.0.0.3 C,I,R [Default] 1 31.12.0.2 12346 31.12.0.2 12346 :: 0 :: 0 down None None 1.1.20.1 mpls ipsec 0 0.0.0.0 C,Red,R [Default] 1 21.21.0.2 12346 21.21.0.2 12346 :: 0 :: 0 up None None 1.1.20.1 biz-internet ipsec 0 0.0.0.0 C,Red,R [Default] 1 31.21.0.2 12346 31.21.0.2 12346 :: 0 :: 0 up None None 1.1.20.2 mpls ipsec 0 1.0.0.3 C,I,R [Default] 1 21.22.0.2 12346 21.22.0.2 12346 :: 0 :: 0 down None None 1.1.20.2 biz-internet ipsec 0 1.0.0.3 C,I,R [Default] 1 31.22.0.2 12346 31.22.0.2 12346 :: 0 :: 0 down None None 1.1.100.1 mpls ipsec 0 1.0.0.3 C,I,R [Default] 1 21.101.0.2 12406 21.101.0.2 12406 :: 0 :: 0 up None None 1.1.100.1 biz-internet ipsec 0 1.0.0.3 C,I,R [Default] 1 31.101.0.2 12346 31.101.0.2 12346 :: 0 :: 0 up None None 1.1.100.2 mpls ipsec 0 1.0.0.3 C,I,R [Default] 1 21.102.0.2 12346 21.102.0.2 12346 :: 0 :: 0 up None None 1.1.100.2 biz-internet ipsec 0 1.0.0.3 C,I,R [Default] 1 31.102.0.2 12346 31.102.0.2 12346 :: 0 :: 0 up None None 1.1.200.1 mpls ipsec 0 1.0.0.3 C,I,R [Default] 1 21.201.0.2 12346 21.201.0.2 12346 :: 0 :: 0 up None None 1.1.200.1 biz-internet ipsec 0 1.0.0.3 C,I,R [Default] 1 31.201.0.2 12346 31.201.0.2 12346 :: 0 :: 0 up None None 1.1.200.2 mpls ipsec 0 1.0.0.3 C,I,R [Default] 1 21.202.0.2 12346 21.202.0.2 12346 :: 0 :: 0 up None None 1.1.200.2 biz-internet ipsec 0 1.0.0.3 C,I,R [Default] 1 31.202.0.2 12386 31.202.0.2 12386 :: 0 :: 0 down None None There are 14 TLOCs received from vSmart, but only few tunnels up:\nBarcelona_BR20-1#sh sdwan bfd sessions SOURCE TLOC REMOTE TLOC DST PUBLIC DST PUBLIC DETECT TX SYSTEM IP SITE ID STATE COLOR COLOR SOURCE IP IP PORT ENCAP MULTIPLIER INTERVAL(msec UPTIME TRANSITIONS ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.1.100.1 100 up mpls mpls 21.21.0.2 21.101.0.2 12406 ipsec 7 1000 0:02:23:34 2 1.1.100.2 100 up mpls mpls 21.21.0.2 21.102.0.2 12346 ipsec 7 1000 0:02:23:33 1 1.1.200.1 200 up mpls mpls 21.21.0.2 21.201.0.2 12346 ipsec 7 1000 6:03:57:35 0 1.1.200.2 200 up mpls mpls 21.21.0.2 21.202.0.2 12346 ipsec 7 1000 6:03:57:36 0 1.1.100.1 100 up biz-internet biz-internet 31.21.0.2 31.101.0.2 12346 ipsec 7 1000 0:02:23:34 1 1.1.100.2 100 up biz-internet biz-internet 31.21.0.2 31.102.0.2 12346 ipsec 7 1000 0:02:23:33 1 1.1.200.1 200 up biz-internet biz-internet 31.21.0.2 31.201.0.2 12346 ipsec 7 1000 6:03:57:35 0 1.1.200.2 200 up biz-internet biz-internet 31.21.0.2 31.202.0.2 12426 ipsec 7 1000 0:00:00:08 0 If we examine the TLOC details, we can see there are 4 TLOCs with a non-matching group-id of 10. The rest either match or are unconfigured ([0]). Remember devices within the same site won‚Äôt form BFD tunnels.\nBarcelona_BR20-1#show sdwan omp tlocs | include tloc|mpls|internet|groups|site tloc entries for 1.1.10.1 \u003c\u003c\u003c non-matching Group ID mpls site-id 10 groups [ 10 ] site-type not set tloc entries for 1.1.10.1 \u003c\u003c\u003c non-matching Group ID biz-internet site-id 10 groups [ 10 ] site-type not set tloc entries for 1.1.10.2 \u003c\u003c\u003c non-matching Group ID mpls site-id 10 groups [ 10 ] site-type not set tloc entries for 1.1.10.2 \u003c\u003c\u003c non-matching Group ID biz-internet site-id 10 groups [ 10 ] site-type not set tloc entries for 1.1.20.1 \u003c\u003c\u003c\u003c own TLOC mpls site-id 20 groups [ 20 ] site-type not set site-id 20 groups [ 20 ] ) site-type not set tloc entries for 1.1.20.1 \u003c\u003c\u003c\u003c own TLOC biz-internet site-id 20 groups [ 20 ] site-type not set site-id 20 groups [ 20 ] ) site-type not set tloc entries for 1.1.20.2 \u003c\u003c\u003c\u003c same site mpls site-id 20 groups [ 20 ] site-type not set tloc entries for 1.1.20.2 \u003c\u003c\u003c\u003c same site biz-internet site-id 20 groups [ 20 ] site-type not set tloc entries for 1.1.100.1 #1 mpls site-id 100 groups [ 0 ] site-type not set tloc entries for 1.1.100.1 #2 biz-internet site-id 100 groups [ 0 ] site-type not set tloc entries for 1.1.100.2 #3 mpls site-id 100 groups [ 0 ] site-type not set tloc entries for 1.1.100.2 #4 biz-internet site-id 100 groups [ 0 ] site-type not set tloc entries for 1.1.200.1 #5 mpls site-id 200 groups [ 20 ] site-type not set tloc entries for 1.1.200.1 #6 biz-internet site-id 200 groups [ 20 ] site-type not set tloc entries for 1.1.200.2 #7 mpls site-id 200 groups [ 20 ] site-type not set tloc entries for 1.1.200.2 #8 biz-internet site-id 200 groups [ 20 ] site-type not set Tunnel Group + restrict option As you can see above, only tunnels between matching colors are established, meaning that the restrict option is enabled on the devices:\nFigure 3 ‚Äì Tunnel Group configuration with 'restrict' option If the restrict option is removed from MPLS tunnel, let‚Äôs see what happens with the BFD sessions:\nBarcelona_BR20-1#show sdwan bfd sessions SOURCE TLOC REMOTE TLOC DST PUBLIC DST PUBLIC DETECT TX SYSTEM IP SITE ID STATE COLOR COLOR SOURCE IP IP PORT ENCAP MULTIPLIER INTERVAL(msec UPTIME TRANSITIONS ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.1.100.1 100 up mpls mpls 21.21.0.2 21.101.0.2 12406 ipsec 7 1000 0:03:14:45 2 1.1.100.2 100 up mpls mpls 21.21.0.2 21.102.0.2 12346 ipsec 7 1000 0:03:14:44 1 1.1.200.1 200 up mpls mpls 21.21.0.2 21.201.0.2 12346 ipsec 7 1000 6:04:48:46 0 1.1.200.2 200 up mpls mpls 21.21.0.2 21.202.0.2 12346 ipsec 7 1000 6:04:48:47 0 1.1.100.1 100 up mpls biz-internet 21.21.0.2 31.101.0.2 12346 ipsec 7 1000 0:00:03:37 0 1.1.100.2 100 up mpls biz-internet 21.21.0.2 31.102.0.2 12346 ipsec 7 1000 0:00:03:37 0 1.1.200.1 200 up mpls biz-internet 21.21.0.2 31.201.0.2 12346 ipsec 7 1000 0:00:03:37 0 1.1.200.2 200 up mpls biz-internet 21.21.0.2 31.202.0.2 12426 ipsec 7 1000 0:00:03:37 0 1.1.200.1 200 up biz-internet mpls 31.21.0.2 21.201.0.2 12346 ipsec 7 1000 0:00:03:33 0 1.1.200.2 200 up biz-internet mpls 31.21.0.2 21.202.0.2 12346 ipsec 7 1000 0:00:03:35 0 1.1.100.1 100 up biz-internet biz-internet 31.21.0.2 31.101.0.2 12346 ipsec 7 1000 0:03:14:45 1 1.1.100.2 100 up biz-internet biz-internet 31.21.0.2 31.102.0.2 12346 ipsec 7 1000 0:03:14:44 1 1.1.200.1 200 up biz-internet biz-internet 31.21.0.2 31.201.0.2 12346 ipsec 7 1000 6:04:48:46 0 1.1.200.2 200 up biz-internet biz-internet 31.21.0.2 31.202.0.2 12426 ipsec 7 1000 0:00:51:19 0 Now there are tunnels between different colors, but honoring the Tunnel Group ID.\nSo in conclusion, if the restrict option is configured along with Tunnel groups, tunnels will form if:\nThe TLOC color matches Tunnel Group IDs match or one side doesn‚Äôt have Tunnel Group configured (Group 0) Use Cases Let‚Äôs talk about some real life use cases for this feature.\nGrouping private and public colors There are multiple labels for private and public colors. Depending on your network design, you could end up having different color names per region. Example:\nContinent Public Colors Private Colors Europe biz-internet mpls America gold metro-ethernet Using Tunnel Groups, we can easily separate tunnels between private and public colors:\nFigure 4 ‚Äì Color Grouping based on Tunnel Group ID Tunnel Group 10 assigned to private colors will ensure only tunnels between mpls and metro-ethernet are established. Likewise, Tunnel Group 20 will allow public color tunnels, gold and biz-internet.\nHorizontal Scaling When head-end routers need to build tunnels with many remote sites, each using multiple transport types, they can hit the platform‚Äôs tunnel scale limit. Tunnel groups help in these situations by spreading out tunnel creation across different routers and remote branches, making the overall design more scalable.\nFigure 5 ‚Äì Horizontal Scaling Approach with Tunnel Groups By doing this, each branch will be connected to both data centers while keeping the number of session on the head-end routers under control.\nCreating Partial Mesh If there is a need to create partial mesh, tunnel groups can come very handy.\nFigure 5 ‚Äì Partial Mesh Topology In this case devices with Tunnel Group 10 and with no Tunnel Group (0) will establish tunnels between them. Likewise, devices with Tunnel Group 20 and with no Tunnel Group (0) will create tunnels.\nConclusion Tunnel Groups in Cisco SD-WAN provide a scalable way to control tunnel establishment across small or large deployments. By tagging TLOCs with numeric group IDs, you gain the ability to:\nCreate logical tunnel groups without relying solely on color matching. Reduce the complexity of centralized control policies. Design more predictable and scalable topologies like partial mesh, hub-and-spoke, or horizontal scaling. Whether you‚Äôre dealing with multi-region color naming inconsistencies, scaling head-end routers, or simply want a cleaner way to manage tunnels, Tunnel Groups offer a powerful tool to simplify your design.\nWhen combined with the restrict option, Tunnel Groups give you fine-grained control over which tunnels are allowed ‚Äî by color, by group, or both. And with the right tunnel group strategy, you can significantly reduce tunnel bloat while maintaining high availability and performance.\n",
  "wordCount" : "1823",
  "inLanguage": "en",
  "datePublished": "2025-07-15T00:00:00Z",
  "dateModified": "2025-07-15T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Alex"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/tunnel-groups-en/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "NetWithAlex",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/assets/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="NetWithAlex (Alt + H)">NetWithAlex</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://localhost:1313/es/" title="Espa√±ol"
                            aria-label="Espa√±ol">Es</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/category/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="About me.">
                    <span>About me.</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="üîç">
                    <span>üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;¬ª&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Simplifying Tunnel Management with Tunnel Groups in Cisco SD-WAN
    </h1>
    <div class="post-description">
      Learn how Tunnel Groups in Cisco SD-WAN simplify tunnel management at scale. Discover how they work, how they differ from control policies, and when to use them with real-world examples.
    </div>
    <div class="post-meta"><span title='2025-07-15 00:00:00 +0000 +0000'>July 15, 2025</span>&nbsp;¬∑&nbsp;9 min&nbsp;¬∑&nbsp;Alex&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="http://localhost:1313/tunnel-groups-es/">Es</a>
    </li>
</ul>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#what-are-tunnel-groups" aria-label="What are tunnel groups?">What are tunnel groups?</a></li>
                <li>
                    <a href="#tunnel-group-behavior-real-output-walkthrough" aria-label="Tunnel Group Behavior: Real Output Walkthrough">Tunnel Group Behavior: Real Output Walkthrough</a></li>
                <li>
                    <a href="#tunnel-group--restrict-option" aria-label="Tunnel Group &#43; restrict option">Tunnel Group + restrict option</a></li>
                <li>
                    <a href="#use-cases" aria-label="Use Cases">Use Cases</a><ul>
                        
                <li>
                    <a href="#grouping-private-and-public-colors" aria-label="Grouping private and public colors">Grouping private and public colors</a></li>
                <li>
                    <a href="#horizontal-scaling" aria-label="Horizontal Scaling">Horizontal Scaling</a></li>
                <li>
                    <a href="#creating-partial-mesh" aria-label="Creating Partial Mesh">Creating Partial Mesh</a></li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>SD-WAN provides a highly flexible overlay architecture that allows building tunnels across multiple transport types. A key aspect of this flexibility is how traffic is forwarded across tunnels between edge devices based on transport colors such as <strong>private</strong> (<em>mpls, private1, etc</em>) and <strong>public</strong> (<em>public-internet, biz-internet, etc</em>)</p>
<p>There are a couple of ways to control what tunnels are created, most notably <a href="/policies-intro-en">Control Policies</a> and Tunnel Groups.</p>
<p><strong>Tunnel Groups</strong> allow network admins to logically group tunnels (TLOCs) under a common label, simplifying how tunnels are established between devices. This approach makes tunnel management more scalable and easier to maintain. In this post, we‚Äôll explore what Tunnel Groups are, how they work, and how they can serve as an alternative to Control Policies in certain scenarios.</p>
<h2 id="what-are-tunnel-groups">What are tunnel groups?<a hidden class="anchor" aria-hidden="true" href="#what-are-tunnel-groups">#</a></h2>
<p>A Tunnel Group is a <em>numeric label</em> that represents a set of TLOCs (tunnels) grouped logically based on a defined intent.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/07/tg1.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 1</strong>
       ‚Äì 
      Tunnel Group configuration on Feature Template
    </figcaption>
  
</figure>

<p>Once a Tunnel Group ID is configured the router will:</p>
<ul>
<li>Establish a tunnel with TLOCs that have the same tunnel group ID</li>
<li>Establish a tunnel with TLOCs that have no tunnel group ID (<strong>value of 0</strong>)</li>
</ul>
<p>The Tunnel Group ID is propagated through OMP, just like other TLOC attributes. One key difference between Tunnel Groups and Control Policies is where they take effect: Tunnel Groups control tunnel establishment locally on the device, while Control Policies determine which TLOCs are advertised by the Controller (vSmart) at a central level. Both mechanisms can be used independently or together, depending on your design requirements.</p>
<h2 id="tunnel-group-behavior-real-output-walkthrough">Tunnel Group Behavior: Real Output Walkthrough<a hidden class="anchor" aria-hidden="true" href="#tunnel-group-behavior-real-output-walkthrough">#</a></h2>
<p>Let&rsquo;s take this topology as a reference for this scenario.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/07/tg3.png" alt="Topology">
  
  
  
    <figcaption>
      <strong>Figure 2</strong>
       ‚Äì 
      Reference Topology
    </figcaption>
  
</figure>

<p>Let&rsquo;s validate how <strong>Tunnel group IDs</strong> influence which tunnels are actually formed by looking at OMP TLOCs and BFD sessions from a device in site 20.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Barcelona_BR20-1#show sdwan omp tlocs table
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                                                                                                                                                                   PUBLIC           PRIVATE                      AFFINITY    
</span></span><span style="display:flex;"><span>ADDRESS                                           TENANT                                                        PSEUDO                   PUBLIC                   PRIVATE  PUBLIC  IPV6    PRIVATE  IPV6     BFD                 GROUP       
</span></span><span style="display:flex;"><span>FAMILY   TLOC IP          COLOR            ENCAP  ID        FROM PEER        STATUS    TENANT NAME              KEY     PUBLIC IP        PORT    PRIVATE IP       PORT     IPV6    PORT    IPV6     PORT     STATUS  REGION ID   NUMBER      
</span></span><span style="display:flex;"><span>---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>ipv4     1.1.10.1         mpls             ipsec  0         1.0.0.3          C,I,R     [Default]                1       21.11.0.2        12426   21.11.0.2        12426    ::      0       ::       0        down    None        None        
</span></span><span style="display:flex;"><span>         1.1.10.1         biz-internet     ipsec  0         1.0.0.3          C,I,R     [Default]                1       31.11.0.2        12346   31.11.0.2        12346    ::      0       ::       0        down    None        None        
</span></span><span style="display:flex;"><span>         1.1.10.2         mpls             ipsec  0         1.0.0.3          C,I,R     [Default]                1       21.12.0.2        12346   21.12.0.2        12346    ::      0       ::       0        down    None        None        
</span></span><span style="display:flex;"><span>         1.1.10.2         biz-internet     ipsec  0         1.0.0.3          C,I,R     [Default]                1       31.12.0.2        12346   31.12.0.2        12346    ::      0       ::       0        down    None        None        
</span></span><span style="display:flex;"><span>         1.1.20.1         mpls             ipsec  0         0.0.0.0          C,Red,R   [Default]                1       21.21.0.2        12346   21.21.0.2        12346    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.20.1         biz-internet     ipsec  0         0.0.0.0          C,Red,R   [Default]                1       31.21.0.2        12346   31.21.0.2        12346    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.20.2         mpls             ipsec  0         1.0.0.3          C,I,R     [Default]                1       21.22.0.2        12346   21.22.0.2        12346    ::      0       ::       0        down    None        None        
</span></span><span style="display:flex;"><span>         1.1.20.2         biz-internet     ipsec  0         1.0.0.3          C,I,R     [Default]                1       31.22.0.2        12346   31.22.0.2        12346    ::      0       ::       0        down    None        None        
</span></span><span style="display:flex;"><span>         1.1.100.1        mpls             ipsec  0         1.0.0.3          C,I,R     [Default]                1       21.101.0.2       12406   21.101.0.2       12406    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.100.1        biz-internet     ipsec  0         1.0.0.3          C,I,R     [Default]                1       31.101.0.2       12346   31.101.0.2       12346    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.100.2        mpls             ipsec  0         1.0.0.3          C,I,R     [Default]                1       21.102.0.2       12346   21.102.0.2       12346    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.100.2        biz-internet     ipsec  0         1.0.0.3          C,I,R     [Default]                1       31.102.0.2       12346   31.102.0.2       12346    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.200.1        mpls             ipsec  0         1.0.0.3          C,I,R     [Default]                1       21.201.0.2       12346   21.201.0.2       12346    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.200.1        biz-internet     ipsec  0         1.0.0.3          C,I,R     [Default]                1       31.201.0.2       12346   31.201.0.2       12346    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.200.2        mpls             ipsec  0         1.0.0.3          C,I,R     [Default]                1       21.202.0.2       12346   21.202.0.2       12346    ::      0       ::       0        up      None        None        
</span></span><span style="display:flex;"><span>         1.1.200.2        biz-internet     ipsec  0         1.0.0.3          C,I,R     [Default]                1       31.202.0.2       12386   31.202.0.2       12386    ::      0       ::       0        down    None        None        
</span></span></code></pre></div><p>There are 14 TLOCs received from vSmart, but only few tunnels up:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Barcelona_BR20-1#sh sdwan bfd sessions 
</span></span><span style="display:flex;"><span>                                      SOURCE TLOC      REMOTE TLOC                                      DST PUBLIC                      DST PUBLIC         DETECT      TX                              
</span></span><span style="display:flex;"><span>SYSTEM IP        SITE ID     STATE       COLOR            COLOR            SOURCE IP                                       IP                                              PORT        ENCAP  MULTIPLIER  INTERVAL(msec  UPTIME          TRANSITIONS   
</span></span><span style="display:flex;"><span>-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>1.1.100.1        100         up          mpls             mpls             21.21.0.2                                       21.101.0.2                                      12406       ipsec  7           1000           0:02:23:34      2             
</span></span><span style="display:flex;"><span>1.1.100.2        100         up          mpls             mpls             21.21.0.2                                       21.102.0.2                                      12346       ipsec  7           1000           0:02:23:33      1             
</span></span><span style="display:flex;"><span>1.1.200.1        200         up          mpls             mpls             21.21.0.2                                       21.201.0.2                                      12346       ipsec  7           1000           6:03:57:35      0             
</span></span><span style="display:flex;"><span>1.1.200.2        200         up          mpls             mpls             21.21.0.2                                       21.202.0.2                                      12346       ipsec  7           1000           6:03:57:36      0             
</span></span><span style="display:flex;"><span>1.1.100.1        100         up          biz-internet     biz-internet     31.21.0.2                                       31.101.0.2                                      12346       ipsec  7           1000           0:02:23:34      1             
</span></span><span style="display:flex;"><span>1.1.100.2        100         up          biz-internet     biz-internet     31.21.0.2                                       31.102.0.2                                      12346       ipsec  7           1000           0:02:23:33      1             
</span></span><span style="display:flex;"><span>1.1.200.1        200         up          biz-internet     biz-internet     31.21.0.2                                       31.201.0.2                                      12346       ipsec  7           1000           6:03:57:35      0             
</span></span><span style="display:flex;"><span>1.1.200.2        200         up          biz-internet     biz-internet     31.21.0.2                                       31.202.0.2                                      12426       ipsec  7           1000           0:00:00:08      0             
</span></span></code></pre></div><p>If we examine the TLOC details, we can see there are 4 TLOCs with a non-matching group-id of 10. The rest either match or are unconfigured ([0]). Remember devices within the same site won&rsquo;t form BFD tunnels.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Barcelona_BR20-1#show sdwan omp tlocs | include tloc|mpls|internet|groups|site
</span></span><span style="display:flex;"><span>tloc entries for 1.1.10.1      &lt;&lt;&lt; non-matching Group ID
</span></span><span style="display:flex;"><span>                 mpls
</span></span><span style="display:flex;"><span>     site-id           10
</span></span><span style="display:flex;"><span>     groups            [ 10 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.10.1       &lt;&lt;&lt; non-matching Group ID
</span></span><span style="display:flex;"><span>                 biz-internet
</span></span><span style="display:flex;"><span>     site-id           10
</span></span><span style="display:flex;"><span>     groups            [ 10 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.10.2       &lt;&lt;&lt; non-matching Group ID
</span></span><span style="display:flex;"><span>                 mpls
</span></span><span style="display:flex;"><span>     site-id           10
</span></span><span style="display:flex;"><span>     groups            [ 10 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.10.2       &lt;&lt;&lt; non-matching Group ID
</span></span><span style="display:flex;"><span>                 biz-internet
</span></span><span style="display:flex;"><span>     site-id           10
</span></span><span style="display:flex;"><span>     groups            [ 10 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.20.1    &lt;&lt;&lt;&lt; own TLOC 
</span></span><span style="display:flex;"><span>                 mpls
</span></span><span style="display:flex;"><span>     site-id           20
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>     site-id           20
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>)     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.20.1    &lt;&lt;&lt;&lt; own TLOC
</span></span><span style="display:flex;"><span>                 biz-internet
</span></span><span style="display:flex;"><span>     site-id           20
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>     site-id           20
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>)     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.20.2   &lt;&lt;&lt;&lt; same site
</span></span><span style="display:flex;"><span>                 mpls
</span></span><span style="display:flex;"><span>     site-id           20
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.20.2   &lt;&lt;&lt;&lt; same site
</span></span><span style="display:flex;"><span>                 biz-internet
</span></span><span style="display:flex;"><span>     site-id           20
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.100.1       #1
</span></span><span style="display:flex;"><span>                 mpls
</span></span><span style="display:flex;"><span>     site-id           100
</span></span><span style="display:flex;"><span>     groups            [ 0 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.100.1       #2
</span></span><span style="display:flex;"><span>                 biz-internet
</span></span><span style="display:flex;"><span>     site-id           100
</span></span><span style="display:flex;"><span>     groups            [ 0 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.100.2       #3
</span></span><span style="display:flex;"><span>                 mpls
</span></span><span style="display:flex;"><span>     site-id           100
</span></span><span style="display:flex;"><span>     groups            [ 0 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.100.2        #4
</span></span><span style="display:flex;"><span>                 biz-internet
</span></span><span style="display:flex;"><span>     site-id           100
</span></span><span style="display:flex;"><span>     groups            [ 0 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.200.1       #5
</span></span><span style="display:flex;"><span>                 mpls
</span></span><span style="display:flex;"><span>     site-id           200
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.200.1       #6
</span></span><span style="display:flex;"><span>                 biz-internet
</span></span><span style="display:flex;"><span>     site-id           200
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.200.2       #7
</span></span><span style="display:flex;"><span>                 mpls
</span></span><span style="display:flex;"><span>     site-id           200
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span><span style="display:flex;"><span>tloc entries for 1.1.200.2       #8
</span></span><span style="display:flex;"><span>                 biz-internet
</span></span><span style="display:flex;"><span>     site-id           200
</span></span><span style="display:flex;"><span>     groups            [ 20 ]
</span></span><span style="display:flex;"><span>     site-type        not set
</span></span></code></pre></div><h2 id="tunnel-group--restrict-option">Tunnel Group + restrict option<a hidden class="anchor" aria-hidden="true" href="#tunnel-group--restrict-option">#</a></h2>
<p>As you can see above, only tunnels between matching colors are established, meaning that the restrict option is enabled on the devices:</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/07/tg2.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 3</strong>
       ‚Äì 
      Tunnel Group configuration with &#39;restrict&#39; option
    </figcaption>
  
</figure>

<p>If the restrict option is removed from MPLS tunnel, let&rsquo;s see what happens with the BFD sessions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Barcelona_BR20-1#show sdwan bfd sessions 
</span></span><span style="display:flex;"><span>                                      SOURCE TLOC      REMOTE TLOC                                      DST PUBLIC                      DST PUBLIC         DETECT      TX                              
</span></span><span style="display:flex;"><span>SYSTEM IP        SITE ID     STATE       COLOR            COLOR            SOURCE IP                                       IP                                              PORT        ENCAP  MULTIPLIER  INTERVAL(msec  UPTIME          TRANSITIONS   
</span></span><span style="display:flex;"><span>-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>1.1.100.1        100         up          mpls             mpls             21.21.0.2                                       21.101.0.2                                      12406       ipsec  7           1000           0:03:14:45      2             
</span></span><span style="display:flex;"><span>1.1.100.2        100         up          mpls             mpls             21.21.0.2                                       21.102.0.2                                      12346       ipsec  7           1000           0:03:14:44      1             
</span></span><span style="display:flex;"><span>1.1.200.1        200         up          mpls             mpls             21.21.0.2                                       21.201.0.2                                      12346       ipsec  7           1000           6:04:48:46      0             
</span></span><span style="display:flex;"><span>1.1.200.2        200         up          mpls             mpls             21.21.0.2                                       21.202.0.2                                      12346       ipsec  7           1000           6:04:48:47      0             
</span></span><span style="display:flex;"><span>1.1.100.1        100         up          mpls             biz-internet     21.21.0.2                                       31.101.0.2                                      12346       ipsec  7           1000           0:00:03:37      0             
</span></span><span style="display:flex;"><span>1.1.100.2        100         up          mpls             biz-internet     21.21.0.2                                       31.102.0.2                                      12346       ipsec  7           1000           0:00:03:37      0             
</span></span><span style="display:flex;"><span>1.1.200.1        200         up          mpls             biz-internet     21.21.0.2                                       31.201.0.2                                      12346       ipsec  7           1000           0:00:03:37      0             
</span></span><span style="display:flex;"><span>1.1.200.2        200         up          mpls             biz-internet     21.21.0.2                                       31.202.0.2                                      12426       ipsec  7           1000           0:00:03:37      0             
</span></span><span style="display:flex;"><span>1.1.200.1        200         up          biz-internet     mpls             31.21.0.2                                       21.201.0.2                                      12346       ipsec  7           1000           0:00:03:33      0             
</span></span><span style="display:flex;"><span>1.1.200.2        200         up          biz-internet     mpls             31.21.0.2                                       21.202.0.2                                      12346       ipsec  7           1000           0:00:03:35      0             
</span></span><span style="display:flex;"><span>1.1.100.1        100         up          biz-internet     biz-internet     31.21.0.2                                       31.101.0.2                                      12346       ipsec  7           1000           0:03:14:45      1             
</span></span><span style="display:flex;"><span>1.1.100.2        100         up          biz-internet     biz-internet     31.21.0.2                                       31.102.0.2                                      12346       ipsec  7           1000           0:03:14:44      1             
</span></span><span style="display:flex;"><span>1.1.200.1        200         up          biz-internet     biz-internet     31.21.0.2                                       31.201.0.2                                      12346       ipsec  7           1000           6:04:48:46      0             
</span></span><span style="display:flex;"><span>1.1.200.2        200         up          biz-internet     biz-internet     31.21.0.2                                       31.202.0.2                                      12426       ipsec  7           1000           0:00:51:19      0             
</span></span></code></pre></div><p>Now there are tunnels between different colors, but honoring the Tunnel Group ID.</p>
<p>So in conclusion, if the restrict option is configured along with Tunnel groups, tunnels will form if:</p>
<ol>
<li>The TLOC color matches</li>
<li>Tunnel Group IDs match or one side doesn&rsquo;t have Tunnel Group configured (Group 0)</li>
</ol>
<h2 id="use-cases">Use Cases<a hidden class="anchor" aria-hidden="true" href="#use-cases">#</a></h2>
<p>Let&rsquo;s talk about some real life use cases for this feature.</p>
<h3 id="grouping-private-and-public-colors">Grouping private and public colors<a hidden class="anchor" aria-hidden="true" href="#grouping-private-and-public-colors">#</a></h3>
<p>There are multiple labels for private and public colors. Depending on your network design, you could end up having different color names per region. Example:</p>
<table>
  <thead>
      <tr>
          <th>Continent</th>
          <th>Public Colors</th>
          <th>Private Colors</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Europe</td>
          <td>biz-internet</td>
          <td>mpls</td>
      </tr>
      <tr>
          <td>America</td>
          <td>gold</td>
          <td>metro-ethernet</td>
      </tr>
  </tbody>
</table>
<p>Using Tunnel Groups, we can easily separate tunnels between private and public colors:</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/07/tg4.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 4</strong>
       ‚Äì 
      Color Grouping based on Tunnel Group ID
    </figcaption>
  
</figure>

<p>Tunnel Group 10 assigned to private colors will ensure only tunnels between mpls and metro-ethernet are established. Likewise, Tunnel Group 20 will allow public color tunnels, gold and biz-internet.</p>
<h3 id="horizontal-scaling">Horizontal Scaling<a hidden class="anchor" aria-hidden="true" href="#horizontal-scaling">#</a></h3>
<p>When head-end routers need to build tunnels with many remote sites, each using multiple transport types, they can hit the platform&rsquo;s tunnel scale limit. Tunnel groups help in these situations by spreading out tunnel creation across different routers and remote branches, making the overall design more scalable.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/07/tg5.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 5</strong>
       ‚Äì 
      Horizontal Scaling Approach with Tunnel Groups
    </figcaption>
  
</figure>

<p>By doing this, each branch will be connected to both data centers while keeping the number of session on the head-end routers under control.</p>
<h3 id="creating-partial-mesh">Creating Partial Mesh<a hidden class="anchor" aria-hidden="true" href="#creating-partial-mesh">#</a></h3>
<p>If there is a need to create partial mesh, tunnel groups can come very handy.</p>
<figure class="custom-figure">
  <img src="/wp-content/uploads/2025/07/tg6.png" alt="">
  
  
  
    <figcaption>
      <strong>Figure 5</strong>
       ‚Äì 
      Partial Mesh Topology
    </figcaption>
  
</figure>

<p>In this case devices with Tunnel Group 10 and with no Tunnel Group (0) will establish tunnels between them. Likewise, devices with Tunnel Group 20 and with no Tunnel Group (0) will create tunnels.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Tunnel Groups in Cisco SD-WAN provide a scalable way to control tunnel establishment across small or large deployments. By tagging TLOCs with numeric group IDs, you gain the ability to:</p>
<ul>
<li>Create logical tunnel groups without relying solely on color matching.</li>
<li>Reduce the complexity of centralized control policies.</li>
<li>Design more predictable and scalable topologies like partial mesh, hub-and-spoke, or horizontal scaling.</li>
</ul>
<p>Whether you‚Äôre dealing with multi-region color naming inconsistencies, scaling head-end routers, or simply want a cleaner way to manage tunnels, Tunnel Groups offer a powerful tool to simplify your design.</p>
<p>When combined with the restrict option, Tunnel Groups give you fine-grained control over which tunnels are allowed ‚Äî by color, by group, or both. And with the right tunnel group strategy, you can significantly reduce tunnel bloat while maintaining high availability and performance.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer><script src="https://utteranc.es/client.js"
        repo="aruiz-p/netwithalex"
        issue-term="title"
        label="comments"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">NetWithAlex</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
